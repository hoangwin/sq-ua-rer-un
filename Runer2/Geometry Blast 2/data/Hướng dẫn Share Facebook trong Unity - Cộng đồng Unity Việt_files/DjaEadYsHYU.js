/*!CK:4235618794!*//*1439331503,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["pGqeT"]); }

__d("AdminSignatureConstants",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={SETTING_ATTACH_TO_POST:"shouldAttachToPost",SETTING_ATTACH_TO_COMMENT:"shouldAttachToComment",SETTING_ATTACH_TO_MESSAGE:"shouldAttachToMessage",SETTING_EVER_PROMPTED:"everPromptedUser",SETTING_SIGNATURE_TEXT:"signature",FIELD_PAGE_ID:"pageID",FIELD_SIGNATURE_OPTION_FIELD:"signatureOption",FIELD_SIGNATURE_OPTION_VALUE_FIELD:"signatureOptionValue",FIELD_SIGNATURE_TEXT_FIELD:"signatureText",EVENT_ADMIN_SIGNATURE_PROMPTED:"AdminSignature\/prompted",EVENT_ADMIN_SIGNATURE_SETTING_CHANGED:"AdminSignatureSetting\/changed"};},null,{});
__d("PagesPrivateReplyConstants",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={Status:{REPLYABLE:"replyable",ALREADY_REPLIED:"already_replied",RECIPIENT_FILTER:"recipient_filter",EXPIRED:"expired",NOT_USER_CREATED:"not_user_created"},Type:{COMMENT_PAGE_POST:"comment_page_post",COMMENT_WALL_POST:"comment_wall_post",COMMENT_REVIEW:"comment_review",REVIEW:"review",WALL_POST:"wall_post"}};},null,{});
__d("ReactComposerConstants",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={ID_PREFIX:"rc.",GK_VIDEO_COPYRIGHT:"video_copyright_confirmation_dialog",GK_MULTILINGUAL_COMPOSER:"multilingual_composer_www"};},null,{});
__d("UFIActionTypes",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={STORY:{CHANGE_ORDER_MODE:"story_change_order_mode",SPAM_FETCHED:"story_spam_fetched",TOGGLE_LIKE:"story_toggle_like"},COMMENT:{EDIT:"comment_edit",REMOVE:"comment_remove",REMOVE_PREVIEW:"comment_remove_preview",TOGGLE_INLINE_BAN:"comment_toggle_inline_ban",TOGGLE_LIKE:"comment_toggle_like",TOGGLE_MARK_AS_SPAM:"comment_toggle_mark_as_spam",TRANSLATE:"comment_translate"},ADD_COMMENT:{CANCEL:"add_comment_cancel",RETRY_SUBMIT:"add_comment_retry_submit",SUBMIT_EDIT:"add_comment_submit_edit"}};},null,{});
__d("UFITranslationConstants",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={BING_PAGE_URL:"http:\/\/bing.com\/translator",BING_TRANSLATOR_APP:"bing",FB_TRANSLATOR_APP:"fb",FB_AND_BING_TRANSLATOR_APP:"fb_and_bing"};},null,{});
__d('ReactDispatcher',['Dispatcher','ReactUpdates'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;'use strict';j=h;k=j&&j.prototype;Object.assign(l,j);l.prototype=Object.create(j.prototype);l.prototype.constructor=l;l.__superConstructor__=j;l.prototype.dispatch=function(m){i.batchedUpdates((function(){k.dispatch.call(this,m);}).bind(this));};function l(){j.apply(this,arguments);}f.exports=l;},null);
__d('UFIDispatcher',['ReactDispatcher'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports=h;},null);
__d('UFIAddCommentAction',['UFIActionTypes'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();'use strict';var i={cancel:function(j){return {type:h.ADD_COMMENT.CANCEL,instanceid:j};},retrySubmit:function(j){return {type:h.ADD_COMMENT.RETRY_SUBMIT,comment:j};},submitEdit:function(j,k,l){return {type:h.ADD_COMMENT.SUBMIT_EDIT,comment:j,commentData:k,target:l};}};f.exports=i;},null);
__d('UFICommentAction',['UFIActionTypes'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();'use strict';var i={edit:function(j){return {type:h.COMMENT.EDIT,comment:j};},remove:function(j,k,l){return {type:h.COMMENT.REMOVE,comment:j,target:k,onConfirm:l};},removePreview:function(j,k){return {type:h.COMMENT.REMOVE_PREVIEW,comment:j,target:k};},toggleLike:function(j,k){return {type:h.COMMENT.TOGGLE_LIKE,comment:j,like:!j.hasviewerliked,target:k};},translate:function(j,k){return {type:h.COMMENT.TRANSLATE,comment:j,target:k};},markAsSpam:function(j,k){return {type:h.COMMENT.TOGGLE_MARK_AS_SPAM,is_spam:true,comment:j,target:k};},markAsNotSpam:function(j,k){return {type:h.COMMENT.TOGGLE_MARK_AS_SPAM,is_spam:false,comment:j,target:k};},inlineBan:function(j,k,l){return {type:h.COMMENT.TOGGLE_INLINE_BAN,is_banned:true,comment:j,target:k,ownerid:l};},undoInlineBan:function(j,k,l){return {type:h.COMMENT.TOGGLE_INLINE_BAN,is_banned:false,comment:j,target:k,ownerid:l};}};f.exports=i;},null);
__d('UFIStoryAction',['UFIActionTypes'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();'use strict';var i={changeOrderingMode:function(j){return {type:h.STORY.CHANGE_ORDER_MODE,mode:j};},toggleLike:function(j){return {type:h.STORY.TOGGLE_LIKE,target:j};},spamFetched:function(j,k){return {type:h.STORY.SPAM_FETCHED,commentIDs:j,parentCommentID:k};}};f.exports=i;},null);
__d('ClickPointIdentifiersDEPRECATED',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={types:{TIMELINE_SEE_LIKERS:'timeline:seelikes'},getUserActionID:function(i){return '{"ua_id":"'+i+'"}';}};f.exports=h;},null);
__d('NumberFormat',['NumberFormatConfig'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=/(\d{3})(?=\d)/g;function j(m){return (''+m).split('').reverse().join('');}function k(m,n){if(Math.abs(m).toString().length<h.minDigitsForThousandsSeparator)return m.toString();var o=j(m);return j(o.replace(i,'$1'+n));}var l={formatIntegerWithDelimiter:k,formatInteger:function(m){return k(m,h.numberDelimiter);}};f.exports=l;},null);
__d('UFIBlingItem.react',['React','NumberFormat','cx','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=h.PropTypes,n=h.createClass({displayName:'UFIBlingItem',propTypes:{contextArgs:m.object.isRequired,count:m.number.isRequired,countreduced:m.string,allowText:m.bool,className:m.string,iconClassName:m.string,itemKey:m.string},render:function(){var o=l(this.props.className,this.props.iconClassName,"UFIBlingBoxSprite"),p=i.formatIntegerWithDelimiter(this.props.count,this.props.contextArgs.numberdelimiter||','),q=p,r=this.props.contextArgs.ufiexperiments||{};if(this.props.allowText||r.showSlimUFI)switch(this.props.itemKey){case 'like':if(r.showSlimUFI)q=k._({"Like":"{count} Like","Likes":"{count} Likes"},[k.param("count",r.truncateNumbers&&isNaN(this.props.countreduced)?this.props.countreduced:q),k['enum'](this.props.count===1?'Like':'Likes',{Like:'Like',Likes:'Likes'})]);break;case 'comment':if(r.showSlimUFI)q=k._({"Comment":"{count} Comment","Comments":"{count} Comments"},[k.param("count",r.truncateNumbers&&isNaN(this.props.countreduced)?this.props.countreduced:q),k['enum'](this.props.count===1?'Comment':'Comments',{Comment:'Comment',Comments:'Comments'})]);break;case 'reshare':if(this.props.contextArgs.reshareedu||r.showSlimUFI)q=k._({"Share":"{count} Share","Shares":"{count} Shares"},[k.param("count",r.truncateNumbers&&isNaN(this.props.countreduced)?this.props.countreduced:q),k['enum'](this.props.count===1?'Share':'Shares',{Share:'Share',Shares:'Shares'})]);break;}var s=h.createElement('span',{className:' '+"UFIBlingBoxText"+(r.showSlimUFI?' '+"UFIBlingBoxTextRevised":'')},q);if(!r.showSlimUFI){return (h.createElement('span',null,h.createElement('i',{className:o}),s));}else return s;}});f.exports=n;},null);
__d('UFIBlingBox.react',['React','UFIBlingItem.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.PropTypes,m=h.createClass({displayName:'UFIBlingBox',propTypes:{contextArgs:l.object.isRequired,'data-ft':l.string,'data-comment-prelude-ref':l.string,comments:l.number,commentsreduced:l.string,likes:l.number,likesreduced:l.string,nfb:l.number,onClick:l.func,permalink:l.string,reshares:l.number,resharesreduced:l.string},render:function(){var n=[],o='',p=this.props.contextArgs.ufiexperiments||{};if(this.props.likes){n.push(h.createElement(i,{className:n.length>0?' '+"mls":'',contextArgs:this.props.contextArgs,count:this.props.likes,countreduced:this.props.likesreduced,iconClassName:'UFIBlingBoxLikeIcon',itemKey:"like",key:"like"}));o+=this.props.likes==1?k._("1 like"):k._({"*":"{count} likes"},[k.param('count',this.props.likes,[0])]);o+=' ';}if(this.props.comments){n.push(h.createElement(i,{className:n.length>0?' '+"mls":'',contextArgs:this.props.contextArgs,count:this.props.comments,countreduced:this.props.commentsreduced,iconClassName:'UFIBlingBoxCommentIcon',itemKey:"comment",key:"comment"}));o+=this.props.comments==1?k._("1 comment"):k._({"*":"{count} comments"},[k.param('count',this.props.comments,[0])]);o+=' ';}if(this.props.reshares){n.push(h.createElement(i,{className:n.length>0?' '+"mls":'',contextArgs:this.props.contextArgs,count:this.props.reshares,countreduced:this.props.resharesreduced,iconClassName:'UFIBlingBoxReshareIcon',itemKey:"reshare",key:"reshare"}));o+=this.props.reshares==1?k._("1 share"):k._({"*":"{count} shares"},[k.param('count',this.props.reshares,[0])]);}var q=h.createElement('a',{className:' '+"UFIBlingBox"+(' '+"uiBlingBox")+(' '+"feedbackBling")+(p.showSlimUFI?' '+"UFIBlingBoxRevised":''),href:this.props.permalink,'data-ft':this.props['data-ft'],'data-comment-prelude-ref':this.props['data-comment-prelude-ref'],'aria-label':o,onClick:this.props.onClick,rel:'ignore'},n);return q;}});f.exports=m;},null);
__d('UFICentralUpdates',['Arbiter','BanzaiODS','ChannelConstants','LiveTimer','ShortProfiles','UFIConstants','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=Object.assign||function(z){for(var aa=1;aa<arguments.length;aa++){var ba=arguments[aa];for(var ca in ba)if(Object.prototype.hasOwnProperty.call(ba,ca))z[ca]=ba[ca];}return z;};i.setEntitySample('feedback',.0001);var p=0,q={},r={},s={},t={},u=[];h.subscribe(j.getArbiterType('live-data'),function(z,aa){if(aa&&aa.obj){var ba=aa.obj;i.bumpEntityKey('feedback','update_received');var ca=ba.comments||[];ca.forEach(function(da){da.timestamp.text=n._("a few seconds ago");});if(ca.length)i.bumpEntityKey('feedback','comment_received');y.handleUpdate(m.UFIPayloadSourceType.LIVE_SEND,ba);}});function v(){if(!p){var z=s,aa=q,ba=r,ca=t;s={};q={};r={};t={};if(Object.keys(z).length)x('feedback-id-changed',z);if(Object.keys(aa).length)x('feedback-updated',aa);if(Object.keys(ba).length)x('comments-updated',ba);if(Object.keys(ca).length)x('instance-updated',ca);u.pop();}}function w(){if(u.length){return u[u.length-1];}else return m.UFIPayloadSourceType.UNKNOWN;}function x(event,z){y.inform(event,{updates:z,payloadSource:w()});}var y=Object.assign(new h(),{handleUpdate:function(z,aa){if(Object.keys(aa).length)this.synchronizeInforms((function(){u.push(z);var ba=o({payloadsource:w()},aa);this.inform('update-feedback',ba);this.inform('update-comment-lists',ba);this.inform('update-comments',ba);this.inform('update-actions',ba);(aa.profiles||[]).forEach(function(ca){l.set(ca.id,ca);});if(aa.servertime)k.restart(aa.servertime);}).bind(this));},didUpdateFeedback:function(z){q[z]=true;v();},didUpdateComment:function(z){r[z]=true;v();},didUpdateFeedbackID:function(z,aa){s[z]=aa;v();},didUpdateInstanceState:function(z,aa){if(!t[z])t[z]={};t[z][aa]=true;v();},synchronizeInforms:function(z){p++;try{z();}catch(aa){throw aa;}finally{p--;v();}}});f.exports=y;},null);
__d('UFICommentLink.react',['Image.react','React','TrackingNodes','emptyFunction','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=i.PropTypes,o=i.createClass({displayName:'UFICommentLink',propTypes:{ufiExperiments:n.object,onClick:n.func,ajaxify:n.string,rel:n.string},getDefaultProps:function(){return {ufiExperiments:{},onClick:k};},render:function(){var p=this.props.ufiExperiments,q=l._("Comment"),r=l._("Leave a comment"),s='{ "tn": "'+j.encodeTN(j.types.COMMENT_LINK)+'", "type": 24 }',t=null;if(p.showSlimUFI)t=i.createElement(h,{className:"UFICommentLinkIcon",src:m('/images/ufi/fbfeed/comment_gray.png')});return (i.createElement('a',{className:"comment_link",href:"#",role:"button",title:r,ajaxify:this.props.ajaxify,rel:this.props.rel,onClick:this.props.onClick,'data-ft':s},t,q));}});f.exports=o;},null);
__d('UFICollapse',['Arbiter'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i='ufi/collapse';function j(m){return i+'/'+m;}function k(m,n){h.inform(j(m),n);}var l={show:function(m){k(m,{action:'show'});},hide:function(m){k(m,{action:'hide'});},toggle:function(m){k(m,{action:'toggle'});},subscribe:function(m,n){return h.subscribe(j(m),function(o,p){return n(p);});}};f.exports=l;},null);
__d('ClientIDs',['randomInt'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={},j={getNewClientID:function(){var k=Date.now(),l=k+':'+(h(0,4294967295)+1);i[l]=true;return l;},isExistingClientID:function(k){return !!i[k];}};f.exports=j;},null);
__d('UFIFeedbackTargets',['ClientIDs','KeyedCallbackManager','UFICentralUpdates','UFIConstants'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=Object.assign||function(x){for(var y=1;y<arguments.length;y++){var z=arguments[y];for(var aa in z)if(Object.prototype.hasOwnProperty.call(z,aa))x[aa]=z[aa];}return x;},m=new i();function n(x){var y={};x.forEach(function(z){var aa=l({},z);delete aa.commentlist;delete aa.commentcount;y[z.entidentifier]=aa;j.didUpdateFeedback(z.entidentifier);});m.addResourcesAndExecute(y);}function o(x){for(var y=0;y<x.length;y++){var z=x[y];switch(z.actiontype){case k.UFIActionType.LIKE_ACTION:q(z);break;case k.UFIActionType.SUBSCRIBE_ACTION:r(z);break;case k.UFIActionType.DISABLE_COMMENTS:s(z);break;case k.UFIActionType.REACTION:t(z);break;}}}function p(x){for(var y=0;y<x.length;y++){var z=x[y];if(z.orig_ftentidentifier)v(z.orig_ftentidentifier,z.ftentidentifier);}}function q(x){var y=u(x);if(y){x.hasviewerliked=!!x.hasviewerliked;if(x.clientid&&h.isExistingClientID(x.clientid)&&x.hasviewerliked!=y.hasviewerliked)return;y.likecount=x.likecount||0;y.likesentences=x.likesentences;if(x.actorid==y.actorforpost){y.hasviewerliked=x.hasviewerliked;}else if(x.hasviewerliked!=y.hasviewerliked){y.likesentences={current:x.likesentences.alternate,alternate:x.likesentences.current};if(y.hasviewerliked){y.likecount++;}else y.likecount--;}if(x.actorid!=y.actorforpost)y.likesentences.isunseen=true;n([y]);}}function r(x){var y=u(x);if(y){x.hasviewersubscribed=!!x.hasviewersubscribed;if(x.clientid&&h.isExistingClientID(x.clientid)&&x.hasviewersubscribed!=y.hasviewersubscribed)return;if(x.actorid==y.actorforpost)y.hasviewersubscribed=x.hasviewersubscribed;n([y]);}}function s(x){var y=u(x);if(y){y.cancomment=!!x.cancomment;n([y]);}}function t(x){var y=u(x);if(y){if(x.clientid&&h.isExistingClientID(x.clientid)&&x.viewerreaction!==y.viewerreaction)return;if(y.actorforpost==x.actorid||y.viewerreaction==x.viewerreaction){var z=parseInt(x.viewerreaction,10)!==0;if(y.hasviewerliked!==z){var aa=z?1:-1,ba={current:y.likesentences.alternate,alternate:y.likesentences.current};y.likecount=Math.max((y.likecount||0)+aa,0);y.likesentences=ba;y.hasviewerliked=z;}y.reactioncount=x.reactioncount;y.reactioncountmap=x.reactioncountmap;y.reactioncountreduced=x.reactioncountreduced;y.reactorids=x.reactorids;y.userreactions=x.userreactions;y.viewerreaction=x.viewerreaction;}n([y]);}}function u(x){if(x.orig_entidentifier)v(x.orig_entidentifier,x.entidentifier);return m.getResource(x.entidentifier);}function v(x,y){var z=m.getResource(x);if(z){m.setResource(x,null);z.entidentifier=y;m.setResource(y,z);j.didUpdateFeedbackID(x,y);}}var w={getFeedbackTarget:function(x,y){var z=m.executeOrEnqueue(x,y),aa=m.getUnavailableResources(z);aa.length;return z;},getActorIDForFeedbackTargetIfExists:function(x){var y=m.getResource(x);return y?y.actorforpost:null;},handleNFB:function(x,y){var z=m.getResource(x);if(z){z.nfbcount=y||0;n([z]);}},unsubscribe:function(x){m.unsubscribe(x);}};j.subscribe('update-feedback',function(x,y){var z=y.feedbacktargets;if(z&&z.length)n(z);});j.subscribe('update-actions',function(x,y){if(y.actions&&y.actions.length)o(y.actions);});j.subscribe('update-comments',function(x,y){if(y.comments&&y.comments.length)p(y.comments);});f.exports=w;},null);
__d('UFIInstanceState',['UFICentralUpdates'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={};function j(l){if(!i[l])i[l]={};}var k={getKeyForInstance:function(l,m){j(l);return i[l][m];},updateState:function(l,m,n){j(l);i[l][m]=n;h.didUpdateInstanceState(l,m);},updateStateField:function(l,m,n,o){var p=this.getKeyForInstance(l,m)||{};p[n]=o;this.updateState(l,m,p);}};f.exports=k;},null);
__d('UFILikeLink.react',['React','Image.react','TrackingNodes','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=h.PropTypes,o=h.createClass({displayName:'UFILikeLink',propTypes:{likeAction:n.bool,ufiExperiments:n.object,onClick:n.func},getDefaultProps:function(){return {ufiExperiments:{}};},onClick:function(p,q){p.preventDefault();this.props.onClick(p,q);},render:function(){var p=this.props.ufiExperiments,q=this.props.likeAction||p.showSlimUFI?l._("Like"):l._("Unlike"),r=j.getTrackingInfo(this.props.likeAction?j.types.LIKE_LINK:j.types.UNLIKE_LINK),s=this.props.likeAction?l._("Like this"):l._("Unlike this"),t=null;if(p.showSlimUFI)t=h.createElement(i,{className:"UFILikeLinkIcon",src:this.props.likeAction?m('/images/ufi/fbfeed/like_gray.png'):m('/images/ufi/fbfeed/liked.png')});return (h.createElement('a',{className:' '+"UFILikeLink"+(p.showSlimUFI&&!this.props.likeAction?' '+"UFILinkBright":''),href:"#",role:"button",'aria-label':s,'aria-live':"polite",onBlur:this.props.onBlur,onClick:this.onClick,onFocus:this.props.onFocus,onMouseDown:this.props.onMouseDown,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,onMouseUp:this.props.onMouseUp,'data-ft':r},t,q));}});f.exports=o;},null);
__d('ReactTransitionEvents',['ExecutionEnvironment'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();'use strict';var i={transitionend:{transition:'transitionend',WebkitTransition:'webkitTransitionEnd',MozTransition:'mozTransitionEnd',OTransition:'oTransitionEnd',msTransition:'MSTransitionEnd'},animationend:{animation:'animationend',WebkitAnimation:'webkitAnimationEnd',MozAnimation:'mozAnimationEnd',OAnimation:'oAnimationEnd',msAnimation:'MSAnimationEnd'}},j=[];function k(){var o=document.createElement('div'),p=o.style;if(!('AnimationEvent' in window))delete i.animationend.animation;if(!('TransitionEvent' in window))delete i.transitionend.transition;for(var q in i){var r=i[q];for(var s in r)if(s in p){j.push(r[s]);break;}}}if(h.canUseDOM)k();function l(o,p,q){o.addEventListener(p,q,false);}function m(o,p,q){o.removeEventListener(p,q,false);}var n={addEndEventListener:function(o,p){if(j.length===0){window.setTimeout(p,0);return;}j.forEach(function(q){l(o,q,p);});},removeEndEventListener:function(o,p){if(j.length===0)return;j.forEach(function(q){m(o,q,p);});}};f.exports=n;},null);
__d('UFICommentList',['ClientIDs','KeyedCallbackManager','UFICentralUpdates','UFIConstants','UFIFeedbackTargets','keyMirror'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();'use strict';var n=m({actorID:true});function o(p){this.count=0;this.deletedComments={};this.deletedCount=0;this.dataSource=new i();this.feedbackTargetID=p;this.lastRequestedOffset=0;this.lastRequestedLength=0;this.basePermalink="";this.commentPermalinks={};l.getFeedbackTarget(this.feedbackTargetID,(function(q){this.actorID=q.actorforpost;this.basePermalink=q.permalink;}).bind(this));}o.prototype.addOrUpdateComment=function(p){if(p.islocal){this.$UFICommentList1(p.id);}else this.$UFICommentList2(p.id,p.clientid,p.legacyid);j.didUpdateFeedback(this.feedbackTargetID);};o.prototype.$UFICommentList1=function(p){this.dataSource.setResource(this.count,p);this.count++;};o.prototype.$UFICommentList2=function(p,q,r){var s=q&&h.isExistingClientID(q),t=this.dataSource.getAllResources(),u={};for(var v in t){var w=t[v];u[w]=v;}if(s&&q in u){u[p]=u[q];var x=u[q];this.dataSource.setResource(x,p);}else if(!u[p]&&q)this.$UFICommentList1(p);if(r&&p in u)this.commentPermalinks[p]=this.buildCommentPermalink(p,r,u[p]);};o.prototype.addCommentIDs=function(p,q,r){var s={};for(var t=0;t<q;t++)s[p+t]=r[t]||k.unavailableCommentKey;this.dataSource.addResourcesAndExecute(s);j.didUpdateFeedback(this.feedbackTargetID);return this;};o.prototype.getComments=function(p,q,r,s){var t=[];for(var u=0;u<q;u++)t.push(p+u);var v=this.dataSource.getUnavailableResourcesFromRequest(t);if(v.length){var w=Math.min.apply(Math,v),x=Math.max.apply(Math,v),y=w,z=x-w+1;if(y<this.lastRequestedOffset||y+z>this.lastRequestedOffset+this.lastRequestedLength){this.lastRequestedOffset=y;this.lastRequestedLength=z;this.fetchComments(y,z,r);}}else this.dataSource.executeOrEnqueue(t,this.deferredCallback.bind(this,p,q,s));};o.prototype.fetchComments=function(p,q,r){};o.prototype.deferredCallback=function(p,q,r,s){};o.prototype.reset=function(){var p=this.dataSource.getAllResources();this.dataSource.reset();this.count=0;this.deletedCount=0;this.deletedComments={};this.lastRequestedOffset=0;this.lastRequestedLength=0;return p;};o.prototype.deleteComment=function(p){if(!(p in this.deletedComments)){this.deletedComments[p]=true;this.deletedCount++;}};o.prototype.updateCommentCount=function(p){this.count=p;this.deletedCount=0;return this;};o.prototype.getFeedbackTargetID=function(){return this.feedbackTargetID;};o.prototype.getCommentCount=function(){return this.count;};o.prototype.getDeletedCount=function(){return this.deletedCount;};o.prototype.getDisplayedCommentCount=function(){return this.count-this.deletedCount;};o.prototype.getBasePermalink=function(){return this.basePermalink;};o.prototype.buildCommentPermalink=function(p,q,r){};o.prototype.getPermalinkForComment=function(p){return this.commentPermalinks[p];};o.isValidContextPropertyForReset=function(p){return p in n;};f.exports=o;},null);
__d('UFICommentOrdering',['UFIConstants'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();'use strict';var i={inverted:function(j){switch(j){case h.UFICommentOrderingMode.RECENT_ACTIVITY:case h.UFICommentOrderingMode.RANKED_THREADED:case h.UFICommentOrderingMode.FILTERED:case h.UFICommentOrderingMode.LIVE_STREAMING:return true;}return false;}};f.exports=i;},null);
__d('UFIComments',['ClientIDs','ImmutableObject','UFICentralUpdates','UFIConstants','UFIInstanceState','invariant','randomInt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();'use strict';var o=Object.assign||function(ga){for(var ha=1;ha<arguments.length;ha++){var ia=arguments[ha];for(var ja in ia)if(Object.prototype.hasOwnProperty.call(ia,ja))ga[ja]=ia[ja];}return ga;},p={},q={};function r(ga){return ga in q?q[ga]:ga;}function s(ga,ha){ga.forEach(function(ia){var ja=ia.ftentidentifier,ka=k.UFIPayloadSourceType,la=ia.clientid,ma=false,na=o({},ia);if(la){delete na.clientid;ma=h.isExistingClientID(la);if(ma&&q[la])return;}if(ha===ka.LIVE_SEND||ha===ka.USER_ACTION||ha===ka.ENDPOINT_ADD_COMMENT||ha===ka.ENDPOINT_EDIT_COMMENT)na.isunseen=true;if(ha===ka.ENDPOINT_COMMENT_FETCH||ha===ka.ENDPOINT_ID_COMMENT_FETCH)na.fromfetch=true;if(ma){if(p[la].ufiinstanceid)l.updateStateField(p[la].ufiinstanceid,'locallycomposed',ia.id,true);na.ufiinstanceid=p[la].ufiinstanceid;q[la]=ia.id;p[ia.id]=p[la];delete p[la];j.didUpdateComment(la);}fa.setComment(ia.id,new i(na));j.didUpdateComment(ia.id);j.didUpdateFeedback(ja);});}function t(ga){for(var ha=0;ha<ga.length;ha++){var ia=ga[ha];switch(ia.actiontype){case k.UFIActionType.LIKE_ACTION:if(fa.getComment(ia.entidentifier))u(ia.clientid,ia.entidentifier,ia.hasviewerliked,ia.likecount);break;case k.UFIActionType.COMMENT_LIKE:u(ia.clientid,ia.commentid,ia.viewerliked,ia.likecount);break;case k.UFIActionType.DELETE_COMMENT:y(ia);break;case k.UFIActionType.LIVE_DELETE_COMMENT:z(ia);break;case k.UFIActionType.REMOVE_PREVIEW:aa(ia);break;case k.UFIActionType.COMMENT_SET_SPAM:ba(ia);break;case k.UFIActionType.CONFIRM_COMMENT_REMOVAL:ca(ia);break;case k.UFIActionType.TRANSLATE_COMMENT:w(ia);break;case k.UFIActionType.COMMENT_LIKECOUNT_UPDATE:v(ia);break;}}}function u(ga,ha,ia,ja){var ka=fa.getComment(ha);if(ka){var la={},ma=ga&&h.isExistingClientID(ga);if(!ma){la.hasviewerliked=ia;la.likecount=ja;}la.likeconfirmhash=n(0,1024);ea(ha,la);}}function v(ga){var ha=fa.getComment(ga.commentid);if(ha&&ga.hasviewerliked===ha.hasviewerliked){var ia={likecount:ga.likecount,likeconfirmhash:n(0,1024)};ea(ga.commentid,ia);}}function w(ga){var ha=ga.commentid,ia=fa.getComment(ha);if(ia){var ja={translatedbody:ga.translatedbody,translatorapp:ga.translatorapp};ea(ha,ja);}}function x(ga){var ha={reportLink:ga.reportLink,commenterIsFOF:ga.commenterIsFOF,userIsMinor:ga.userIsMinor,giveFeedbackLink:ga.giveFeedbackLink};return ha;}function y(ga){var ha=fa.getComment(ga.commentid);da(ha,k.UFIStatus.DELETED);}function z(ga){var ha=fa.getComment(ga.commentid);if(ha&&ha.status!==k.UFIStatus.DELETED)da(ha,k.UFIStatus.LIVE_DELETED);}function aa(ga){ea(ga.commentid,{attachment:null});}function ba(ga){var ha=fa.getComment(ga.commentid),ia=ga.shouldHideAsSpam?k.UFIStatus.SPAM_DISPLAY:null;da(ha,ia);}function ca(ga){ea(ga.commentid,x(ga));}function da(ga,ha){ea(ga.id,{priorstatus:ga.status,status:ha});}function ea(ga,ha){var ia=fa.getComment(ga)||new i({});fa.setComment(ga,i.set(ia,ha));j.didUpdateComment(ia.id);j.didUpdateFeedback(ia.ftentidentifier);}var fa={getComment:function(ga){if(ga===k.unavailableCommentKey)return null;return p[r(ga)];},setComment:function(ga,ha){!(ha instanceof i)?m(0):undefined;p[r(ga)]=ha;},resetComments:function(ga){for(var ha in ga)delete p[r(ha)];}};j.subscribe('update-comments',function(ga,ha){if(ha.comments&&ha.comments.length)s(ha.comments,ha.payloadsource);});j.subscribe('update-actions',function(ga,ha){if(ha.actions&&ha.actions.length)t(ha.actions);});f.exports=fa;},null);
__d('UFIReplyCommentList',['ActorURI','JSLogger','MercuryServerDispatcher','UFICentralUpdates','UFICommentList','UFIComments','UFIConstants','URI'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p,q;'use strict';var r={},s=i.create('ufi_reply_comment_list');p=l;q=p&&p.prototype;Object.assign(t,p);t.prototype=Object.create(p.prototype);t.prototype.constructor=t;t.__superConstructor__=p;t.getCommentList=function(v,w){if(!r[w])r[w]=new t(v,w);return r[w];};t.resetWithContext=function(v,w,x){var y=r[w];if(!y)return;y.reset();for(var z in x)if(this.isValidContextPropertyForReset(z))y[z]=x[z];};function t(v,w){q.constructor.call(this,v);this.parentCommentID=w;}t.prototype.fetchComments=function(v,w,x){var y={ft_ent_identifier:this.feedbackTargetID,parent_comment_ids:[this.parentCommentID],source:null,offsets:[v],lengths:[w],feed_context:x?x.feedContext:null};if(!x||!x.viewAs)y[h.PARAMETER_ACTOR]=this.actorID;j.trySend('/ajax/ufi/reply_fetch.php',y);};t.prototype.deferredCallback=function(v,w,x,y){var z={};for(var aa=0;aa<w;aa++){var ba=m.getComment(y[v+aa]);if(ba)z[v+aa]=ba;}x(z);};t.prototype.reset=function(){var v=q.reset.call(this),w={};for(var x in v){var y=v[x];w[y]=true;}m.resetComments(w);};t.prototype.getParentCommentID=function(){return this.parentCommentID;};t.prototype.buildCommentPermalink=function(v,w,x){if(!this.basePermalink)return null;var y=this.getParentCommentID().split("_"),z=w;if(y.length===2){z=y[1];}else s.error("Bad reply comment ID: "+this.getParentCommentID());return (new o(this.basePermalink).addQueryData({comment_id:z,reply_comment_id:w,total_comments:this.count}).toString());};j.registerEndpoints({'/ajax/ufi/reply_fetch.php':{mode:j.IMMEDIATE}});function u(v){var w=m.getComment(v.commentid),x=w.id,y=w.ftentidentifier,z=w.parentcommentid;if(!z)return;if(w.status!==n.UFIStatus.DELETED&&w.status!==n.UFIStatus.FAILED_ADD)t.getCommentList(y,z).deleteComment(x);}k.subscribe('update-actions',function(v,w){if(w.actions&&w.actions.length)for(var x=0;x<w.actions.length;x++){var y=w.actions[x];switch(y.actiontype){case n.UFIActionType.DELETE_COMMENT:u(y);break;}}});k.subscribe('update-comment-lists',function(v,w){var x=w.commentlists;if(x&&x.replies&&Object.keys(x).length)for(var y in x.replies){var z=x.replies[y],aa=z.ftentidentifier;t.getCommentList(aa,y).addCommentIDs(z.range.offset,z.range.length,z.values).updateCommentCount(z.count);}});k.subscribe('update-comments',function(v,w){if(w.comments&&w.comments.length)w.comments.forEach(function(x){var y=x.entidentifier,z=x.parentcommentid;if(!z)return;t.getCommentList(y,z).addOrUpdateComment(x);});});f.exports=t;},null);
__d('UFIToplevelCommentList',['ActorURI','MercuryServerDispatcher','UFICentralUpdates','UFICommentList','UFICommentOrdering','UFIComments','UFIConstants','UFIReplyCommentList','URI'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q,r;'use strict';var s={};q=k;r=q&&q.prototype;Object.assign(t,q);t.prototype=Object.create(q.prototype);t.prototype.constructor=t;t.__superConstructor__=q;t.getCommentList=function(v,w){if(!s[v])s[v]={};if(!s[v][w]){var x=new t(v,w),y=t.getCommentListsForFeedbackTargetID(v);if(y.length)x.updateCommentCount(y[0].getCommentCount());s[v][w]=x;}return s[v][w];};t.getCommentListsForFeedbackTargetID=function(v){var w=[],x=s[v]||{};for(var y in x)w.push(x[y]);return w;};t.getCommentListForFeedbackTargetID_UNSAFE=function(v){var w=t.getCommentListsForFeedbackTargetID(v);return w.length?w[0]:null;};t.resetCommentListsForFeedbackTargetID=function(v){if(!s[v])return;var w={};for(var x in s[v]){var y=s[v][x],z=y.reset();for(var aa in z){var ba=z[aa];w[ba]=true;}}m.resetComments(w);};t.resetCommentListsWithContext=function(v,w){if(!s[v])return;var x={};for(var y in s[v]){var z=s[v][y];for(var aa in w)if(this.isValidContextPropertyForReset(aa))z[aa]=w[aa];var ba=z.reset();for(var ca in ba){var da=ba[ca];x[da]=true;o.resetWithContext(v,da,w);}}m.resetComments(x);};function t(v,w){r.constructor.call(this,v);this.orderReversed=false;if(l.inverted(w))this.orderReversed=true;this.orderingMode=w;this.forceNotPageable=false;}t.prototype.fetchComments=function(v,w,x){var y={ft_ent_identifier:this.feedbackTargetID,viewas:x&&x.viewAs?x.viewAs+'':null,source:null,offset:v,length:w,orderingmode:this.orderingMode,feed_context:x?x.feedContext:null};if(!x||!x.viewAs)y[h.PARAMETER_ACTOR]=this.actorID;i.trySend('/ajax/ufi/comment_fetch.php',y);};t.prototype.deferredCallback=function(v,w,x,y){var z={},aa=v,ba=v+w-1;for(var ca=0;ca<w;ca++){var da=this.orderReversed?ba-ca:aa+ca,ea=m.getComment(y[da]);if(ea)z[v+ca]=ea;}x(z);};t.prototype.getOrderingMode=function(){return this.orderingMode;};t.prototype.setForceNotPageable=function(v){this.forceNotPageable=v;return this;};t.prototype.getForceNotPageable=function(){return this.forceNotPageable;};t.prototype.buildCommentPermalink=function(v,w,x){if(!this.basePermalink)return null;var y=Math.floor((this.count-x-1)/n.defaultPageSize)*n.defaultPageSize;return (new p(this.basePermalink).addQueryData({comment_id:w,offset:y,total_comments:this.count}).toString());};i.registerEndpoints({'/ajax/ufi/comment_fetch.php':{mode:i.IMMEDIATE}});function u(v){var w=m.getComment(v.commentid),x=w.id,y=w.ftentidentifier,z=w.parentcommentid;if(z)return;if(v.islocal||w.status!==n.UFIStatus.DELETED&&w.status!==n.UFIStatus.FAILED_ADD)t.getCommentListsForFeedbackTargetID(y).forEach(function(aa){aa.deleteComment(x);});}j.subscribe('update-actions',function(v,w){if(w.actions&&w.actions.length)for(var x=0;x<w.actions.length;x++){var y=w.actions[x];switch(y.actiontype){case n.UFIActionType.DELETE_COMMENT:u(y);break;}}});j.subscribe('update-comment-lists',function(v,w){var x=w.commentlists;if(x&&x.comments&&Object.keys(x).length)for(var y in x.comments)for(var z in x.comments[y]){var aa=x.comments[y][z],ba=aa.forcenotpageable===true;t.getCommentList(y,z).addCommentIDs(aa.range.offset,aa.range.length,aa.values).setForceNotPageable(ba);}});j.subscribe('update-comments',function(v,w){if(w.comments&&w.comments.length)w.comments.forEach(function(x){if(x.parentcommentid)return;var y=x.ftentidentifier;t.getCommentListsForFeedbackTargetID(y).forEach(function(z){z.addOrUpdateComment(x);});});});j.subscribe('update-feedback',function(v,w){if(w.feedbacktargets&&w.feedbacktargets.length)w.feedbacktargets.forEach(function(x){var y=x.entidentifier,z=x.defaultcommentorderingmode,aa={};if(z)aa[z]=true;if(x.orderingmodes)x.orderingmodes.forEach(function(ca){aa[ca.value]=true;});for(var ba in aa)t.getCommentList(y,ba).updateCommentCount(x.commentcount);});});f.exports=t;},null);
__d("XUFITypingIndicatorController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/typing\/{feedback_id}\/{update}\/",{feedback_id:{type:"String",required:true},update:{type:"Enum",required:true,enumType:1}});},null,{});
__d("XUFIAddCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/add\/comment\/",{});},null,{});
__d("XUFIDeleteCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/delete\/comment\/",{});},null,{});
__d("XUFICommentLikeController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/comment\/like\/",{});},null,{});
__d("XUFIHideCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/hide\/comment\/",{});},null,{});
__d("XUFILikeController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/like\/",{});},null,{});
__d("XUFIEditCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/edit\/comment\/",{});},null,{});
__d("XUFITranslateCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/translate\/comment\/",{});},null,{});
__d("XUFIActorChangeController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/actor\/change\/",{});},null,{});
__d("XUFIReactionController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/reaction\/",{});},null,{});
__d('UFIUserActions',['ActorURI','AsyncRequest','AsyncResponse','requireWeak','ClientIDs','ImmutableObject','Nectar','UFICentralUpdates','UFIToplevelCommentList','UFIComments','UFIConstants','UFIFeedbackTargets','MercuryServerDispatcher','XUFITypingIndicatorController','XUFIAddCommentController','XUFIDeleteCommentController','XUFICommentLikeController','XUFIHideCommentController','XUFILikeController','XUFIEditCommentController','XUFITranslateCommentController','XUFIActorChangeController','XUFIReactionController','collectDataAttributes','errorCode','fbt','UnicodeBidi'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha){if(c.__markCompiled)c.__markCompiled();var ia=Object.assign||function(jb){for(var kb=1;kb<arguments.length;kb++){var lb=arguments[kb];for(var mb in lb)if(Object.prototype.hasOwnProperty.call(lb,mb))jb[mb]=lb[mb];}return jb;},ja;k('CLoggerX',function(jb){ja=jb;});var ka={BAN:'ban',UNDO_BAN:'undo_ban'},la={changeActor:function(jb,kb){s.getFeedbackTarget(jb,function(lb){p.resetCommentListsWithContext(jb,{actorID:kb});o.inform('actor-changed',null);var mb={from_actor_id:lb.actorforpost,ft_ent_identifier:jb};mb[h.PARAMETER_ACTOR]=kb;var nb=ca.getURIBuilder().getURI();t.trySend(nb,mb);});},changeCommentLike:function(jb,kb,lb){var mb=q.getComment(jb);if(mb.hasviewerliked!=kb){var nb=ma(lb.target),ob=kb?1:-1,pb={commentid:jb,actiontype:r.UFIActionType.COMMENT_LIKE,viewerliked:kb,likecount:(mb.likecount||0)+ob};o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{actions:[pb]});s.getFeedbackTarget(mb.ftentidentifier,function(qb){var rb={};rb[h.PARAMETER_ACTOR]=qb.actorforpost;var sb=x.getURIBuilder().getURI();t.trySend(sb,ia({comment_id:jb,legacy_id:mb.legacyid,like_action:kb,ft_ent_identifier:mb.ftentidentifier,source:lb.source,client_id:l.getNewClientID()},nb,rb));});}},addComment:function(jb,kb,lb,mb){s.getFeedbackTarget(jb,function(nb){var ob=ma(mb.target),pb=l.getNewClientID();if(!nb.actorforpost)return;var qb=ha.isDirectionLTR(kb)?'ltr':'rtl',rb={ftentidentifier:jb,body:{text:kb,dir:qb},author:nb.actorforpost,id:pb,islocal:true,ufiinstanceid:mb.ufiinstanceid,likecount:0,hasviewerliked:false,parentcommentid:mb.replyid,replycommentparentid:mb.replycommentparentid,attachment:mb.attachedsticker,photo_comment:mb.attachedphoto,timestamp:{time:Math.floor(Date.now()/1000),text:ga._("a few seconds ago")}},sb={actiontype:r.UFIActionType.SUBSCRIBE_ACTION,actorid:nb.actorforpost,hasviewersubscribed:true,entidentifier:jb},tb={actiontype:r.UFIActionType.ADD_COMMENT_ACTION,feedbackfbid:nb.targetfbid};o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{comments:[rb],actions:[sb,tb]});var ub=null;if(mb.replyid)ub=q.getComment(mb.replyid).fbid;var vb;if(ja)vb=ja.getCLParamsForTarget(mb.target,ub);var wb={};wb[h.PARAMETER_ACTOR]=nb.actorforpost;var xb=v.getURIBuilder().getURI();t.trySend(xb,ia({ft_ent_identifier:nb.entidentifier,comment_text:lb,source:mb.source,client_id:pb,reply_fbid:ub,parent_comment_id:mb.replyid,reply_comment_parent_id:mb.replycommentparentid,rootid:mb.rootid,clp:vb,attached_sticker_fbid:mb.attachedsticker?mb.attachedsticker.fbid:0,attached_photo_fbid:mb.attachedphoto?mb.attachedphoto.fbid:0,feed_context:mb.feedcontext},ob,wb));});},_hasCommentTextChanged:function(jb,kb){return jb.body&&jb.body.text!=kb;},_hasCommentPhotoChanged:function(jb,kb){return (jb||kb)&&!(jb&&kb)||jb&&kb&&jb.fbid!=kb.fbid;},_hasCommentStickerChanged:function(jb,kb){return (jb||kb)&&!(jb&&kb)||jb&&jb.type=="sticker"&&kb&&jb.fbid!=kb.fbid;},editComment:function(jb,kb,lb,mb){var nb=ma(mb.target),ob=q.getComment(jb),pb=this._hasCommentTextChanged(ob,kb)||this._hasCommentPhotoChanged(ob.photo_comment,mb.attachedPhoto)||this._hasCommentStickerChanged(ob.attachment,mb.attachedSticker);ob=m.set(ob,{status:r.UFIStatus.PENDING_EDIT,body:{text:kb},editnux:null,attachment:mb.attachedSticker,photo_comment:mb.attachedPhoto});if(pb)ob=m.set(ob,{originalTimestamp:ob.timestamp.time,timestamp:{time:Math.floor(Date.now()/1000),text:ga._("a few seconds ago")}});o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{comments:[ob]});s.getFeedbackTarget(ob.ftentidentifier,function(qb){var rb={};rb[h.PARAMETER_ACTOR]=qb.actorforpost;var sb=aa.getURIBuilder().getURI();t.trySend(sb,ia({ft_ent_identifier:ob.ftentidentifier,comment_text:lb,source:mb.source,comment_id:ob.id,parent_comment_id:ob.parentcommentid,attached_sticker_fbid:mb.attachedSticker?mb.attachedSticker.fbid:0,attached_photo_fbid:mb.attachedPhoto?mb.attachedPhoto.fbid:0},nb,rb));});},translateComment:function(jb,kb){var lb=ba.getURIBuilder().getURI();t.trySend(lb,{ft_ent_identifier:jb.ftentidentifier,comment_ids:[jb.id],source:kb.source});},setHideAsSpam:function(jb,kb,lb){var mb=ma(lb.target),nb=q.getComment(jb),ob={commentid:jb,actiontype:r.UFIActionType.COMMENT_SET_SPAM,shouldHideAsSpam:kb};o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{actions:[ob]});var pb=y.getURIBuilder().getURI();t.trySend(pb,ia({comment_id:jb,spam_action:kb,ft_ent_identifier:nb.ftentidentifier,source:lb.source},mb));},removeComment:function(jb,kb){var lb=ma(kb.target),mb=q.getComment(jb),nb={actiontype:r.UFIActionType.DELETE_COMMENT,commentid:jb,islocal:true,oneclick:kb.oneclick};o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{actions:[nb]});s.getFeedbackTarget(mb.ftentidentifier,function(ob){var pb={};pb[h.PARAMETER_ACTOR]=ob.actorforpost;var qb=w.getURIBuilder().getURI();t.trySend(qb,ia({comment_id:mb.id,comment_legacyid:mb.legacyid,ft_ent_identifier:mb.ftentidentifier,one_click:kb.oneclick,source:kb.source,client_id:l.getNewClientID()},lb,pb));});},banUser:function(jb,kb,lb,mb){var nb=lb?ka.BAN:ka.UNDO_BAN;t.trySend('/ajax/ufi/ban_user.php',{page_id:kb,commenter_id:jb.author,action:nb,comment_id:jb.id,client_side:true});},changeLike:function(jb,kb,lb){s.getFeedbackTarget(jb,function(mb){var nb=ma(lb.target);if(mb.hasviewerliked!==kb){var ob=kb?1:-1,pb={actiontype:r.UFIActionType.LIKE_ACTION,actorid:mb.actorforpost,hasviewerliked:kb,likecount:(mb.likecount||0)+ob,entidentifier:jb,likesentences:{current:mb.likesentences.alternate,alternate:mb.likesentences.current}},qb=ib(mb,kb?r.LikeReaction:0);o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{actions:[pb,qb]});var rb={},sb=z.getURIBuilder().getURI();rb[h.PARAMETER_ACTOR]=mb.actorforpost;t.trySend(sb,ia({like_action:kb,ft_ent_identifier:jb,source:lb.source,client_id:l.getNewClientID(),rootid:lb.rootid},nb,rb));}});},changeReaction:function(jb,kb,lb){s.getFeedbackTarget(jb,function(mb){o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{actions:[ib(mb,kb)]});var nb=ma(lb),ob={};ob[h.PARAMETER_ACTOR]=mb.actorforpost;t.trySend(da.getURIBuilder().getURI(),ia({client_id:l.getNewClientID(),ft_ent_identifier:jb,reaction_type:kb},ob,nb));});},changeSubscribe:function(jb,kb,lb){s.getFeedbackTarget(jb,function(mb){var nb=ma(lb.target);if(mb.hasviewersubscribed!==kb){var ob={actiontype:r.UFIActionType.SUBSCRIBE_ACTION,actorid:mb.actorforpost,hasviewersubscribed:kb,entidentifier:jb};o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{actions:[ob]});var pb={};pb[h.PARAMETER_ACTOR]=mb.actorforpost;t.trySend('/ajax/ufi/subscribe.php',ia({subscribe_action:kb,ft_ent_identifier:jb,source:lb.source,client_id:l.getNewClientID(),rootid:lb.rootid,comment_expand_mode:lb.commentexpandmode},nb,pb));}});},fetchSpamComments:function(jb,kb,lb,mb){t.trySend('/ajax/ufi/id_comment_fetch.php',{ft_ent_identifier:jb,viewas:mb,comment_ids:kb,parent_comment_id:lb,source:null});},removePreview:function(jb,kb){var lb=ma(kb.target),mb={commentid:jb.id,actiontype:r.UFIActionType.REMOVE_PREVIEW};o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{actions:[mb]});t.trySend('/ajax/ufi/remove_preview.php',ia({comment_id:jb.id,ft_ent_identifier:jb.ftentidentifier,source:kb.source},lb));},typingChange:function(jb,kb){new i(u.getURIBuilder().setString('feedback_id',jb).setEnum('update',kb?'start':'stop').getURI()).send();}};function ma(jb){if(!jb)return {ft:{}};var kb={ft:ea(jb,['ft']).ft};n.addModuleData(kb,jb);return kb;}function na(jb){j.defaultErrorHandler(jb);}function oa(jb){var kb=jb.request.data;j.defaultErrorHandler(jb);var lb=kb.client_id||kb.comment_id,mb=q.getComment(lb),nb=mb.status===r.UFIStatus.PENDING_EDIT?r.UFIStatus.FAILED_EDIT:r.UFIStatus.FAILED_ADD;mb=m.setDeep(mb,{status:nb,allowRetry:pa(jb),body:{mentionstext:kb.comment_text,mentionsphoto:mb.photo_comment}});o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{comments:[mb]});}function pa(jb){var kb=jb.getError();if(jb.isBlockedAction())return false;if(jb.silentError)return true;if(kb===1357012||kb===1357006)return false;return true;}function qa(jb){var kb=jb.request.data,lb=kb.comment_id,mb=q.getComment(lb);mb=m.set(mb,{status:mb.priorstatus||null,priorstatus:undefined});o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{comments:[mb]});}function ra(jb){var kb=jb.request.data,lb=kb.comment_id,mb=q.getComment(lb);if(kb.like_action===mb.hasviewerliked){var nb=mb.hasviewerliked?-1:1,ob={commentid:lb,actiontype:r.UFIActionType.COMMENT_LIKE,viewerliked:!mb.hasviewerliked,likecount:(mb.likecount||0)+nb};o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{actions:[ob]});}j.defaultErrorHandler(jb);}function sa(jb){var kb=jb.request.data,lb=kb.ft_ent_identifier;s.getFeedbackTarget(lb,function(mb){if(mb.hasviewerliked===kb.like_action){var nb=mb.hasviewerliked?-1:1,ob={actiontype:r.UFIActionType.LIKE_ACTION,actorid:mb.actorforpost,hasviewerliked:!mb.hasviewerliked,likecount:(mb.likecount||0)+nb,entidentifier:lb,likesentences:{current:mb.likesentences.alternate,alternate:mb.likesentences.current}};o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{actions:[ob]});}});j.defaultErrorHandler(jb);}function ta(jb){var kb=jb.request.data,lb=kb.ft_ent_identifier;s.getFeedbackTarget(lb,function(mb){if(mb.hasviewersubscribed===kb.subscribe_action){var nb={actiontype:r.UFIActionType.SUBSCRIBE_ACTION,actorid:mb.actorforpost,hasviewersubscribed:!mb.hasviewersubscribed,entidentifier:lb};o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{actions:[nb]});}});j.defaultErrorHandler(jb);}var ua={'/ajax/ufi/ban_user.php':{mode:t.IMMEDIATE,error_handler:na},'/ajax/ufi/subscribe.php':{mode:t.BATCH_CONDITIONAL,error_handler:ta,batch_if:gb,batch_function:hb},'/ajax/ufi/id_comment_fetch.php':{mode:t.IMMEDIATE},'/ajax/ufi/remove_preview.php':{mode:t.IMMEDIATE},'/profile/broadcast_request/async/add_composer_token/':{mode:t.IMMEDIATE}},va=v.getURIBuilder().getURI();ua[va]={mode:t.IMMEDIATE,error_handler:oa};var wa=w.getURIBuilder().getURI();ua[wa]={mode:t.IMMEDIATE,error_handler:qa};var xa=x.getURIBuilder().getURI();ua[xa]={mode:t.BATCH_CONDITIONAL,error_handler:ra,batch_if:eb,batch_function:hb};var ya=y.getURIBuilder().getURI();ua[ya]={mode:t.IMMEDIATE,error_handler:qa};var za=z.getURIBuilder().getURI();ua[za]={mode:t.BATCH_CONDITIONAL,error_handler:sa,batch_if:fb,batch_function:hb};var ab=aa.getURIBuilder().getURI();ua[ab]={mode:t.IMMEDIATE,error_handler:oa};var bb=ba.getURIBuilder().getURI();ua[bb]={mode:t.IMMEDIATE};var cb=ca.getURIBuilder().getURI();ua[cb]={mode:t.IMMEDIATE};var db=da.getURIBuilder().getURI();ua[db]={mode:t.IMMEDIATE};t.registerEndpoints(ua);function eb(jb,kb){return jb&&jb.ft_ent_identifier==kb.ft_ent_identifier&&jb.comment_id==kb.comment_id;}function fb(jb,kb){return jb&&jb.ft_ent_identifier==kb.ft_ent_identifier;}function gb(jb,kb){return jb&&jb.ft_ent_identifier==kb.ft_ent_identifier;}function hb(jb,kb){return kb;}function ib(jb,kb){kb=parseInt(kb,10);var lb=!!kb,mb=jb.actorforpost,nb=jb.reactorids?jb.reactorids.slice(0):[],ob=nb.indexOf(mb),pb=0;if(lb){if(ob<0){nb.unshift(mb);pb=1;}}else if(ob>-1){nb.splice(ob,1);pb=-1;}var qb=Math.max(jb.reactioncount+pb,0),rb=jb.reactioncountreduced;if(rb&&!isNaN(rb))rb=qb.toString();var sb=jb.reactioncountmap||{},tb,ub=jb.viewerreaction;if(ub&&sb[ub]){sb[ub]['default']=Math.max((sb[ub]['default']||0)-1,0);tb=sb[ub].reduced;if(tb&&!isNaN(tb))sb[ub].reduced=sb[ub]['default'].toString();}if(lb&&sb[kb]){sb[kb]['default']=(sb[kb]['default']||0)+1;tb=sb[kb].reduced;if(tb&&!isNaN(tb))sb[kb].reduced=sb[kb]['default'].toString();}var vb=jb.userreactions||{};if(lb){vb[mb]=kb;}else delete vb[mb];return {actiontype:r.UFIActionType.REACTION,actorid:mb,entidentifier:jb.entidentifier,reactioncount:qb,reactioncountmap:sb,reactioncountreduced:rb,reactorids:nb,userreactions:vb,viewerreaction:kb};}f.exports=la;},null);
__d("XUFICommentTooltipController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/comment\/tooltip\/",{ft_ent_identifier:{type:"String",required:true},seen_user_fbids:{type:"IntVector",defaultValue:[]}});},null,{});
__d("XUFIReactionProfileBrowserController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/reaction\/profile\/browser\/",{ft_ent_identifier:{type:"String",required:true}});},null,{});
__d("XUFIReactionProfileDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/reaction\/profile\/dialog\/",{reaction_type:{type:"Enum",enumType:0},ft_ent_identifier:{type:"String",required:true},__asyncDialog:{type:"Int"}});},null,{});
__d("XUFIReactionTooltipController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/reaction\/tooltip\/",{ft_ent_identifier:{type:"String",required:true},seen_user_fbids:{type:"IntVector",defaultValue:[]},reaction_type:{type:"Enum",enumType:0}});},null,{});
__d("XUFIShareTooltipController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/share\/tooltip\/",{ft_ent_identifier:{type:"String",required:true},seen_user_fbids:{type:"IntVector",defaultValue:[]}});},null,{});
__d('UFIShareLink.react',['Event','React','Image.react','TrackingNodes','XUISpinner.react','cx','fbt','ix','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=Object.assign||function(t){for(var u=1;u<arguments.length;u++){var v=arguments[u];for(var w in v)if(Object.prototype.hasOwnProperty.call(v,w))t[w]=v[w];}return t;},r=i.PropTypes,s=i.createClass({displayName:'UFIShareLink',propTypes:{ufiExperiments:r.object},componentDidMount:function(){if(!this.props.onShareClick)return;this._clickEvent=h.listen(i.findDOMNode(this),'click',this.props.onShareClick);},componentWillUnmount:function(){if(!this.props.onShareClick)return;this._clickEvent.remove();},_onClick:function(event){event.preventDefault();this.props.onClick&&this.props.onClick(event);},render:function(){var t=n._("Send this to friends or post it on your timeline."),u='{ "tn": "'+k.encodeTN(k.types.SHARE_LINK)+'", "type": 25 }',v=this.props.ufiExperiments,w=null;if(v.showSlimUFI)w=i.createElement(j,{className:"UFIShareLinkIcon",src:o('/images/ufi/fbfeed/share_gray.png')});var x=null;if(this.props.rel!=='dialog')x=i.createElement(l,{className:"UFIShareLinkSpinner",showOnAsync:true});return (i.createElement('a',q({},this.props,{className:p(this.props.className,"share_action_link"),onClick:this._onClick,'data-ft':u,title:t}),w,n._("Share"),x));}});f.exports=s;},null);
__d('UFISubscribeLink.react',['React','fbt'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=h.PropTypes,k=h.createClass({displayName:'UFISubscribeLink',propTypes:{subscribeAction:j.bool,onClick:j.func},render:function(){var l=this.props.subscribeAction?i._("Turn On Notifications"):i._("Turn Off Notifications"),m=this.props.subscribeAction?i._("Get a notification whenever someone comments."):i._("Stop getting notifications when someone comments.");return (h.createElement('a',{className:"UFISubscribeLink",href:"#",role:"button",'aria-live':"polite",title:m,onClick:this.props.onClick},l));}});f.exports=k;},null);
__d('ProfileBrowserLink',['URI'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i='/ajax/browser/dialog/',j='/browse/',k=function(m,n,o){return new h(m+n).setQueryData(o);},l={constructPageURI:function(m,n){return k(j,m,n);},constructDialogURI:function(m,n){return k(i,m,n);}};f.exports=l;},null);
__d('ProfileBrowserTypes',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={FRIEND_CHECKINS:'friendcheckins',LIKES:'likes',GROUP_MEMBERS:'group_members',GROUP_MESSAGE_VIEWERS:'group_message_viewers',MUTUAL_FRIENDS:'mutual_friends',TODO_LIST_ASSIGNEES:'todo_list_assignees',TOPIC_CONVERSATION_PARTICIPANTS:'topic_conversation_participants'};f.exports=h;},null);
__d('UFITimelineBlingBox.react',['ProfileBrowserLink','ProfileBrowserTypes','React','UFIBlingItem.react','URI','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=j.PropTypes,p=j.createClass({displayName:'UFITimelineBlingBox',propTypes:{contextArgs:o.object.isRequired,'data-ft':o.string,'data-gt':o.string,actorid:o.any,commentOnClick:o.func,comments:o.number,commentsreduced:o.string,enableShowComments:o.bool,enableShowLikes:o.bool,feedbackFBID:o.any,likes:o.number,likesreduced:o.string,reshares:o.number,resharesreduced:o.string},render:function(){var q=[];if(this.props.likes&&this.props.enableShowLikes){var r=this._getProfileBrowserURI(),s=n._("See who likes this"),t=j.createElement('a',{ajaxify:r.dialog,className:this._getItemClassName(q),'data-ft':this.props['data-ft'],'data-gt':this.props['data-gt'],'data-hover':'tooltip','data-tooltip-alignh':'right','data-tooltip-uri':this._getLikeToolTipURI(),href:r.page,key:'like',rel:'dialog',role:'button',title:s},j.createElement(k,{contextArgs:this.props.contextArgs,count:this.props.likes,countreduced:this.props.likesreduced,iconClassName:'UFIBlingBoxTimelineLikeIcon',itemKey:'like'}));q.push(t);}if(this.props.comments&&this.props.enableShowComments){var u=n._("Show comments"),v=j.createElement('a',{'aria-label':u,className:this._getItemClassName(q),'data-ft':this.props['data-ft'],'data-hover':'tooltip','data-tooltip-alignh':'right',href:'#',key:'comment',onClick:this.props.commentOnClick},j.createElement(k,{contextArgs:this.props.contextArgs,count:this.props.comments,countreduced:this.props.commentsreduced,iconClassName:'UFIBlingBoxTimelineCommentIcon',itemKey:'comment'}));q.push(v);}if(this.props.reshares){var w=n._("Show shares"),x=this._getShareViewURI(),y=j.createElement('a',{ajaxify:x.dialog,'aria-label':w,className:this._getItemClassName(q),'data-ft':this.props['data-ft'],'data-hover':'tooltip','data-tooltip-alignh':'right',href:x.page,key:'reshare',rel:'async'},j.createElement(k,{allowText:true,contextArgs:this.props.contextArgs,count:this.props.reshares,countreduced:this.props.resharesreduced,iconClassName:'UFIBlingBoxTimelineReshareIcon',itemKey:'reshare'}));q.push(y);}return (j.createElement('span',null,q));},_getItemClassName:function(q){return (q.length>0?' '+"mls":'')+(' '+"UFIBlingBoxTimelineItem");},_getLikeToolTipURI:function(){if(this.props.feedbackFBID){var q=new l('/ajax/like/tooltip.php').setQueryData({comment_fbid:this.props.feedbackFBID});return q.toString();}else return null;},_getProfileBrowserURI:function(){if(this.props.feedbackFBID){var q=i.LIKES,r={id:this.props.feedbackFBID,actorid:this.props.actorid},s=h.constructDialogURI(q,r),t=h.constructPageURI(q,r),u={dialog:s.toString(),page:t.toString()};return u;}},_getShareViewURI:function(){if(this.props.feedbackFBID){var q=new l('/ajax/shares/view').setQueryData({target_fbid:this.props.feedbackFBID}),r=new l('/shares/view').setSubdomain('www').setQueryData({id:this.props.feedbackFBID}),s={dialog:q.toString(),page:r.toString()};return s;}}});f.exports=p;},null);
__d('UFIUIEvents',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h='UFIUIEvents/ufiActionAddComment',i='UFIUIEvents/ufiActionLinkLike',j='UFIUIEvents/ufiActionLinkUnlike',k={UFIActionLinkLike:i,UFIActionLinkUnlike:j,UFIActionAddComment:h};f.exports=k;},null);
__d("XPagesMessagingPrivateReplyDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/messaging\/private_reply\/dialog\/",{activity_id:{type:"String",required:true}});},null,{});
__d('UFIPrivateReplyLink.react',['ActorURI','Link.react','PagesPrivateReplyConstants','React','XUIGrayText.react','XPagesMessagingPrivateReplyDialogController','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();'use strict';var o=j.Status,p=j.Type,q=k.PropTypes,r=k.createClass({displayName:'UFIPrivateReplyLink',propTypes:{actorID:q.string.isRequired,activityID:q.string.isRequired,context:q.shape({activityType:q.string.isRequired,status:q.string.isRequired,hasReplyPermission:q.bool.isRequired,pageID:q.string.isRequired,permalink:q.string}).isRequired},render:function(){var s=this.props.context;if(s.hasReplyPermission&&this.props.actorID===s.pageID){if(s.status===o.REPLYABLE){return this._renderMessageLink();}else if(s.status===o.ALREADY_REPLIED)return this._renderSeeReplyLink();return this._renderTooltip();}if(s.status===o.ALREADY_REPLIED)return this._renderIndicator();return null;},_renderMessageLink:function(){var s=h.create(m.getURIBuilder().setString('activity_id',this.props.activityID).getURI(),this.props.context.pageID);return (k.createElement(i,{href:s,rel:"dialog"},this._getLabel()));},_renderTooltip:function(){var s;switch(this.props.context.status){case o.EXPIRED:s=n._({"comments":"You can't send a message response to comments that are older than 6 months.","reviews":"You can't send a message response to reviews that are older than 6 months.","posts":"You can't send a message response to posts that are older than 6 months."},[n['enum'](this._getActivityTypeLabel(),{comments:'comments',reviews:'reviews',posts:'posts'})]);break;case o.NOT_USER_CREATED:s=n._("Pages can't send private messages to other Pages.");break;}return (k.createElement('span',null,k.createElement(l,{shade:"light",'aria-label':s,'data-hover':s?'tooltip':null},this._getLabel())));},_renderSeeReplyLink:function(){return (k.createElement(i,{href:this.props.context.permalink||'#'},n._("See Response")));},_renderIndicator:function(){return (k.createElement('span',null,k.createElement(l,{shade:"light"},n._("Page responded privately"))));},_getLabel:function(){return n._("Message");},_getActivityTypeLabel:function(){switch(this.props.context.activityType){case p.COMMENT_PAGE_POST:case p.COMMENT_WALL_POST:case p.COMMENT_REVIEW:return 'comments';case p.REVIEW:return 'reviews';default:return 'posts';}}});f.exports=r;},null);
__d('UFIActionLinkController',['Arbiter','BootloadedComponent.react','Bootloader','ClickPointIdentifiersDEPRECATED','CommentPrelude','CSS','DataStore','DOM','DOMQuery','JSResource','Parent','React','TrackingNodes','UFIBlingBox.react','UFICentralUpdates','UFICommentLink.react','UFICollapse','UFIConstants','UFIFeedbackTargets','UFIInstanceState','UFILikeLink.react','UFIReactionsLink.react','UFIReactionsTokens.react','UFIShareLink.react','UFISubscribeLink.react','UFITimelineBlingBox.react','UFIToplevelCommentList','UFIUserActions','UFIUIEvents','UFIPrivateReplyLink.react','URI','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma){if(c.__markCompiled)c.__markCompiled();var na=Object.assign||function(ra){for(var sa=1;sa<arguments.length;sa++){var ta=arguments[sa];for(var ua in ta)if(Object.prototype.hasOwnProperty.call(ta,ua))ra[ua]=ta[ua];}return ra;},oa;function pa(ra,sa,ta){if(this._root)throw new Error('UFIActionLinkController attempted to initialize when a root was'+' already present');var ua=p.scry(ra,sa)[0];if(ua){if(m.hasClass(ua,'prevent_react_replace'))return;var va=document.createElement('span');ua.parentNode.replaceChild(va,ua);va.appendChild(ua);if(typeof ta==="function")ta(va);}else var wa=h.subscribe('PhotoSnowlift.DATA_CHANGE',function(){h.unsubscribe(wa);pa(ra,sa,ta);},h.SUBSCRIBE_NEW);}var qa=function(ra,sa,ta,ua){this._id=sa.ftentidentifier;this._ftFBID=ta.targetfbid;this._source=sa.source;this._contextArgs=sa;this._ufiRoot=ra;this._ufiInstanceID=ua;this._isOnTimeline=this._isRenderingOnTimeline();if(this._isOnTimeline){this._attemptInitializeTimelineBling();}else this._attemptInitializeBling();if(ta.viewercanlike||ta.hasviewerliked)this._attemptInitializeLike();if(ta.cancomment)this._attemptInitializeComment();if(ta.viewercansubscribetopost)this._attemptInitializeSubscribe();this._attemptInitializeShare();this._attemptInitializeMessageReply();v.subscribe('feedback-updated',(function(va,wa){var xa=wa.updates;if(this._id in xa)this.render();}).bind(this));v.subscribe('feedback-id-changed',(function(va,wa){var xa=wa.updates;if(this._id in xa)this._id=xa[this._id];}).bind(this));v.subscribe('instance-updated',(function(va,wa){var xa=wa.updates[this._ufiInstanceID];if(xa&&xa.inlineShare)this.render();}).bind(this));};Object.assign(qa.prototype,{_attemptInitializeBling:function(){pa(this._ufiRoot,'^form .uiBlingBox',(function(ra){this._blingRoot=ra;if(this._dataReady)this._renderBling();}).bind(this));},_attemptInitializeTimelineBling:function(){if(this._root)throw new Error('UFIActionLinkController attempted to initialize when a root was'+' already present');var ra=p.scry(this._ufiRoot,'^form .fbTimelineFeedbackActions .UFIBlingBoxTimeline')[0];if(ra){var sa=p.scry(ra,'.fbTimelineFeedbackLikes')[0];this._enableShowLikes=sa?true:false;var ta=p.scry(ra,'.fbTimelineFeedbackComments')[0];this._enableShowComments=ta?true:false;}this._blingTimelineRoot=ra;if(this._dataReady)this._renderTimelineBling();},_attemptInitializeLike:function(){pa(this._ufiRoot,'^form .like_link',(function(ra){this._likeRoot=ra;if(this._dataReady)this._renderLike();}).bind(this));},_attemptInitializeComment:function(){pa(this._ufiRoot,'^form .comment_link',(function(ra){this._commentRoot=ra;if(this._dataReady)this._renderComment();}).bind(this));},_attemptInitializeSubscribe:function(){pa(this._ufiRoot,'^form .unsub_link',(function(ra){this._subscribeRoot=ra;if(this._dataReady)this._renderSubscribe();}).bind(this));},_attemptInitializeMessageReply:function(){pa(this._ufiRoot,'^form .message_reply_action_link',(function(ra){this._messageReplyRoot=ra;if(this._messageReplyRoot.previousSibling&&this._messageReplyRoot.previousSibling.nodeType===3){this._messageReplySeparator=this._messageReplyRoot.previousSibling;this._messageReplySeparatorData=this._messageReplySeparator.data;}if(this._dataReady)this._renderMessageReply();}).bind(this));},_attemptInitializeShare:function(){pa(this._ufiRoot,'^form .share_action_link',(function(ra){this._shareRoot=ra;m.addClass(this._shareRoot,"share_root");var sa=p.scry(this._shareRoot,'.share_action_link')[0];if(sa){this._shareURI=sa.getAttribute('href');this._shareRel=sa.getAttribute('rel');this._shareNowMenuURI=n.get(sa,'share-now-menu-uri');}if(this._dataReady)this._renderShare();}).bind(this));},render:function(){this._dataReady=true;if(this._isOnTimeline){this._renderTimelineBling();}else this._renderBling();this._renderLike();this._renderComment();this._renderSubscribe();this._renderShare();this._renderMessageReply();},_renderBling:function(){if(this._blingRoot)z.getFeedbackTarget(this._id,(function(ra){var sa,ta=t.getTrackingInfo(t.types.BLINGBOX),ua=new la(ra.permalink).addQueryData({comment_tracking:ta}).toString(),va=ha.getCommentListForFeedbackTargetID_UNSAFE(this._id).getDisplayedCommentCount();if(!this._contextArgs.issnowbox&&this._contextArgs.hasReactionsTokens&&ra.displayreactions){var wa=(function(event){event.preventDefault();if(this._contextArgs.feedbackMode==='expanded'){this._setInlineShareActive(false);}else{l.onBlingboxClick(event.currentTarget);x.toggle(this._ufiInstanceID);}}).bind(this);sa=s.createElement(da,{commentCount:va,contextArgs:this._contextArgs,'data-comment-prelude-ref':'action_link_bling','data-ft':ta,feedback:ra,href:ua,onCommentClick:wa,onToggle:xa});}else{var xa=(function(event){l.onBlingboxClick(event.currentTarget);x.toggle(this._ufiInstanceID);event.preventDefault();}).bind(this);sa=s.createElement(u,{likes:ra.likecount,likesreduced:ra.likecountreduced,comments:va,commentsreduced:ra.commentcountreduced,reshares:ra.sharecount,resharesreduced:ra.sharecountreduced,nfb:ra.nfbcount,permalink:ua,contextArgs:this._contextArgs,onClick:xa,'data-ft':ta,'data-comment-prelude-ref':'action_link_bling'});}this._blingBox=s.render(sa,this._blingRoot);}).bind(this));},_renderTimelineBling:function(){if(this._blingTimelineRoot)z.getFeedbackTarget(this._id,(function(ra){var sa=t.getTrackingInfo(t.types.BLINGBOX),ta=k.getUserActionID(k.types.TIMELINE_SEE_LIKERS),ua=(function(event){var xa=r.byTag(event.target,"form");l.uncollapse(xa,'action_link_timeline_bling');var ya=p.scry(xa,'a.UFIPagerLink');if(ya.length)ya[0].click();event.preventDefault();}).bind(this),va=ha.getCommentListForFeedbackTargetID_UNSAFE(this._id).getDisplayedCommentCount(),wa=s.createElement(ga,{comments:va,commentsreduced:ra.commentcountreduced,commentOnClick:ua,contextArgs:this._contextArgs,'data-ft':sa,'data-gt':ta,enableShowComments:this._enableShowComments,enableShowLikes:this._enableShowLikes,feedbackFBID:this._ftFBID,likes:ra.likecount,likesreduced:ra.likecountreduced,reshares:ra.sharecount,resharesreduced:ra.sharecountreduced,actorid:ra.actorid});s.render(wa,this._blingTimelineRoot);}).bind(this));},_renderLike:function(){if(this._likeRoot)z.getFeedbackTarget(this._id,(function(ra){var sa=!ra.hasviewerliked,ta=(function(event){var va=sa?ja.UFIActionLinkLike:ja.UFIActionLinkUnlike;h.inform(va,{ft_id:this._id,like_action:sa,target:event.target});ia.changeLike(this._id,sa,{source:this._source,target:event.target,rootid:this._contextArgs.rootid});event.preventDefault();h.inform('inlineShare/reflow');}).bind(this),ua=s.createElement(ba,{onClick:ta,likeAction:sa,ufiExperiments:this._contextArgs.ufiexperiments});if(!this._contextArgs.issnowbox&&ra.canviewerreact)ua=s.createElement(ca,{id:this._id,reaction:ra.viewerreaction},ua);s.render(ua,this._likeRoot);}).bind(this));},_renderComment:function(){if(!this._commentRoot)return;var ra=this._contextArgs.commentajaxify?{ajaxify:this._contextArgs.commentajaxify,rel:'dialog'}:{onClick:(function(event){event.preventDefault();this._setInlineShareActive(false);}).bind(this)},sa=s.createElement(w,na({ufiExperiments:this._contextArgs.ufiexperiments},ra));this._commentLink=s.render(sa,this._commentRoot);},_renderMessageReply:function(){if(this._messageReplyRoot)z.getFeedbackTarget(this._id,(function(ra){this._messageReplyLink=null;if(ra.allowmessagelink){var sa=s.createElement(i,{bootloadPlaceholder:s.createElement('span',null),bootloadLoader:q('UFIMessageLink.react'),feedbackSource:this._source,postID:this._id});this._messageReplyLink=s.render(sa,this._messageReplyRoot);}else if(ra.messagereplycontext){var ta=s.createElement(ka,{actorID:ra.actorforpost,activityID:this._id,context:ra.messagereplycontext});this._messageReplyLink=s.render(ta,this._messageReplyRoot);}if(!this._messageReplyLink||!s.findDOMNode(this._messageReplyLink)){if(this._messageReplySeparator)this._messageReplySeparator.data='';o.setContent(this._messageReplyRoot,null);return;}if(this._messageReplySeparator)this._messageReplySeparator.data=this._messageReplySeparatorData;}).bind(this));},_renderSubscribe:function(){if(this._subscribeRoot)z.getFeedbackTarget(this._id,(function(ra){var sa=!ra.hasviewersubscribed,ta=(function(event){ia.changeSubscribe(this._id,sa,{source:this._source,target:event.target,rootid:this._contextArgs.rootid,commentexpandmode:ra.commentexpandmode});event.preventDefault();}).bind(this),ua=s.createElement(fa,{onClick:ta,subscribeAction:sa});this._subscribeLink=s.render(ua,this._subscribeRoot);}).bind(this));},_onShareClick:function(event){if(this._getInlineShareLoaded()){this._setInlineShareActive(true);event.kill();}},_renderShare:function(ra){if(!(this._shareRoot&&this._shareURI))return;var sa=!this._getInlineShareActive()&&this._shareNowMenuURI,ta=this._ufiInstanceID,ua;if(sa&&oa){ua=s.createElement(oa,na({endpoint:this._shareNowMenuURI,endpointData:{ufi_id:ta}},ra),s.createElement(ea,{href:"#",ufiExperiments:this._contextArgs.ufiexperiments}));}else{var va=null;if(sa){va={onClick:this._bootloadShareMenu.bind(this,{openOnInit:true}),onFocus:this._bootloadShareMenu.bind(this,{focusOnInit:true}),onMouseOver:this._bootloadShareMenu.bind(this,{})};}else va={ajaxify:new la(this._shareURI).addQueryData({ufi_id:ta}),rel:this._shareRel,onShareClick:this._onShareClick.bind(this)};ua=s.createElement(ea,na({ufiExperiments:this._contextArgs.ufiexperiments,href:"#"},va));}this._shareLink=s.render(ua,this._shareRoot);},_bootloadShareMenu:function(ra){j.loadModules(["UFIShareNowMenu.react"],(function(sa){oa=sa;this._renderShare(ra);}).bind(this));},_setInlineShareActive:function(ra){var sa=aa.getKeyForInstance(this._ufiInstanceID,'inlineShare');aa.updateState(this._ufiInstanceID,'inlineShare',na({},sa,{active:ra,toggling:true}));},_getInlineShareLoaded:function(){var ra=aa.getKeyForInstance(this._ufiInstanceID,'inlineShare');return !!(ra&&ra.loaded);},_getInlineShareActive:function(){var ra=aa.getKeyForInstance(this._ufiInstanceID,'inlineShare');return !!(ra&&ra.active);},_isRenderingOnTimeline:function(){if(this._source===y.UFIFeedbackSourceType.PROFILE){var ra=p.scry(this._ufiRoot,'^form .fbTimelineFeedbackActions .UFIBlingBoxTimeline');return ra.length>0;}return false;}});f.exports=qa;},null);
__d("MentionsInputUtils",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={generateDataFromTextWithEntities:function(i){var j=i.text,k=[];(i.ranges||[]).forEach(function(m){var n=m.entity;if(!n.external)k.push({uid:n.id,text:j.substr(m.offset,m.length),offset:m.offset,length:m.length,weakreference:!!n.weakreference});});var l={value:j,mentions:k};return l;}};f.exports=h;},null);
__d('ClipboardPhotoUploader',['ArbiterMixin','AsyncRequest','mixin'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l;k=j(h);l=k&&k.prototype;Object.assign(m,k);m.prototype=Object.create(k.prototype);m.prototype.constructor=m;m.__superConstructor__=k;function m(n,o){'use strict';l.constructor.call(this);this.uploadURIString=n;this.data=o;}m.prototype.handlePaste=function(event){'use strict';var n=m.getImages(event);for(var o=0;o<n.length;++o){var p=new FormData();p.append('pasted_file',n[o]);var q=new i();q.setURI(this.uploadURIString).setData(this.data).setRawData(p).setHandler((function(r){this.inform('upload_success',r);}).bind(this)).setErrorHandler((function(r){this.inform('upload_error',r);}).bind(this)).setAbortHandler((function(r){this.inform('upload_error',r);}).bind(this));this.inform('upload_start');q.send();break;}};m.getImages=function(event){'use strict';if(!event.clipboardData)return [];var n=event.clipboardData.items;if(!n)return [];var o,p=[];for(var q=0;q<n.length;++q){o=n[q];if(o.kind==='string')return [];if(o.kind==='file'&&o.type.indexOf('image/')!==-1)p.push(o.getAsFile());if(o.kind==='blob')p.push(o.blob);}return p;};f.exports=m;},null);
__d("InputCaretUtility",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={moveCaretToBeginning:function(i){if(typeof i.selectionStart==="number"){i.selectionStart=i.selectionEnd=0;}else if(i.createTextRange!==undefined){i.focus();var j=i.createTextRange();j.collapse(false);j.select();}},delayedMoveCaretToBeginning:function(i){setTimeout(function(){return h.moveCaretToBeginning(i);});}};f.exports=h;},null);
__d('LegacyMentionsInput.react',['Bootloader','CLogConfig','TypeaheadMetricsConfig','Event','InputCaretUtility','Keys','React','DOM','cx','FocusListener'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();c('FocusListener');var q=n.PropTypes,r=n.createClass({displayName:'ReactLegacyMentionsInput',propTypes:{initialData:q.object,placeholder:q.string,datasource:q.object,ref:q.string,viewOptionsTypeObjects:q.object,viewOptionsTypeObjectsOrder:q.array,hashtags:q.bool,autoflip:q.bool,onEnterSubmit:q.func,onFocus:q.func,onBlur:q.func,onTypingStateChange:q.func,onPaste:q.func},componentDidMount:function(){this.props.initialData&&this._initializeTextarea(n.findDOMNode(this));},hasEnteredText:function(){return !!(this._mentionsInput&&this._mentionsInput.getValue().trim());},setSignature:function(s){var t=n.findDOMNode(this.refs.textarea);o.setAttributes(t,{value:s});l.delayedMoveCaretToBeginning(t);},submitComment:function(event){var s;if(event){s=event.target.value&&event.target.value.trim();}else{var t=n.findDOMNode(this.refs.textarea);if(t.value&&t.value!==t.placeholder)s=t.value;}s=s||'';var u={visibleValue:s,encodedValue:s};if(this._mentionsInput)u.encodedValue=this._mentionsInput.getRawValue().trim();var v=this.props.onEnterSubmit(u,event);if(v&&this._mentionsInput){this._mentionsInput.reset();event&&event.preventDefault();}},_handleKeydown:function(event){var s=event.nativeEvent,t=k.getKeyCode(s)==m.RETURN&&!k.$E(s).getModifiers().any,u=this._mentionsInput&&this._mentionsInput.getTypeahead().getView().getSelection();if(this.props.onEnterSubmit&&t&&!u)this.submitComment(event);},_handleFocus:function(){this.props.onFocus&&this.props.onFocus();this._initializeTextarea(n.findDOMNode(this.refs.root));},_handleBlur:function(){this.props.onBlur&&this.props.onBlur();},_initializeTextarea:function(s){if(this._mentionsInput||this._bootloadingMentions)return;this._bootloadingMentions=true;h.loadModules(["CompactTypeaheadRenderer","ContextualTypeaheadView","CLoggerX","InputSelection","MentionsInput","TextAreaControl","Typeahead","TypeaheadAreaCore","TypeaheadBestName","TypeaheadHoistFriends","TypeaheadMetrics","TypeaheadMetricsX","TypingDetector","UFIComments"],(function(t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga){var ha=n.findDOMNode(this.refs.textarea);new y(ha);if(i.gkResults){var ia=ga.getComment(this.props.replyCommentID),ja=ia?ia.fbid:null;v.trackMentionsInput(ha,ja);}if(this.props.onTypingStateChange){var ka=new fa(ha);ka.init();ka.subscribe('change',this.props.onTypingStateChange);}var la={autoSelect:true,renderer:t,causalElement:ha,autoflip:this.props.autoflip};if(this.props.viewOptionsTypeObjects)la.typeObjects=this.props.viewOptionsTypeObjects;if(this.props.viewOptionsTypeObjectsOrder)la.typeObjectsOrder=this.props.viewOptionsTypeObjectsOrder;var ma=new z(this.props.datasource,{ctor:u,options:la},{ctor:aa},n.findDOMNode(this.refs.typeahead)),na=[ba,ca];if(j.gkResults){var oa=new ea({extraData:{event_name:'mention_metric_x'}});oa.init(ma);}var pa=new da({extraData:{event_name:'mentions',from_location:'comments'}});z.initNow(ma,na,pa);this._mentionsInput=new x(s,ma,ha,{hashtags:this.props.hashtags});this._mentionsInput.init({},this.props.initialData);if(this.props.initialData)w.set(ha,ha.value.length);if(this.props.onPaste)k.listen(ha,'paste',this.props.onPaste);this._bootloadingMentions=false;}).bind(this));},focus:function(){try{n.findDOMNode(this.refs.textarea).focus();}catch(s){}},render:function(){var s=' '+"textInput"+(' '+"mentionsTextarea")+(' '+"uiTextareaAutogrow")+(' '+"uiTextareaNoResize")+(' '+"UFIAddCommentInput");return (n.createElement('div',{ref:"root",className:"uiMentionsInput textBoxContainer ReactLegacyMentionsInput"},n.createElement('div',{className:"highlighter"},n.createElement('div',null,n.createElement('span',{className:"highlighterContent hidden_elem"}))),n.createElement('div',{ref:"typeahead",className:"uiTypeahead mentionsTypeahead"},n.createElement('div',{className:"wrap"},n.createElement('input',{type:"hidden",autoComplete:"off",className:"hiddenInput"}),n.createElement('div',{className:"innerWrap"},n.createElement('textarea',{ref:"textarea",name:"add_comment_text",className:s,title:this.props.placeholder,placeholder:this.props.placeholder,onFocus:this._handleFocus,onBlur:this._handleBlur,onKeyDown:this._handleKeydown})))),n.createElement('input',{type:"hidden",autoComplete:"off",className:"mentionsHidden",defaultValue:""})));}});f.exports=r;},null);
__d('LitestandStoryInsertionStatus',['ArbiterMixin'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i='check',j={registerBlocker:function(k){return j.subscribe(i,function(l,m){if(m.can_insert&&k())m.can_insert=false;});},canInsert:function(){var k={can_insert:true};j.inform(i,k);return k.can_insert;}};Object.assign(j,h);f.exports=j;},null);
__d('PageAdminSignatureSettings',['Arbiter','AdminSignatureConstants','invariant'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(l,m){'use strict';this.$PageAdminSignatureSettings1();if(!!m)this.$PageAdminSignatureSettings2=m;if(l instanceof k){!!!m?j(0):undefined;this.$PageAdminSignatureSettings3(l);}else if(l!==null&&l!==undefined){this.$PageAdminSignatureSettings4=l.isValid;if(!this.$PageAdminSignatureSettings4)return;this.$PageAdminSignatureSettings5=l.signature;this.$PageAdminSignatureSettings6=l.shouldAttachToPost;this.$PageAdminSignatureSettings7=l.shouldAttachToComment;this.$PageAdminSignatureSettings8=l.shouldAttachToMessage;this.$PageAdminSignatureSettings9=l.everPromptedUser;this.$PageAdminSignatureSettings10=l.pageID;this.$PageAdminSignatureSettings11=l.userID;}h.subscribe(i.EVENT_ADMIN_SIGNATURE_SETTING_CHANGED,(function(n,o){return this.$PageAdminSignatureSettings12(n,o);}).bind(this));h.subscribe(i.EVENT_ADMIN_SIGNATURE_PROMPTED,(function(n,o){return this.$PageAdminSignatureSettings13(n,o);}).bind(this));}k.prototype.getIsValid=function(){'use strict';return this.$PageAdminSignatureSettings4;};k.prototype.getIsValidWithActor=function(){'use strict';return this.getIsValid()&&this.$PageAdminSignatureSettings2!==null&&this.$PageAdminSignatureSettings2===this.$PageAdminSignatureSettings10;};k.prototype.getPageID=function(){'use strict';return this.$PageAdminSignatureSettings10;};k.prototype.getUserID=function(){'use strict';return this.$PageAdminSignatureSettings11;};k.prototype.getSignature=function(){'use strict';return this.$PageAdminSignatureSettings5;};k.prototype.getShouldAttachToPost=function(){'use strict';return this.$PageAdminSignatureSettings6;};k.prototype.getShouldAttachToComment=function(){'use strict';return this.$PageAdminSignatureSettings7;};k.prototype.getShouldAttachToMessage=function(){'use strict';return this.$PageAdminSignatureSettings8;};k.prototype.getEverPromptedUser=function(){'use strict';return this.$PageAdminSignatureSettings9;};k.prototype.$PageAdminSignatureSettings1=function(){'use strict';this.$PageAdminSignatureSettings9=false;this.$PageAdminSignatureSettings10="";this.$PageAdminSignatureSettings7=false;this.$PageAdminSignatureSettings8=false;this.$PageAdminSignatureSettings6=false;this.$PageAdminSignatureSettings5="";this.$PageAdminSignatureSettings11="";this.$PageAdminSignatureSettings4=false;this.$PageAdminSignatureSettings2=null;};k.prototype.$PageAdminSignatureSettings3=function(l){'use strict';this.$PageAdminSignatureSettings9=l.$PageAdminSignatureSettings9;this.$PageAdminSignatureSettings10=l.$PageAdminSignatureSettings10;this.$PageAdminSignatureSettings7=l.$PageAdminSignatureSettings7;this.$PageAdminSignatureSettings8=l.$PageAdminSignatureSettings8;this.$PageAdminSignatureSettings6=l.$PageAdminSignatureSettings6;this.$PageAdminSignatureSettings5=l.$PageAdminSignatureSettings5;this.$PageAdminSignatureSettings11=l.$PageAdminSignatureSettings11;this.$PageAdminSignatureSettings4=l.$PageAdminSignatureSettings4;};k.prototype.$PageAdminSignatureSettings13=function(l,m){'use strict';if(m.userID!==this.$PageAdminSignatureSettings11)return;this.$PageAdminSignatureSettings9=true;};k.prototype.$PageAdminSignatureSettings12=function(l,m){'use strict';if(m.userID!==this.$PageAdminSignatureSettings11||m.pageID!==this.$PageAdminSignatureSettings10)return;switch(m.settingChanged){case i.SETTING_ATTACH_TO_POST:this.$PageAdminSignatureSettings6=m.newValue;break;case i.SETTING_ATTACH_TO_MESSAGE:this.$PageAdminSignatureSettings8=m.newValue;break;case i.SETTING_ATTACH_TO_COMMENT:this.$PageAdminSignatureSettings7=m.newValue;break;default:j(0);}};f.exports=k;},null);
__d("XPagesAdminSignatureSettingsController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/admin\/signature\/settings\/",{});},null,{});
__d("XPagesAdminSignaturePromptDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/admin\/signature\/prompt\/",{__asyncDialog:{type:"Int"}});},null,{});
__d('PageAdminSignatureMonitor',['Arbiter','AsyncRequest','AdminSignatureConstants','DOM','DOMQuery','Event','InputCaretUtility','PageAdminSignatureSettings','XPagesAdminSignatureSettingsController','XPagesAdminSignaturePromptDialogController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r={registerComposerControlForSignature:function(s,t,u,v){if(!t||!t.isValid)return;var w=this._getUnderlyingTextControl(s),x=new o(t,u);m.listen(w,'focus',(function(){this._handleInputFieldFocusForSignature(w,x,x.getShouldAttachToPost(),function(y){return y.value;},function(y,z){if(v)z='\n\n'.concat(z);k.setAttributes(y,{value:z});n.delayedMoveCaretToBeginning(y);});}).bind(this));},handleReactInputFieldFocusForSignature:function(s,t,u){this._handleInputFieldFocusForSignature(s,t,u,function(v){return v.hasEnteredText();},function(v,w){return v.setSignature(w);});},prepareConfirmationDialog:function(s,t,u){s.subscribe('confirm',(function(){s.hide();this._notifyPromptConfirmation(t,u,true);}).bind(this));s.subscribe('cancel',(function(){this._notifyPromptConfirmation(t,u,false);}).bind(this));},_promptForAutoSignature:function(s){h.inform(j.EVENT_ADMIN_SIGNATURE_PROMPTED,{userID:s.getUserID()});var t=q.getURIBuilder().getURI();new i().setURI(t).setData({pageID:s.getPageID()}).send();},_handleInputFieldFocusForSignature:function(s,t,u,v,w){if(!t||!t.getIsValidWithActor())return;if(!t.getEverPromptedUser()){this._promptForAutoSignature(t);}else if(u&&!v(s))w(s,t.getSignature());},_notifyPromptConfirmation:function(s,t,u){var v=p.getURIBuilder().getURI();new i().setURI(v).setData({pageID:s,signatureOption:j.SETTING_EVER_PROMPTED,signatureOptionValue:u}).send();this._aribiterNotifyPromptConfirmation(s,t,u);},_getUnderlyingTextControl:function(s){return l.find(s,'textarea');},_aribiterNotifyPromptConfirmation:function(s,t,u){var v=[j.SETTING_ATTACH_TO_POST,j.SETTING_ATTACH_TO_COMMENT,j.SETTING_ATTACH_TO_MESSAGE];v.forEach(function(w){h.inform(j.EVENT_ADMIN_SIGNATURE_SETTING_CHANGED,{pageID:s,userID:t,settingChanged:w,newValue:u});});}};f.exports=r;},null);
__d('cssVar',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){throw new Error('cssVar'+'("'+i+'"): Unexpected class transformation.');}f.exports=h;},null);
__d('UFIBusinessActorIcon.react',['React','cssVar','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.PropTypes,m=5,n={textColor:["#10a498","#6342a7","#ee602f","#8a217a","#406dd3"],iconColor:["#e2f2f2","#efeaf6","#ffece6","#f4e8f0","#eef3ff"]},o=h.createClass({displayName:'UFIBusinessActorIcon',propTypes:{initials:l.string.isRequired,hash:l.string.isRequired,classNames:l.string},render:function(){var p=this.props.hash%m,q=k(this.props.classNames,"UFIBusinessActorIcon");return (h.createElement('div',{className:q,style:{backgroundColor:n.iconColor[p]}},h.createElement('div',{className:"UFIBusinessActorIconText",style:{color:n.textColor[p]}},this.props.initials)));}});f.exports=o;},null);
__d('UFIClassNames',['cx'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports={ACTOR_IMAGE:"img UFIActorImage _54ru",ROW:"UFIRow",UNSEEN_ITEM:"UFIUnseenItem"};},null);
__d('UFIStickerButton.react',['Bootloader','ContextualLayerAutoFlip','Link.react','React','ReactLayeredComponentMixin','StickerInterfaces','cx','fbt','getObjectValues'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=k.PropTypes,r=k.createClass({displayName:'UFIStickerButton',propTypes:{onStickerFlyoutShow:q.func,onStickerSelected:q.func.isRequired,onEmoticonSelected:q.func,showTooltip:q.bool,stickerInterface:q.oneOf(p(m))},mixins:[l],getDefaultProps:function(){return {showTooltip:true,stickerInterface:m.COMMENTS};},getInitialState:function(){return {renderFlyout:null,flyoutShown:false};},render:function(){var s=o._("Post a sticker");return (k.createElement(j,{'aria-label':this.props.showTooltip?s:null,className:"UFICommentStickerButton",'data-hover':"tooltip",'data-tooltip-alignh':"center",onClick:this._onLinkClicked,onMouseDown:this._prepareForClick},k.createElement('div',{ref:"icon",tabIndex:0,className:"UFICommentStickerIcon"}),this.props.children));},renderLayers:function(){return !this.state.renderFlyout?{}:this.state.renderFlyout();},_hideFlyout:function(){this.setState({flyoutShown:false});},_prepareForClick:function(){this._clickGuard=this.state.flyoutShown;},_onLinkClicked:function(){if(this.state.renderFlyout!==null){if(!this._clickGuard){this.props.onStickerFlyoutShow&&this.props.onStickerFlyoutShow();this.setState({flyoutShown:true});}return;}h.loadModules(["XUIContextualDialog.react","StickersFlyout.react"],(function(s,t){this.setState({flyoutShown:true,renderFlyout:(function(){return {contextualDialog:k.createElement(s,{alignment:"right",behaviors:{flip:i},className:"_5e-r",contextRef:(function(){return this.refs.icon;}).bind(this),onBlur:this._hideFlyout,position:"above",shown:this.state.flyoutShown,hasActionableContext:true,width:278},k.createElement('div',null,k.createElement(t,{onEscKeyDown:this._hideFlyout,onStickerSelect:this._onStickerSelected,onEmoticonSelect:this._onEmoticonSelected,stickerInterface:this.props.stickerInterface,shown:this.state.flyoutShown})))};}).bind(this)});this.props.onStickerFlyoutShow&&this.props.onStickerFlyoutShow();}).bind(this));},_onStickerSelected:function(s,event){this.props.onStickerSelected(s,event);this._hideFlyout();},_onEmoticonSelected:function(s){this.props.onEmoticonSelected(s);this._hideFlyout();}});f.exports=r;},null);
__d("XFeedNUXSaveSeenStateController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/feed\/nux\/seen\/save\/",{link_id:{type:"String"},key:{type:"String",required:true},seen:{type:"Bool",defaultValue:false}});},null,{});
__d('dotAccess',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j,k){var l=j.split('.');do{var m=l.shift();i=i[m]||k&&(i[m]={});}while(l.length&&i);return i;}f.exports=h;},null);
__d('UFIAddComment.react',['ActorURI','Arbiter','AsyncRequest','Bootloader','ClipboardPhotoUploader','getActiveElement','Event','Keys','LegacyMentionsInput.react','Link.react','LitestandStoryInsertionStatus','PageAdminSignatureMonitor','React','ReactLayeredComponentMixin','Run','SnowflakePermalinkUtils','TrackingNodes','UFIAddCommentAction','UFIAttachedPhotoPreview.react','UFIAttachPhotoSection.react','UFIBusinessActorIcon.react','UFIClassNames','UFIConfig','UFIConstants','UFIImageBlock.react','UFIStickerButton.react','URI','XFeedNUXSaveSeenStateController','cx','dotAccess','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma){if(c.__markCompiled)c.__markCompiled();var na=t.PropTypes,oa=la._("Write a comment..."),pa=la._("Write a reply..."),qa="fcg fss UFICommentTip",ra=19,sa='/ajax/ufi/upload/',ta='/ajax/ufi/sticker_preview/',ua=t.createClass({displayName:'UFIAddComment',mixins:[u],propTypes:{contextArgs:na.object.isRequired,viewerActor:na.object.isRequired,allowPhotoAttachments:na.bool,allowStickerAttachments:na.bool,attachedSticker:na.object,editingComment:na.object.isRequired,feedbackIsRanked:na.bool,hide:na.bool,initialData:na.object,isEditing:na.bool,isFirstComponent:na.bool,isLastComponent:na.bool,isSnowlift:na.bool,isQAndA:na.bool,mentionsDataSource:na.object,onTypingStateChange:na.func,replyCommentID:na.string,showSendOnEnterTip:na.bool,subtitle:na.any,targetID:na.string,withoutSeparator:na.bool},contextTypes:{dispatch:na.func},getInitialState:function(){var va=ka(this.props,'editingComment.photo_comment');if(va)this.props.contextArgs.attachedphoto=va;if(this.props.attachedSticker)this.props.contextArgs.attachedsticker=this.props.attachedSticker;return {attachedPhoto:va?va:null,attachedSticker:this.props.attachedSticker?this.props.attachedSticker:null,fileInput:null,fileUploader:null,isCommenting:false,isLoadingPhoto:false,renderStickerNUX:null,stickerNUXVisible:false,isFocused:this.props.isEditing};},_onKeyDown:function(event){if(this.props.isEditing&&n.getKeyCode(event.nativeEvent)===o.ESC)this.context.dispatch(y.cancel());if(this.isMounted()&&!this._isOnBeforeUnloadListenerAdded){v.onBeforeUnload(this._handleUnsavedChanges);this._isOnBeforeUnloadListenerAdded=true;}var va=m();if(n.getKeyCode(event.nativeEvent)===o.ESC)va.blur();},_handleUnsavedChanges:function(){var va=b.PageTransitions;if(va){var wa=ha.getNextURI(),xa=va.getMostRecentURI();if(wa.getQueryData().hasOwnProperty('theater')||xa.getQueryData().hasOwnProperty('theater')||wa.getQueryData().hasOwnProperty('sdialog')||w.isPermalinkURI(wa)||w.isPermalinkURI(xa))return;var ya=b.DialogNavigationStack;if(ya&&ya.isActiveURI(wa))return;}if(this.refs&&this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return la._("You haven't finished your comment yet. Do you want to leave without finishing?");},_blur:function(){this.setState({stickerNUXVisible:false});setTimeout((function(){if(this.isMounted())this.setState({isFocused:false});}).bind(this),100);if(this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return;this.setState({isCommenting:false});},_onPaste:function(event){var va=new l(sa,this._getPhotoUploadData());this._cancelCurrentSubscriptions();this._subscriptions=[va.subscribe('upload_start',this._prepareForAttachedPhotoPreview),va.subscribe('upload_error',this._onRemoveAttachedPhotoPreviewClicked),va.subscribe('upload_success',(function(wa,xa){this._onPhotoUploadComplete(xa);}).bind(this))];va.handlePaste(event);},_onEnterSubmit:function(va,event){var wa=this.state.attachedPhoto||this.state.attachedSticker,xa=this.props.isEditing||wa;if(this.state.isLoadingPhoto){return false;}else if(!va.encodedValue.trim()&&!xa)return false;va.encodedValue=va.encodedValue.trim();if(wa){va.attachedPhoto=this.state.attachedPhoto;va.attachedSticker=this.state.attachedSticker;this.setState({isLoadingPhoto:false,attachedPhoto:null,attachedSticker:null});}else{va.attachedPhoto=null;va.attachedSticker=null;}if(this.props.onCommentSubmit){this.props.onCommentSubmit(va,event);}else this.context.dispatch(y.submitEdit(this.props.editingComment,va,event.target));return true;},_cancelCurrentSubscriptions:function(){if(this._subscriptions)this._subscriptions.forEach(function(va){va.unsubscribe();});},componentWillMount:function(){this._isOnBeforeUnloadListenerAdded=false;this._storyInsertionBlocker=r.registerBlocker((function(){return this.state.isCommenting;}).bind(this));},componentWillUnmount:function(){this._cancelCurrentSubscriptions();if(this._remixedImageToken)i.unsubscribe(this._remixedImageToken);if(this._focusCommentFieldToken)i.unsubscribe(this._focusCommentFieldToken);this._storyInsertionBlocker&&this._storyInsertionBlocker.unsubscribe();this._storyInsertionBlocker=null;},focus:function(){var va={isCommenting:true,isFocused:true};if(this.props.allowStickerAttachments&&da.shouldShowStickerNUX){var wa=ia.getURIBuilder().setString('key','sticker_comments').setBool('seen',true).getURI();new j(wa).send();if(this.state.renderStickerNUX===null)k.loadModules(["XUIAmbientNUX.react"],(function(ya){va.renderStickerNUX=(function(){return {ambientNUX:t.createElement(ya,{contextRef:(function(){return this.refs.sticker_button;}).bind(this),shown:this.state.stickerNUXVisible,position:"above",width:"auto",alignment:"right",onCloseButtonClick:this._hideStickerNUX},la._("Now you can comment with a sticker!"))};}).bind(this);}).bind(this));da.shouldShowStickerNUX=false;va.stickerNUXVisible=true;}var xa=this.props.contextArgs.pagesAdminSignatureSettings;if(xa)s.handleReactInputFieldFocusForSignature(this.refs.mentionsinput,xa,xa.getShouldAttachToComment());this.setState(va);},renderLayers:function(){return !this.state.renderStickerNUX?{}:this.state.renderStickerNUX();},_setFileInput:function(va,wa){this.setState({fileInput:va,fileUploader:wa});},render:function(){var va=!this.props.contextArgs.collapseaddcomment||this.state.isCommenting,wa=null;if(this.props.subtitle){wa=t.createElement('span',{className:qa},this.props.subtitle);}else if(!this.state.isFocused&&this.props.isEditing){wa=t.createElement('span',{className:qa},la._("{cancel}",[la.param("cancel",t.createElement(q,{onClick:(function(){return (this.context.dispatch(y.cancel()));}).bind(this)},la._("Cancel")))]));}else if(this.props.isEditing){wa=t.createElement('span',{className:qa},la._("Press Esc to {cancel}.",[la.param("cancel",t.createElement(q,{onClick:(function(){return (this.context.dispatch(y.cancel()));}).bind(this)},la._("cancel")))]));}else if(this.props.showSendOnEnterTip)wa=t.createElement('span',{className:qa},la._("Press Enter to post."));var xa=null,ya=null,za=this.state.attachedPhoto||this.state.attachedSticker,ab=null;if(this.props.allowStickerAttachments&&!za)ya=t.createElement(ga,{ref:"sticker_button",onStickerSelected:this.onStickerSelected,onEmoticonSelected:this._insertEmoticonIntoCommentText});if(this.props.allowPhotoAttachments){ab=this._onPaste;xa=t.createElement(aa,{getPhotoUploadData:this._getPhotoUploadData,prepareForAttachedPhotoPreview:this._prepareForAttachedPhotoPreview,onPhotoUploadComplete:this._onPhotoUploadComplete,setFileInput:this._setFileInput,attachment:za});}var bb=x.getTrackingInfo(x.types.ADD_COMMENT_BOX),cb=ma(ca.ACTOR_IMAGE,!va?' '+"hidden_elem":''),db=this.props.viewerActor.isBusinessPersona?t.createElement(ba,{initials:this.props.viewerActor.initials,hash:this.props.viewerActor.hash,classNames:cb}):t.createElement('img',{className:cb,src:this.props.viewerActor.thumbSrc,alt:this.props.viewerActor.name}),eb=t.createElement('div',{className:"UFIReplyActorPhotoWrapper",onClick:this.focus},db),fb=ma(ca.ROW,(this.props.hide?' '+"noDisplay":'')+(' '+"UFIComponent")+(' '+"UFIAddComment")+(this.props.allowPhotoAttachments?' '+"UFIAddCommentWithPhotoAttacher":'')+(this.props.withoutSeparator?' '+"UFIAddCommentWithoutSeparator":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":'')),gb;if(!!this.props.replyCommentID){gb=pa;}else if(this.props.isQAndA){gb=la._("Ask a question...");}else if(this.props.source===ea.UFIFeedbackSourceType.TOPIC_CONVERSATION){gb=la._("Discuss this topic...");}else if(!this.props.contextArgs.hasComments&&this.props.contextArgs.commentPlaceholderText){gb=this.props.contextArgs.commentPlaceholderText;}else gb=oa;var hb=this.props.contextArgs.viewoptionstypeobjects,ib=this.props.contextArgs.viewoptionstypeobjectsorder;if(this.props.attachedPhoto&&!this.props.subtitle)wa=null;var jb=t.createElement(z,{attachedPhoto:this.state.attachedPhoto,attachedSticker:this.state.attachedSticker,onRemoveAttachedPhotoPreview:this._onRemoveAttachedPhotoPreviewClicked,onRemoveAttachedStickerPreview:this._onRemoveAttachedStickerPreviewClicked,subtitle:this.props.subtitle,isLoadingPhoto:this.state.isLoadingPhoto}),kb=this.props.allowStickerAttachments?ma("UFIMentionsInputWrap","UFIStickersEnabledInput"):"UFIMentionsInputWrap",lb,mb,nb;if(this.props.contextArgs.mentionsinput){var ob=this.props.contextArgs.mentionsinput;lb=ob.inputComponent;mb=ob.viewComponent;nb=ob.viewProps;}else lb=p;return (t.createElement('li',{className:fb,onKeyDown:this._onKeyDown,'data-ft':bb},t.createElement(fa,{className:kb},eb,t.createElement('div',{className:"UFICommentContainer"},t.createElement('div',{className:"UFIInputContainer"},t.createElement(lb,{replyCommentID:this.props.replyCommentID,initialData:this.props.initialData,placeholder:gb,datasource:this.props.mentionsDataSource,ref:"mentionsinput",viewComponent:mb,viewProps:nb,viewOptionsTypeObjects:hb,viewOptionsTypeObjectsOrder:ib,hashtags:this.props.contextArgs.sht,showHashtagTypeahead:this.props.contextArgs.showHashtagTypeahead,autoflip:this.props.contextArgs.addcommentautoflip,monitorHeight:this.props.contextArgs.monitorHeight,onEnterSubmit:this._onEnterSubmit,onFocus:this.focus,onBlur:this._blur,onTypingStateChange:this.props.onTypingStateChange,onPaste:ab}),t.createElement('div',{className:"UFICommentAttachmentButtons clearfix"},xa,ya)),jb,wa))));},componentDidUpdate:function(va,wa,xa){if(!wa.attachedPhoto&&this.state.attachedPhoto||!wa.attachedSticker&&this.state.attachedSticker||!wa.isCommenting&&this.state.isCommenting)this.refs.mentionsinput.focus();if(va.viewerActor.id!==this.props.viewerActor.id){if(this.state.fileInput)this.state.fileInput.clear();if(this.state.fileUploader)this.state.fileUploader.setData(this._getPhotoUploadData());this._onRemoveAttachedPhotoPreviewClicked();}},componentDidMount:function(){if(!this.props.allowPhotoAttachments)return;if(this.props.replyCommentID===null){this._focusCommentFieldToken=i.subscribe('focusCommentField'+this.props.contextArgs.feedbackID,(function(va){this.refs.mentionsinput.focus();}).bind(this));i.inform('finishedMounting'+this.props.contextArgs.feedbackID);if(this.props.isSnowlift)this._remixedImageToken=i.subscribe('newRemixedImage'+this.props.contextArgs.feedbackID,(function(va,wa){var event={clipboardData:{items:[wa]}};this._onPaste(event);}).bind(this));}},insertMention:function(va){if(this.refs.mentionsinput&&this.refs.mentionsinput.insertMention)this.refs.mentionsinput.insertMention(va);},_getPhotoUploadData:function(){var va=this.props.viewerActor.id,wa={profile_id:va,target_id:this.props.targetID,source:ra};wa[h.PARAMETER_ACTOR]=va;return wa;},_onPhotoUploadComplete:function(va){if(!this.state.isLoadingPhoto)return;var wa=va.getPayload();if(wa&&wa.fbid){this.props.contextArgs.attachedphoto=wa;this.setState({attachedPhoto:wa,isLoadingPhoto:false});}else this._onRemoveAttachedPhotoPreviewClicked(null);},_onRemoveAttachedPhotoPreviewClicked:function(event){this.props.contextArgs.attachedphoto=null;this.setState({attachedPhoto:null,isLoadingPhoto:false});},_prepareForAttachedPhotoPreview:function(){this.props.contextArgs.attachedphoto=null;this.setState({attachedPhoto:null,isLoadingPhoto:true});},_onStickerUploadComplete:function(va){if(!this.state.isLoadingPhoto)return;var wa=va.getPayload();if(wa&&wa.fbid){this.props.contextArgs.attachedsticker=wa;this.setState({attachedSticker:wa,isLoadingPhoto:false});}else{k.loadModules(["Dialog"],function(xa){var ya=la._("Sticker Failed"),za=la._("There was a problem attaching the sticker.");new xa().setTitle(ya).setBody(za).setButtons(xa.OK).show();});this._onRemoveAttachedStickerPreviewClicked(null);}},_onRemoveAttachedStickerPreviewClicked:function(event){this.props.contextArgs.attachedsticker=null;this.setState({attachedSticker:null,isLoadingPhoto:false});},onStickerSelected:function(va,event){if(this.props.isEditing||this.refs.mentionsinput.hasEnteredText()){this._prepareForAttachedStickerPreview(va);return;}this.sendSticker(va,event);},_prepareForAttachedStickerPreview:function(va){this.props.contextArgs.attachedsticker=null;this.setState({attachedSticker:null,isLoadingPhoto:true});new j(ta).setData({sticker_id:va}).setErrorHandler(this._onRemoveAttachedStickerPreviewClicked).setHandler(this._onStickerUploadComplete).send();},sendSticker:function(va,event){var wa={encodedValue:'',visibleValue:''};this.props.contextArgs.attachedsticker={fbid:va};this.props.onCommentSubmit(wa,event);},_insertEmoticonIntoCommentText:function(va){k.loadModules(["EmoticonsList","EmoticonUtils","TextAreaControl","SelectionPosition"],(function(wa,xa,ya,za){var ab=wa.symbols[va];if(!ab)return;if(this.props.contextArgs.mentionsinput){this.refs.mentionsinput.insertEmoticon(ab);return;}if(!this._selectionPosition)this._selectionPosition=new za(t.findDOMNode(this.refs.mentionsinput.refs.textarea));var bb=this.refs.mentionsinput.refs.getTextFieldDOM(),cb=ya.getInstance(bb),db=cb.getValue(),eb=xa.insertEmoticon(ab,db,this._selectionPosition.getPos());cb.setValue(eb.result);this._selectionPosition.setPos(eb.start,eb.end);}).bind(this));},_hideStickerNUX:function(){this.setState({stickerNUXVisible:false});}});f.exports=ua;},null);
__d('UFIAddCommentController',['Arbiter','MentionsInputUtils','Parent','UFIAddComment.react','React','ShortProfiles','UFICentralUpdates','UFIFeedbackTargets','UFIInstanceState','UFIUIEvents','UFIUserActions'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();function s(t,u,v,w){this.id=u;this._ufiInstanceID=w.instanceid;this._contextArgs=w;this._contextArgs.feedbackID=u;this._replyCommentID=v;this._replyCommentParentID=null;if(t){this.root=t;if(!this._contextArgs.rootid)this._contextArgs.rootid=t.id;this.render();n.subscribe('instance-updated',(function(x,y){var z=y.updates;if(this._ufiInstanceID in z)this.render();}).bind(this));n.subscribe('feedback-updated',(function(x,y){var z=y.updates;if(this.id in z)this.render();}).bind(this));}n.subscribe('feedback-id-changed',(function(x,y){var z=y.updates;if(this.id in z)this.id=z[this.id];}).bind(this));}Object.assign(s.prototype,{_onCommentSubmit:function(t,event){r.addComment(this.id,t.visibleValue,t.encodedValue,{source:this._contextArgs.source,ufiinstanceid:this._ufiInstanceID,target:event.target,replyid:this._replyCommentID,rootid:this._contextArgs.rootid,attachedphoto:this._contextArgs.attachedphoto,attachedsticker:this._contextArgs.attachedsticker,feedcontext:this._contextArgs.feedcontext,replycommentparentid:this._replyCommentParentID});this._contextArgs.attachedphoto=null;this._contextArgs.attachedsticker=null;o.getFeedbackTarget(this.id,(function(u){var v=j.byTag(this.root,'form');if(v)h.inform('ufi/comment',{form:v,isinverted:u.isranked||this._contextArgs.isstreaming});if(u.showtopicconversationcreationpivot)h.inform(q.UFIActionAddComment,{feedback:u,target:event.target});}).bind(this));return false;},_onTypingStateChange:function(t,u){r.typingChange(this.id,u);},renderAddComment:function(t,u,v,w,x,y,z,aa,ba,ca,da){this._replyCommentParentID=da;var ea=this._contextArgs.logtyping?this._onTypingStateChange.bind(this):null,fa=null,ga=p.getKeyForInstance(this._ufiInstanceID,'isediting')&&!this._replyCommentID;o.getFeedbackTarget(this.id,(function(ha){this._contextArgs.feedbackisranked=ha.isranked;}).bind(this));return (l.createElement(k,{hide:ga,replyCommentID:this._replyCommentID,viewerActor:t,targetID:u,initialData:fa,ref:x,withoutSeparator:y,onCommentSubmit:this._onCommentSubmit.bind(this),editingComment:{},mentionsDataSource:v,onTypingStateChange:ea,showSendOnEnterTip:w,allowPhotoAttachments:aa&&!this._contextArgs.isstreaming,allowStickerAttachments:ba&&!this._contextArgs.isstreaming,source:this._contextArgs.source,contextArgs:this._contextArgs,subtitle:z,isQAndA:ca,isSnowlift:this._contextArgs.issnowlift,feedbackIsRanked:this._contextArgs.feedbackisranked}));},renderEditComment:function(t,u,v,w,x,y,z){var aa;if(v.attachment)aa=v.attachment.type=='sticker'?v.attachment:null;var ba=i.generateDataFromTextWithEntities(v.body);return (l.createElement(k,{viewerActor:t,targetID:u,initialData:ba,mentionsDataSource:w,source:this._contextArgs.source,contextArgs:this._contextArgs,isEditing:true,editingComment:v,attachedSticker:aa,allowPhotoAttachments:x,allowStickerAttachments:y,isQAndA:z}));},render:function(){if(!this.root)throw new Error('render called on UFIAddCommentController with no root');o.getFeedbackTarget(this.id,(function(t){if(t.cancomment&&t.actorforpost)m.get(t.actorforpost,(function(u){var v=this.renderAddComment(u,t.ownerid,t.mentionsdatasource,t.showsendonentertip,null,null,t.subtitle,t.allowphotoattachments,t.allowstickerattachments,t.isqanda,null);this._addComment=l.render(v,this.root);}).bind(this));}).bind(this));}});f.exports=s;},null);
__d('ShareNowConstants',['fbt'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports={error:h._("This post could not be shared at this time. Please try again later."),success:h._("Your share was posted.")};},null);
__d('UFIAddCommentLink.react',['React','UFIClassNames','cx','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=h.PropTypes,n=h.createClass({displayName:'UFIAddCommentLink',propTypes:{'data-ft':m.string,isFirstCommentComponent:m.bool,isFirstComponent:m.bool,isLastCommentComponent:m.bool,isLastComponent:m.bool,isQAndA:m.bool,onClick:m.func},render:function(){var o=l(i.ROW,' '+"UFIAddCommentLink"+(this.props.isFirstCommentComponent?' '+"UFIFirstCommentComponent":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":'')),p;if(this.props.isQAndA){p=k._("Ask a question...");}else p=k._("Write a comment...");return (h.createElement('li',{className:o,'data-ft':this.props['data-ft']},h.createElement('a',{className:"UFICommentLink",onClick:this.props.onClick,href:"#",role:"button"},p)));}});f.exports=n;},null);
__d('UFICommentLikeCount.react',['NumberFormat','ProfileBrowserLink','ProfileBrowserTypes','React','URI','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();'use strict';var n=k.PropTypes,o=function(q,r){var s=new l('/ajax/like/tooltip.php').setQueryData({comment_fbid:q.fbid,comment_from:q.author,comment_likecount:q.likecount||0,comment_id:q.id,cache_buster:q.likeconfirmhash||0});if(r)s.addQueryData({viewas:r});return s;},p=k.createClass({displayName:'UFICommentLikeCount',propTypes:{comment:n.object.isRequired,contextArgs:n.object.isRequired},render:function(){var q=this.props.comment,r=h.formatIntegerWithDelimiter(q.likecount||0,this.props.contextArgs.numberdelimiter),s=j.LIKES,t={id:q.fbid},u=o(this.props.comment,this.props.contextArgs.viewas),v=k.createElement('i',{className:"UFICommentLikeIcon"}),w=k.createElement('span',null,r),x=' '+"UFICommentLikeButton"+(this.props.comment.hasviewerliked?' '+"UFICommentLikedButton":'');return (k.createElement('a',{ajaxify:i.constructDialogURI(s,t).toString(),className:x,'data-hover':"tooltip",'data-tooltip-alignh':"center",'data-tooltip-uri':u.toString(),href:i.constructPageURI(s,t).toString(),rel:"dialog",role:"button"},v,w));}});f.exports=p;},null);
__d('UFIReplyLink.react',['React','fbt'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();'use strict';var j=h.PropTypes,k=h.createClass({displayName:'UFIReplyLink',propTypes:{onClick:j.func},render:function(){return (h.createElement('a',{className:"UFIReplyLink",href:"#",onClick:this.props.onClick},i._("Reply")));}});f.exports=k;},null);
__d('UFISpamCount',['UFISpamCountImpl'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('UFISpamCountImpl').module||{enabled:false};},null);
__d('UFICommentActions.react',['React','ReactFragment','TrackingNodes','UFIAddCommentAction','UFICommentAction','UFICommentLikeCount.react','UFICommentMetadata.react','UFIConfig','UFIConstants','UFIPrivateReplyLink.react','UFIReplyLink.react','UFISpamCount','cx','fbt','PagesPrivateReplyConstants'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){if(c.__markCompiled)c.__markCompiled();'use strict';var v=c('PagesPrivateReplyConstants').Status,w=h.PropTypes,x=p.UFIStatus,y=' \u00b7 ',z="fsm fwn fcg UFICommentActions",aa="UFIDeletedMessageIcon",ba="UFIDeletedMessage",ca=h.createClass({displayName:'UFICommentActions',propTypes:{comment:w.object.isRequired,contextArgs:w.object.isRequired,feedback:w.object.isRequired,hideAsSpamForPageAdmin:w.bool,markedAsSpamHere:w.bool,onCommentReply:w.func,permalink:w.string,shareLink:w.string,shortenTimestamp:w.bool,showPermalink:w.bool,isStreaming:w.bool,showReplyLink:w.bool,viewerCanMarkNotSpam:w.bool},contextTypes:{dispatch:w.func},render:function(){var da=this.props,ea=da.comment,fa=da.permalink,ga=da.feedback,ha=da.markedAsSpamHere,ia=ea.status===x.SPAM_DISPLAY,ja=da.showReplyLink,ka=da.hideAsSpamForPageAdmin,la,ma,na,oa,pa,qa,ra,sa,ta=!ea.islocal&&ea.status!==x.LIVE_DELETED;if(ta){if(ia&&!ha){if(da.viewerCanMarkNotSpam)la=h.createElement('a',{onClick:(function(event){return this.context.dispatch(l.markAsNotSpam(ea,event));}).bind(this),className:"UFICommentNotSpamLink",href:"#",role:"button"},u._("Unhide"));if(ka&&ga.isthreaded&&ea.cancomment&&ja)qa=h.createElement(r,{comment:ea,onClick:da.onCommentReply,contextArgs:da.contextArgs});}else{if(ea.viewercanlike){var ua=j.getTrackingInfo(ea.hasviewerliked?j.types.UNLIKE_LINK:j.types.LIKE_LINK),va=ea.hasviewerliked?u._("Unlike this comment"):u._("Like this comment");ma=h.createElement('a',{className:"UFILikeLink",'data-ft':ua,href:"#",onClick:(function(event){return this.context.dispatch(l.toggleLike(ea,event.target));}).bind(this),role:"button",title:va},ea.hasviewerliked?u._("Unlike"):u._("Like"));}if(this.props.contextArgs.simplereply&&this.props.feedback.cancomment||ga.isthreaded&&ea.cancomment&&ja||!!ea.parentcommentid&&o.showReplyToReply)qa=h.createElement(r,{comment:ea,contextArgs:da.contextArgs,onClick:da.onCommentReply});if(ea.likecount>0)oa=h.createElement(m,{comment:ea,contextArgs:da.contextArgs});if(ea.spamcount&&s.enabled)pa=h.createElement(s,{count:ea.spamcount});if(ea.messagereply&&(ea.messagereply.hasReplyPermission&&ga.actorforpost===ea.messagereply.pageID||ea.messagereply.status===v.ALREADY_REPLIED))ra=h.createElement(q,{actorID:ga.actorforpost,activityID:ea.id,context:ea.messagereply});}if(ea.attachment&&ea.attachment.type=="share"&&ea.canremove)sa=h.createElement('a',{href:"#",onClick:(function(event){return this.context.dispatch(l.removePreview(ea,event.target));}).bind(this),role:"button"},u._("Remove Preview"));if(this.props.contextArgs.shareablecomments)na=h.createElement('a',{className:"share_action_link",href:da.comment.commentshareuri,role:"button",rel:"dialog",title:u._("Share this comment")},u._("Share"));}var wa=h.createElement(n,{comment:ea,onRetrySubmit:(function(){return this.context.dispatch(k.retrySubmit(ea));}).bind(this),permalink:fa,shortenTimestamp:da.shortenTimestamp,showPermalink:da.showPermalink}),xa;if(da.isStreaming){xa={likeCount:oa,spamCount:pa,likeToggle:ma,spamToggle:la};}else if(ga.isqanda){xa={likeCount:oa,spamCount:pa,likeToggle:ma,commentReply:qa,shareComment:na,messageReply:ra,spamToggle:la,metadata:wa,removePreview:sa};}else if(da.contextArgs.entstream){xa={metadata:wa,likeToggle:ma,likeCount:oa,commentReply:qa,messageReply:ra,shareComment:na,spamCount:pa,spamToggle:la,removePreview:sa};}else if(ga.isthreaded){xa={likeToggle:ma,commentReply:qa,messageReply:ra,spamToggle:la,removePreview:sa,shareComment:na,likeCount:oa,spamCount:pa,metadata:wa};}else xa={metadata:wa,likeToggle:ma,shareComment:na,likeCount:oa,spamCount:pa,commentReply:qa,messageReply:ra,spamToggle:la,removePreview:sa};if(ea.status===x.LIVE_DELETED){var ya=h.createElement('span',{className:ba},h.createElement('i',{className:aa,'data-hover':"tooltip",'aria-label':u._("Comment deleted")}));xa.deletionWarning=ya;}var za=true,ab={};for(var bb in xa){var cb=xa[bb];if(cb){ab[bb]=za?cb:i.create({MIDDOT:y,action:cb});za=false;}}return (h.createElement('div',{className:z},i.create(ab)));}});f.exports=ca;},null);
__d('UFISocialContext.react',['HovercardLink','ProfileBrowserLink','ProfileBrowserTypes','React','URI','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();'use strict';var n=k.PropTypes,o=27,p=k.createClass({displayName:'UFISocialContext',propTypes:{commentAuthor:n.object.isRequired,otherMutualCount:n.number.isRequired,topMutualFriend:n.object.isRequired},render:function(){var q=this.props.topMutualFriend,r=this.props.otherMutualCount,s=this.props.commentAuthor,t=h.constructEndpoint(q).toString(),u=k.createElement('a',{href:q.uri,'data-hovercard':t,key:"top"},q.name),v=s.name.length+q.name.length,w;if(r===0){w=m._("Friends with {name}",[m.param('name',u)]);}else if(v<o){var x;if(r==1){x=m._("1 other");}else x=m._({"*":"{count} others"},[m.param('count',r,[0])]);w=m._("Friends with {name} and {others}",[m.param('name',u),m.param('others',this.getOthersLink(x,s,q))]);}else{var y=m._({"*":"{count} mutual friends"},[m.param('count',r+1,[0])]);w=this.getOthersLink(y,s);}return (k.createElement('span',{className:"UFICommentSocialContext"},w));},getOthersLink:function(q,r,s){var t=j.MUTUAL_FRIENDS,u={uid:r.id},v=new l('/ajax/mutual_friends/tooltip.php').setQueryData({friend_id:r.id});if(s)v.addQueryData({exclude_id:s.id});var w=i.constructDialogURI(t,u).toString();return (k.createElement('a',{ajaxify:w,'data-hover':"tooltip",'data-tooltip-alignh':"center",'data-tooltip-uri':v.toString(),href:i.constructPageURI(t,u).toString(),key:"others",rel:"dialog"},q));}});f.exports=p;},null);
__d('UFICommentAuthorName.react',['Badge.react','React','TrackingNodes','UFIActor.react','UFISocialContext.react'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();'use strict';var m=i.PropTypes,n=i.createClass({displayName:'UFICommentAuthorName',propTypes:{author:m.object.isRequired,authorProfiles:m.object.isRequired,showHovercard:m.bool,isAuthorWeakReference:m.bool,focusOnMount:m.bool,groupOrEventID:m.number,isFeatured:m.bool,socialContext:m.object,useFirstName:m.bool},render:function(){var o=this.props,p=o.author,q=j.getTrackingInfo(j.types.USER_NAME);return (i.createElement(k,{author:p,showHovercard:o.showHovercard,key:"author",focusOnMount:o.focusOnMount,'data-ft':q,isAuthorWeakReference:o.isAuthorWeakReference,groupOrEventID:o.groupOrEventID,useFirstName:o.useFirstName},o.isFeatured?i.createElement(h,{key:"badge",size:"xsmall",type:"verified"}):null,o.socialContext?i.createElement(l,{topMutualFriend:o.authorProfiles[o.socialContext.topmutualid],otherMutualCount:o.socialContext.othermutualcount,commentAuthor:p}):null));}});f.exports=n;},null);
__d('UFICommentBody.react',['Locale','React','TrackingNodes','TruncatedTextWithEntities.react','UnicodeBidi','UFICommentUtils.react','UFIConfig','UFIConstants','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();'use strict';var q=i.PropTypes,r=i.createClass({displayName:'UFICommentBody',propTypes:{commentText:q.string.isRequired,commentRanges:q.array,groupOrEventID:q.number,useWhitespacesRender:q.bool,maxLength:q.number,maxLines:q.number,socialContext:q.object},render:function(){var s=this.props,t=s.commentText,u=j.getTrackingInfo(j.types.USER_MESSAGE),v=l.isDirectionLTR(t),w=!v,x=v&&h.isRTL()?'ltr':w&&!h.isRTL()?'rtl':null,y=m.getCommentBodyInterpolator(s.groupOrEventID),z=i.createElement(k,{key:"comment-body",className:' '+"UFICommentBody"+(this.props.useWhitespacesRender?' '+"UFICommentBodyPreserveWhitespace":''),interpolator:y,ranges:s.commentRanges,text:t,truncationPercent:o.commentTruncationPercent,maxLength:s.maxLength,maxLines:s.maxLines,renderEmoticons:n.renderEmoticons,renderEmoji:n.renderEmoji,'data-ft':u,dir:x});if(s.socialContext){z=i.createElement('div',{key:"body"},z);}else{var aa=(v&&h.isRTL()?' '+"_5wjy":'')+(v&&h.isRTL()?' '+"_5wjz":'')+(w&&!h.isRTL()?' '+"_5wj-":'')+(w&&!h.isRTL()?' '+"_5wj_":'');z=aa?i.createElement('div',{key:"body",className:aa},z):[' ',z];}return i.createElement('span',null,z);}});f.exports=r;},null);
__d('XUIEditButton.react',['XUIAbstractGlyphButton.react','React','cx','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=Object.assign||function(o){for(var p=1;p<arguments.length;p++){var q=arguments[p];for(var r in q)if(Object.prototype.hasOwnProperty.call(q,r))o[r]=q[r];}return o;},n=i.createClass({displayName:'XUIEditButton',render:function(){var o=this.props.label,p=this.props.title;if(!this.props.title&&!this.props.tooltip){if(!o)o=k._("Edit");p=o;}return (i.createElement(h,m({},this.props,{label:o,title:p,'aria-label':this.props.tooltip,'data-hover':this.props.tooltip&&'tooltip','data-tooltip-alignh':this.props.tooltip&&'center',className:l(this.props.className,"_5upq _5upr")})));}});f.exports=n;},null);
__d('UFICommentMenu.react',['Bootloader','React','XUICloseButton.react','XUIEditButton.react','keyMirror'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();'use strict';var m=Object.assign||function(u){for(var v=1;v<arguments.length;v++){var w=arguments[v];for(var x in w)if(Object.prototype.hasOwnProperty.call(w,x))u[x]=w[x];}return u;},n=i.PropTypes,o,p,q,r,s=l({EDIT:true,CLOSE:true}),t=i.createClass({displayName:'UFICommentMenu',propTypes:{menuData:n.array,menuType:n.oneOf(Object.keys(s)).isRequired,onAction:n.func,onClick:n.func},getInitialState:function(){return {bootloading:false,bootloaded:false,needsExpand:false};},onClickGuard:function(event){if(this.state.bootloading){return;}else if(!this.state.bootloaded&&this.props.menuData){this.setState({bootloading:true});h.loadModules(["ContextualDialogArrow","PopoverMenu.react","ReactXUIMenu"],(function(u,v,w){o=u,p=v;q=w;r=q.Item;this.setState({bootloading:false,bootloaded:true,needsExpand:true});}).bind(this));}else if(this.props.onClick)this.props.onClick(event);},shouldComponentUpdate:function(u,v,w){if(this.state.needsExpand&&!v.needsExpand)return false;return true;},render:function(){var u=null;if(this.props.menuType===s.EDIT){u=k;}else u=j;if(this.props.menuData&&this.state.bootloaded){var v=this.props.menuData.map(function(x){return (i.createElement(r,{'data-testid':x.testid,key:x.value,value:x.value},x.label));}),w=i.createElement(q,{onItemClick:this.props.onAction},v);return (i.createElement(p,m({},this.props,{alignh:"right",layerBehaviors:[o],menu:w,ref:"menu"}),i.createElement(u,{href:"#",onClick:this.onClickGuard})));}return i.createElement(u,m({},this.props,{href:"#",onClick:this.onClickGuard}));},componentDidUpdate:function(){if(this.state.needsExpand){this.refs.menu.showPopover();this.setState({needsExpand:false});}}});t.MenuType=s;f.exports=t;},null);
__d('UFIComment.react',['Bootloader','HovercardLink','Image.react','React','TrackingNodes','TextWithEntities.react','UFIBusinessActorIcon.react','UFIClassNames','UFICommentAction','UFICommentActions.react','UFICommentAttachment.react','UFICommentAuthorName.react','UFICommentBody.react','UFICommentMenu.react','UFICommentUtils.react','UFIConfig','UFIConstants','UFIImageBlock.react','UFITranslationConstants','URI','XUICloseButton.react','cx','emptyFunction','joinClasses','keyMirror','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga){if(c.__markCompiled)c.__markCompiled();'use strict';var ha=k.PropTypes,ia=x.UFIStatus,ja=fa({edit:true,hide:true,remove:true}),ka='ufi_comment_close_button',la='ufi_comment_menu_delete',ma='ufi_comment_menu_edit',na='ufi_comment_menu_hide',oa="UFITranslateLink",pa="UFITranslatedText",qa="UFITranslationErrorText",ra="UFITranslateAttribution",sa="fcg",ta=null,ua=function(xa){var ya=xa.status;return ya===ia.FAILED_ADD||ya===ia.FAILED_EDIT;};function va(xa){return xa.commenterIsFOF!==undefined&&xa.userIsMinor!==undefined&&xa.reportLink!==undefined;}var wa=k.createClass({displayName:'UFIComment',propTypes:{authorProfiles:ha.object.isRequired,comment:ha.object.isRequired,contextArgs:ha.object.isRequired,feedback:ha.object.isRequired,'data-ft':ha.string,focusOnMount:ha.bool,hasPartialBorder:ha.bool,hideAsSpamForPageAdmin:ha.bool,isFeatured:ha.bool,isFirst:ha.bool,isFirstCommentComponent:ha.bool,isFirstComponent:ha.bool,isLast:ha.bool,isLastCommentComponent:ha.bool,isLastComponent:ha.bool,isLocallyComposed:ha.bool,isReply:ha.bool,onBlingBoxClick:ha.func,onCommentReply:ha.func,permalink:ha.string,shortenTimestamp:ha.bool,showPermalink:ha.bool,isStreaming:ha.bool,showRemoveReportMenu:ha.bool,showReplyLink:ha.bool,viewerIsAuthor:ha.bool},contextTypes:{dispatch:ha.func},getInitialState:function(){return {isHighlighting:this.props.comment.highlightcomment,wasHighlighted:this.props.comment.highlightcomment,markedAsSpamHere:false,isInlinePageDeleted:false,isInlineBanned:false};},_onHideAsSpam:function(event){this.context.dispatch(p.markAsSpam(this.props.comment,event));this.setState({markedAsSpamHere:true});},_onMarkAsNotSpam:function(event){this.context.dispatch(p.markAsNotSpam(this.props.comment,event));this.setState({markedAsSpamHere:false});},_onDeleteSpam:function(event){this.context.dispatch(p.remove(this.props.comment,event.target,(function(){return this.setState({isInlinePageDeleted:true});}).bind(this)));},_onRemove:function(event){this.context.dispatch(p.remove(this.props.comment,event.target,da));},_onInlineBan:function(event){this.context.dispatch(p.inlineBan(this.props.comment,event,this.props.feedback.ownerid));this.setState({isInlineBanned:true});},_onUndoInlineBan:function(event){this.context.dispatch(p.undoInlineBan(this.props.comment,event,this.props.feedback.ownerid));this.setState({isInlineBanned:false});},_onAction:function(event,xa){var ya=xa.item,za=ya.getValue();setTimeout((function(){if(za===ja.remove){this._onRemove(event);}else if(za===ja.edit){this.context.dispatch(p.edit(this.props.comment));}else if(za===ja.hide)this._onHideAsSpam(event);}).bind(this),0);},_createRemoveReportMenuData:function(){return [{testid:la,value:ja.remove,label:ga._("Delete Comment...")},{testid:na,value:ja.hide,label:ga._("Hide Comment")}];},_createEditDeleteMenuData:function(){return [{testid:ma,value:ja.edit,label:ga._("Edit...")},{testid:la,value:ja.remove,label:ga._("Delete...")}];},_renderCloseButton:function(){if(this.props.isStreaming)return null;var xa=this.props.comment,ya=null,za=null,ab=null,bb=false;if(xa.canremove&&!this.props.hideAsSpamForPageAdmin){if(this.props.viewerIsAuthor&&xa.canedit){ab=ga._("Edit or Delete");za=this._createEditDeleteMenuData();bb=true;}else if(this.props.showRemoveReportMenu){ab=ga._("Remove or Report");za=this._createRemoveReportMenuData();}else{ab=ga._("Remove");ya=this._onRemove;}}else if(xa.canreport){ab=ga._("Hide");ya=this._onHideAsSpam;}var cb=' '+"UFICommentCloseButton"+(ya===null&&za===null?' '+"hdn":''),db=null,eb=null;if(this.props.contextArgs.viewas){db="/ajax/profile/link_disabled_in_viewas.php";eb="dialog";ya=null;}var fb=bb?u.MenuType.EDIT:u.MenuType.CLOSE;return (k.createElement(u,{ajaxify:db,className:cb,'data-testid':ka,onClick:ya,rel:eb,tooltip:ab,menuData:za,menuType:fb,onAction:this._onAction}));},_renderFakeCloseButton:function(){return (k.createElement(ba,{className:"UFICommentCloseButtonFake",tabIndex:"-1"}));},componentDidMount:function(){if(this.state.isHighlighting){var xa=k.findDOMNode(this),ya=parseInt(this.props.comment.scrolltopoffset||0,10);h.loadModules(["UFIScrollHighlight"],function(za){setTimeout(za.actOn.bind(null,xa,ya),0);});this.setState({isHighlighting:false});}},shouldComponentUpdate:function(xa,ya){var za=this.props,ab=this.state;return (xa.comment!==za.comment||xa.showReplyLink!==za.showReplyLink||xa.isFirst!==za.isFirst||xa.isLast!==za.isLast||xa.isFirstCommentComponent!==za.isFirstCommentComponent||xa.isLastCommentComponent!==za.isLastCommentComponent||xa.isFirstComponent!==za.isFirstComponent||xa.isLastComponent!==za.isLastComponent||xa.isFeatured!==za.isFeatured||xa.hasPartialBorder!==za.hasPartialBorder||ya.wasHighlighted!==ab.wasHighlighted||ya.isHighlighting!==ab.isHighlighting||ya.markedAsSpamHere!==ab.markedAsSpamHere||ya.isInlinePageDeleted!==ab.isInlinePageDeleted||ya.isInlineBanned!==ab.isInlineBanned);},render:function(){var xa=this.props.comment,ya=this.props.feedback,za=xa.status===ia.DELETED,ab=xa.status===ia.LIVE_DELETED,bb=xa.status===ia.SPAM_DISPLAY,cb=this.state.markedAsSpamHere,db=this.state.isInlinePageDeleted,eb=this.props.hideAsSpamForPageAdmin,fb=this.state.isInlineBanned,gb=va(xa),hb=!xa.status&&(xa.isunseen||xa.islocal);if(!xa.status&&ya.lastseentime){var ib=xa.originalTimestamp||xa.timestamp.time;hb=hb||ib>ya.lastseentime;}var jb=this.props.contextArgs.markedcomments;if(jb&&jb[xa.legacyid])hb=true;var kb=(this.props.isFirst?' '+"UFIFirstComment":'')+(this.props.isLast?' '+"UFILastComment":'')+(this.props.isFirstCommentComponent?' '+"UFIFirstCommentComponent":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":'');if(gb)if(ta){var lb,mb=null,nb=null,ob=null;if(eb){nb=fb?this._onUndoInlineBan:this._onInlineBan;if(db){lb=ga._("You've deleted this comment so no one can see it.");}else if(cb){lb=ga._("Now this is only visible to the person who wrote it and their friends.");ob=this._onDeleteSpam;mb=this._onMarkAsNotSpam;}}else if(cb){lb=ga._("This comment has been hidden.");ob=this._onDeleteSpam;mb=this._onMarkAsNotSpam;}if(lb)return (k.createElement('li',{className:ea(o.ROW,kb,"UFIHide")},k.createElement(ta,{notice:lb,comment:this.props.comment,authorProfiles:this.props.authorProfiles,onUndo:mb,onBanAction:nb,onDeleteAction:ob,isInlineBanned:fb,isInlinePageDeleted:db,hideAsSpamForPageAdmin:eb,pageID:this.props.feedback.ownerid})));}else h.loadModules(["UFICommentRemovalControls.react"],(function(sb){ta=sb;setTimeout((function(){this.forceUpdate();}).bind(this));}).bind(this));var pb=!za,qb=ea(o.ROW,kb,' '+"UFIComment"+(ua(xa)?' '+"UFICommentFailed":'')+(za||ab||bb?' '+"UFITranslucentComment":'')+(this.state.isHighlighting?' '+"highlightComment":'')+(!pb?' '+"noDisplay":'')+(pb?' '+"display":'')+(' '+"UFIComponent")+(this.props.hasPartialBorder?' '+"UFIPartialBorder":'')),rb=this.renderComment();if(hb)qb=ea(qb,o.UNSEEN_ITEM);return (k.createElement('li',{className:qb,'data-ft':this.props['data-ft']},rb));},renderComment:function(){var xa=this.props,ya=xa.comment,za=ya.body.text,ab=v.shallowCopyRanges(ya.body.ranges),bb=xa.permalink,cb=xa.feedback,db=xa.authorProfiles[ya.author],eb=ya.status===ia.SPAM_DISPLAY,fb=ya.status===ia.LIVE_DELETED,gb=!(eb||fb),hb=cb.canremoveall||ya.hiddenbyviewer;za=v.getCommentTextWithTruncatedURIs(ab,za);var ib=null,jb=null;if(!xa.isLocallyComposed&&!this.state.wasHighlighted){jb=x.commentTruncationLength;ib=x.commentTruncationMaxLines;}var kb=l.getTrackingInfo(l.types.SMALL_ACTOR_PHOTO),lb=l.getTrackingInfo(l.types.USER_MESSAGE),mb=null,nb=null,ob=null,pb=null;if(ya.istranslatable&&ya.translatedbody===undefined)mb=k.createElement('a',{href:"#",role:"button",title:ga._("Translate this comment"),className:oa,onClick:(function(event){return this.context.dispatch(p.translate(ya,event));}).bind(this)},ga._("See Translation"));if(ya.translatedbody!==undefined)if(ya.translatedbody!==null&&ya.translatedbody.text!==''){var qb=z.BING_PAGE_URL,rb=z.BING_TRANSLATOR_APP,sb=null;if(ya.translatorapp===rb){var tb=new aa(qb).addQueryData({text:za});sb=k.createElement('a',{href:tb.toString(),target:"_blank",className:sa},ga._("Translated by Bing"));}else sb=ga._("Automatically Translated");pb=k.createElement('span',{className:ra},sb);var ub=v.shallowCopyRanges(ya.translatedbody.ranges),vb=ya.translatedbody.text,wb=ya.translatedbody.dir,xb=k.createElement('span',{key:"comment-body",'data-ft':lb,dir:wb},k.createElement(m,{className:' '+"UFICommentBody"+(this.props.contextArgs.useWhitespacesRender?' '+"UFICommentBodyPreserveWhitespace":''),interpolator:v.getCommentBodyInterpolator(xa.feedback.grouporeventid),ranges:ub,text:vb,renderEmoticons:w.renderEmoticons,renderEmoji:w.renderEmoji}));nb=k.createElement('span',{className:pa},xb);}else ob=k.createElement('span',{className:qa},ga._("No Translation Available"));var yb=k.createElement(t,{socialContext:ya.socialcontext,commentText:za,commentRanges:ab,groupOrEventID:cb.grouporeventid,useWhitespacesRender:this.props.contextArgs.useWhitespacesRender,maxLength:jb,maxLines:ib}),zb=xa.contextArgs.viewas?null:i.constructEndpointWithGroupAndLocation(db,cb.grouporeventid,'ufi',ya.isauthorweakreference).toString(),ac=k.createElement(s,{author:db,authorProfiles:xa.authorProfiles,showHovercard:!!zb,isAuthorWeakReference:ya.isauthorweakreference,focusOnMount:xa.focusOnMount,groupOrEventID:cb.grouporeventid,isFeatured:xa.isFeatured,socialContext:ya.socialcontext}),bc=null;if(ya.photo_comment_status)bc=k.createElement('div',{className:"_50f8"},ya.photo_comment_status);var cc=null;if(ya.sticker_attachment_status)cc=k.createElement('div',{className:"_50f8"},ya.sticker_attachment_status);var dc=null;if(ya.status!==ia.DELETED&&!xa.isStreaming)dc=k.createElement(r,{comment:xa.comment});var ec=db.isBusinessPersona?k.createElement(n,{initials:db.initials,hash:db.hash,classNames:o.ACTOR_IMAGE}):k.createElement(j,{src:db.thumbSrc,className:o.ACTOR_IMAGE,alt:""});if(db.uri)ec=k.createElement('a',{'data-ft':kb,'data-hovercard':zb,href:db.uri},ec);return (k.createElement(y,{spacing:"medium"},ec,k.createElement('div',{className:"UFICommentContentBlock"},k.createElement('div',{className:"UFICommentContent"},ac,yb,mb,nb,pb,ob,dc),bc,cc,k.createElement(q,{comment:ya,feedback:cb,onBlingBoxClick:xa.onBlingBoxClick,onCommentReply:xa.onCommentReply,onMarkAsNotSpam:(function(event){return this.context.dispatch(p.markAsNotSpam(ya,event));}).bind(this),permalink:bb,viewerCanMarkNotSpam:hb,shortenTimestamp:xa.shortenTimestamp,showPermalink:xa.showPermalink,isStreaming:xa.isStreaming,showReplyLink:xa.showReplyLink,contextArgs:xa.contextArgs,markedAsSpamHere:this.state.markedAsSpamHere,hideAsSpamForPageAdmin:xa.hideAsSpamForPageAdmin}),gb?this._renderCloseButton():null),gb?this._renderFakeCloseButton():null));}});f.exports=wa;},null);
__d('UFIContainer.react',['React','cx'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=h.createClass({displayName:'UFIContainer',render:function(){var k=null;if(this.props.hasNub)k=h.createElement('li',{className:"UFIArrow"},h.createElement('i',null));var l=(!this.props.isReplyList?' '+"UFIList":'')+(this.props.isReplyList?' '+"UFIReplyList":'')+(this.props.isParentLiveDeleted?' '+"UFITranslucentReplyList":'')+(this.props.isFirstCommentComponent?' '+"UFIFirstCommentComponent":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":'');return (h.createElement('ul',{className:l},k,this.props.children));}});f.exports=j;},null);
__d('UFIInlineShareConfirmation.react',['React','UFIClassNames','UFIImageBlock.react','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=h.PropTypes,n=[m.object,m.string],o=h.createClass({displayName:'UFIInlineShareConfirmation',propTypes:{isError:m.bool.isRequired,isFirstComponent:m.bool,isLastComponent:m.bool,message:m.oneOfType(n).isRequired},render:function(){var p=l(i.ROW,' '+"UFIInlineShareConfirmation"+(this.props.isError?' '+"UFIInlineShareError":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''));return (h.createElement('li',{className:p},h.createElement(j,null,h.createElement('i',{className:"UFIConfirmationIcon"}),this._getText())));},_getText:function(){if(this.props.message.__html)return h.createElement('span',{dangerouslySetInnerHTML:this.props.message});return h.createElement('span',null,this.props.message);}});f.exports=o;},null);
__d('UFILikeSentenceText.react',['ActorURI','HovercardLinkInterpolator','ProfileBrowserLink','ProfileBrowserTypes','React','TextWithEntities.react','URI','XUFIReactionProfileBrowserController','XUFIReactionProfileDialogController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=l.PropTypes;function r(t,u,v,w){if(w.count!=null){var x=k.LIKES,y={id:t.targetfbid,actorid:t.actorid},z=[],aa;for(var ba=0;ba<u.length;ba++)if(!u[ba].count){aa=u[ba];var ca=aa.entity;z.push(ca.id);}var da=new n('/ajax/like/tooltip.php').setQueryData({comment_fbid:t.targetfbid,comment_from:t.actorforpost,seen_user_fbids:z.length?z:true});da=h.create(da,t.actorforpost);var ea,fa;if(t.displayreactions){ea=p.getURIBuilder().setString('ft_ent_identifier',t.entidentifier).getURI();ea=h.create(ea,t.actorforpost);fa=o.getURIBuilder().setString('ft_ent_identifier',t.entidentifier).getURI();fa=h.create(fa,t.actorforpost);}else{ea=j.constructDialogURI(x,y).toString();fa=j.constructPageURI(x,y).toString();}return (l.createElement('a',{'data-testid':"n_other_people_link",className:"UFINoWrap",rel:"dialog",ajaxify:ea,href:fa,'data-hover':"tooltip",'data-tooltip-alignh':"center",'data-tooltip-uri':da.toString(),role:"button"},v));}else return i(v,w,null,null,'ufi');}var s=l.createClass({displayName:'UFILikeSentenceText',propTypes:{contextArgs:q.object.isRequired,feedback:q.object.isRequired,likeSentenceData:q.object.isRequired},render:function(){var t=this.props.feedback,u=this.props.likeSentenceData,v,w=u.aggregatedranges||u.aggregated_ranges;v=r;v=v.bind(null,t,u.ranges);return (l.createElement(m,{interpolator:v,ranges:u.ranges,aggregatedRanges:w,text:u.text}));}});f.exports=s;},null);
__d('UFILikeSentence.react',['Bootloader','LeftRight.react','ProfileBrowserLink','ProfileBrowserTypes','React','UFIClassNames','UFIImageBlock.react','UFILikeSentenceText.react','UFIStoryAction','URI','cx','joinClasses','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u=l.PropTypes,v=l.createClass({displayName:'UFILikeSentence',propTypes:{contextArgs:u.object.isRequired,feedback:u.object.isRequired,isFirstComponent:u.bool,isLastComponent:u.bool,onOrderingModeChange:u.func,showOrderingModeSelector:u.bool},contextTypes:{dispatch:u.func},getInitialState:function(){return {selectorModule:null,bootloadedSelectorModule:false};},componentWillMount:function(){this._bootloadSelectorModule(this.props);},componentWillReceiveProps:function(w){this._bootloadSelectorModule(w);},_bootloadSelectorModule:function(w){if(w.showOrderingModeSelector&&!this.state.bootloadedSelectorModule){var x=(function(y){this.setState({selectorModule:y});}).bind(this);if(w.contextArgs.entstream){h.loadModules(["UFIEntStreamOrderingModeSelector.react"],x);}else h.loadModules(["UFIOrderingModeSelector.react"],x);this.setState({bootloadedSelectorModule:true});}},render:function(){var w=this.props.feedback,x=w.likesentences.current||{},y=this.props.contextArgs.entstream,z=s(m.ROW,w.likesentences.isunseen?m.UNSEEN_ITEM:'',' '+"UFILikeSentence"+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":'')),aa=null,ba=null;if(x.text)ba=l.createElement('div',{className:"UFILikeSentenceText"},l.createElement(o,{contextArgs:this.props.contextArgs,feedback:w,likeSentenceData:x}));var ca=this.props.contextArgs.ufiexperiments||{};if(ba&&!y&&!ca.showSlimUFI){aa=l.createElement('i',{className:"UFILikeIcon"});if(w.viewercanlike&&!w.hasviewerliked)aa=l.createElement('a',{className:"UFILikeThumb",href:"#",tabIndex:"-1",title:t._("Like this"),onClick:(function(event){this.context.dispatch(p.toggleLike(event.target));event.preventDefault();}).bind(this),role:"button",'aria-label':t._("Like this")},aa);}var da=ba,ea=null;if(w.seencount>0&&!y){var fa=k.GROUP_MESSAGE_VIEWERS,ga={id:w.targetfbid},ha=j.constructDialogURI(fa,ga),ia=j.constructPageURI(fa,ga),ja=new q('/ajax/ufi/seen_tooltip.php').setQueryData({ft_ent_identifier:w.entidentifier,displayed_count:w.seencount}),ka;if(w.seenbyall){ka=t._("Seen by everyone");}else ka=w.seencount==1?t._("Seen by 1"):t._("Seen by {count}",[t.param('count',w.seencount)]);ea=l.createElement('a',{rel:"dialog",ajaxify:ha.toString(),href:ia.toString(),'data-hover':'tooltip','data-tooltip-alignh':'left','data-tooltip-uri':ja.toString(),className:' '+"UFISeenCount"+(!!x.text?' '+"UFISeenCountRight":'')},l.createElement('span',{className:"UFISeenCountIcon"}),ka);}else if(this.props.showOrderingModeSelector&&this.state.selectorModule){var la=this.state.selectorModule;ea=l.createElement(la,{entstream:y,orderingmodes:w.orderingmodes,onOrderChanged:(function(na){return this.context.dispatch(p.changeOrderingMode(na));}).bind(this)});if(!da)da=l.createElement('div',null);}var ma=null;if(aa&&ba){ma=l.createElement(n,null,aa,ba,ea);}else if(da){ma=l.createElement(i,{direction:i.DIRECTION.right},da,ea);}else ma=ea;return (l.createElement('li',{className:z},ma));}});f.exports=v;},null);
__d('UFIPager.react',['LeftRight.react','React','UFIClassNames','UFIImageBlock.react','XUISpinner.react','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=i.PropTypes,p=i.createClass({displayName:'UFIPager',propTypes:{contextArgs:o.object.isRequired,pagerLabel:o.string.isRequired,'data-ft':o.string,countSentence:o.string,isFirstCommentComponent:o.bool,isFirstComponent:o.bool,isLastCommentComponent:o.bool,isLastComponent:o.bool,isLoading:o.bool,isReply:o.bool,isUnseen:o.bool,onPagerClick:o.func},onPagerClick:function(q){!this.props.isLoading&&this.props.onPagerClick&&this.props.onPagerClick();q.nativeEvent.prevent();},render:function(){var q=this.onPagerClick,r=n(j.ROW,this.props.isUnseen?j.UNSEEN_ITEM:'',' '+"UFIPagerRow"+(' '+"UFIComponent")+(this.props.isFirstCommentComponent?' '+"UFIFirstCommentComponent":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":'')),s=null;if(this.props.isLoading)s=i.createElement(l,{className:"mls",background:"light",size:"small"});var t=i.createElement('a',{className:"UFIPagerLink",onClick:q,href:"#",role:"button"},this.props.pagerLabel,s),u=' '+"fcg"+(' '+"UFIPagerCount"),v=i.createElement('span',{className:u},this.props.countSentence),w,x=this.props.contextArgs.ufiexperiments||{};if(this.props.contextArgs.entstream||x.showSlimUFI&&!this.props.isReply){w=i.createElement(h,{direction:h.DIRECTION.right},t,v);}else w=i.createElement(k,null,i.createElement('a',{className:"UFIPagerIcon",onClick:q,href:"#",role:"button"}),t,v);return (i.createElement('li',{className:r,'data-ft':this.props['data-ft']},w));}});f.exports=p;},null);
__d('UFIPagerLabel',['fbt','intlList','NumberFormat'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={VIEW_ONE:'view_one',VIEW_ONE_MORE:'view_one_more',VIEW_ALL:'view_all',VIEW_MORE_EXPLICIT:'view_more_explicit',VIEW_MORE:'view_more',VIEW_PREVIOUS:'view_previous',_getReplyLabel:function(l,m){var n;switch(l){case k.VIEW_ONE:return h._("View 1 reply");case k.VIEW_ONE_MORE:return h._("View 1 more reply");case k.VIEW_ALL:n=j.formatIntegerWithDelimiter(m.count,m.delimiter);return h._({"*":"View all {count} replies"},[h.param('count',n,[0,m.count])]);case k.VIEW_MORE_EXPLICIT:n=j.formatIntegerWithDelimiter(m.count,m.delimiter);return h._({"*":"View {count} more replies"},[h.param('count',n,[0,m.count])]);case k.VIEW_MORE:return h._("View more replies");case k.VIEW_PREVIOUS:return h._("View previous replies");default:return null;}},_getCommentLabel:function(l,m){if(m.commenters)return this._getCommentLabelWithCommentSentence(l,m);var n;switch(l){case k.VIEW_ONE:return h._("View 1 comment");case k.VIEW_ONE_MORE:return h._("View 1 more comment");case k.VIEW_ALL:n=j.formatIntegerWithDelimiter(m.count,m.delimiter);return h._({"*":"View all {count} comments"},[h.param('count',n,[0,m.count])]);case k.VIEW_MORE_EXPLICIT:n=j.formatIntegerWithDelimiter(m.count,m.delimiter);return h._({"*":"View {count} more comments"},[h.param('count',n,[0,m.count])]);case k.VIEW_MORE:return h._("View more comments");case k.VIEW_PREVIOUS:return h._("View previous comments");default:return null;}},_getCommentLabelWithCommentSentence:function(l,m){var n=i(m.commenters),o=m.othersCount,p=j.formatIntegerWithDelimiter(o,m.delimiter),q=j.formatIntegerWithDelimiter(m.count,m.delimiter);switch(l){case k.VIEW_ONE:return h._("View 1 comment from {names}",[h.param('names',n)]);case k.VIEW_ONE_MORE:return h._("View 1 more comment from {names}",[h.param('names',n)]);case k.VIEW_ALL:switch(o){case 0:return h._({"*":"View all {count} comments from {names}"},[h.param('count',q,[0,m.count]),h.param('names',n)]);case 1:return h._({"*":"View all {count} comments from {names} and 1 other person"},[h.param('count',q,[0,m.count]),h.param('names',n)]);default:return h._({"*":{"*":"View all {count} comments from {names} and {othersCount} others"}},[h.param('count',q,[0,m.count]),h.param('names',n),h.param('othersCount',p,[0,o])]);}break;case k.VIEW_MORE_EXPLICIT:case k.VIEW_MORE:switch(o){case 0:return h._("View more comments from {names}",[h.param('names',n)]);case 1:return h._("View more comments from {names} and 1 other person",[h.param('names',n)]);default:return h._({"*":"View more comments from {names} and {othersCount} others"},[h.param('names',n),h.param('othersCount',p,[0,o])]);}break;case k.VIEW_PREVIOUS:switch(o){case 0:return h._("View previous comments from {names}",[h.param('names',n)]);case 1:return h._("View previous comments from {names} and 1 other person",[h.param('names',n)]);default:return h._({"*":"View previous comments from {names} and {othersCount} others"},[h.param('names',n),h.param('othersCount',p,[0,o])]);}break;default:return null;}},_getQuestionLabel:function(l,m){var n;switch(l){case k.VIEW_ONE:return h._("View 1 question");case k.VIEW_ONE_MORE:return h._("View 1 more question");case k.VIEW_ALL:n=j.formatIntegerWithDelimiter(m.count,m.delimiter);return h._({"*":"View all {count} questions"},[h.param('count',n,[0,m.count])]);case k.VIEW_MORE_EXPLICIT:n=j.formatIntegerWithDelimiter(m.count,m.delimiter);return h._({"*":"View {count} more questions"},[h.param('count',n,[0,m.count])]);case k.VIEW_MORE:return h._("View more questions");case k.VIEW_PREVIOUS:return h._("View previous questions");default:return null;}},getLabel:function(l,m,n,o){if(m){return k._getReplyLabel(l,o);}else if(n){return k._getQuestionLabel(l,o);}else return k._getCommentLabel(l,o);}};f.exports=k;},null);
__d('UFIReplySocialSentence.react',['Badge.react','LiveTimer','React','Timestamp.react','UFIClassNames','UFIConstants','UFIImageBlock.react','cx','joinClasses','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r=j.PropTypes,s=' \u00b7 ',t=43200,u=j.createClass({displayName:'UFIReplySocialSentence',propTypes:{author:r.object,'data-ft':r.string,isExpanded:r.bool,isFirstComponent:r.bool,isLastComponent:r.bool,isLoading:r.bool,onClick:r.func,orderingMode:r.string,replies:r.number,shortenTimestamp:r.bool,showVerified:r.bool,timestamp:r.object},render:function(){var v=this.props.isLoading?' '+"UFIReplySocialSentenceLoading":'',w=p(l.ROW,' '+"UFIReplySocialSentenceRow"+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":'')),x,y;if(this.props.isExpanded){x=this.props.replies>1?q._({"*":"Hide {count} Replies"},[q.param('count',this.props.replies,[0])]):q._("Hide 1 Reply");}else{x=this.props.replies>1?q._({"*":"{count} Replies"},[q.param('count',this.props.replies,[0])]):q._("1 Reply");if(this.props.timestamp){var z=i.getApproximateServerTime()/1000-this.props.timestamp.time;if(z<t||this.props.orderingMode==m.UFICommentOrderingMode.RECENT_ACTIVITY)y=j.createElement('span',{className:"fcg"},s,j.createElement(k,{shorten:this.props.shortenTimestamp,time:this.props.timestamp.time,text:this.props.timestamp.text,verbose:this.props.timestamp.verbose}));}}var aa=this.props.author,ba=aa&&!this.props.isExpanded,ca=null,da;if(ba){ca=j.createElement('img',{alt:"",src:aa.thumbSrc,className:l.ACTOR_IMAGE});var ea=null;if(this.props.showVerified)ea=j.createElement(h,{size:'xsmall',type:'verified'});da=[q._("{author}{verified_badge} replied",[q.param('author',aa.name),q.param('verified_badge',ea)]),s,x];}else da=x;var fa=null,ga=false;if(!ba||this.props.contextArgs.feedcarded){if(ba)ga=true;fa=j.createElement('i',{className:(!this.props.isExpanded?' '+"UFIPagerIcon":'')+(this.props.isExpanded?' '+"UFICollapseIcon":'')+(ga?' '+"UFIFeedCardedIconWithActor":'')});}return (j.createElement('li',{className:w,'data-ft':this.props['data-ft']},j.createElement('a',{className:"UFICommentLink",onClick:this.props.onClick,href:"#",role:"button"},j.createElement(n,null,j.createElement('div',{className:(ba?' '+"UFIReplyActorPhotoWrapper":'')+(ga?' '+"UFIFeedCardedReplyActor":'')},fa,ca),j.createElement('span',{className:v},j.createElement('span',{className:' '+"UFIReplySocialSentenceLinkText"+(this.props.showVerified?' '+"UFIReplySocialSentenceVerified":'')},da),y)))));}});f.exports=u;},null);
__d('UFIShareRow.react',['NumberFormat','React','UFIClassNames','UFIImageBlock.react','URI','cx','joinClasses','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p=i.PropTypes,q=i.createClass({displayName:'UFIShareRow',propTypes:{contextArgs:p.object.isRequired,shareCount:p.number.isRequired,targetID:p.any.isRequired,isFirstComponent:p.bool,isLastComponent:p.bool},render:function(){var r=new l('/ajax/shares/view').setQueryData({target_fbid:this.props.targetID}),s=new l('/shares/view').setSubdomain('www').setQueryData({id:this.props.targetID}),t;if(this.props.shareCount>1){var u=h.formatIntegerWithDelimiter(this.props.shareCount,this.props.contextArgs.numberdelimiter||',');t=o._({"*":"{count} shares"},[o.param('count',u,[0,this.props.shareCount])]);}else t=o._("1 share");var v=n(j.ROW,' '+"UFIShareRow"+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":'')),w=i.createElement('a',{className:"UFIShareLink",rel:"dialog",ajaxify:r.toString(),href:s.toString()},t),x=i.createElement(k,null,i.createElement('a',{className:"UFIShareIcon",rel:"dialog",ajaxify:r.toString(),href:s.toString()}),w),y=this.props.contextArgs.ufiexperiments||{};return (i.createElement('li',{className:v},y.showSlimUFI?w:x));}});f.exports=q;},null);
__d('UFISpamPlaceholder.react',['React','UFIClassNames','XUISpinner.react','fbt'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.PropTypes,m=h.createClass({displayName:'UFISpamPlaceholder',propTypes:{numHidden:l.number.isRequired,isLoading:l.bool,onClick:l.func},render:function(){if(this.props.isLoading)return (h.createElement('li',{className:i.ROW},h.createElement('span',{className:"UFISpamCommentWrapper"},h.createElement(j,{className:"mls",background:"light",size:"small"}))));return (h.createElement('li',{className:i.ROW},h.createElement('a',{href:"#",role:"button",className:"UFISpamCommentLink",onClick:this.props.onClick,'aria-label':k._("Show comments marked as spam")},h.createElement('span',{'data-hover':"tooltip",'data-tooltip-alignh':"center",'aria-label':k._({"*":"{count} hidden"},[k.param('count',this.props.numHidden,[0])]),className:"UFISpamCommentWrapper"},h.createElement('i',{className:"placeholderIcon"})))));}});f.exports=m;},null);
__d('StaticUFI.react',['Arbiter','BootloadedComponent.react','Bootloader','CommentPrelude','DOM','DOMScroll','Event','JSResource','LogHistory','NumberFormat','Parent','React','ReactFragment','ScrollableArea.react','ScrollAwareDOM','SearchableEntry','ShareNowConstants','TrackingNodes','UFIAddCommentController','UFIAddCommentLink.react','UFIComment.react','UFICommentOrdering','UFIConstants','UFIContainer.react','UFIInlineShareConfirmation.react','UFIInstanceState','UFILikeSentence.react','UFIPager.react','UFIPagerLabel','UFIReactionsFacepile.react','UFIReplySocialSentence.react','UFIShareRow.react','UFISpamPlaceholder.react','UFIStoryAction','URI','Vector','XUISpinner.react','cx','getUnboundedScrollPosition','isEmpty','focusWithinLayer','throttle','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa){if(c.__markCompiled)c.__markCompiled();'use strict';var ya=Object.assign||function(cb){for(var db=1;db<arguments.length;db++){var eb=arguments[db];for(var fb in eb)if(Object.prototype.hasOwnProperty.call(eb,fb))cb[fb]=eb[fb];}return cb;},za=s.PropTypes,ab={TOP:'top',BOTTOM:'bottom',ALL:'all'},bb=s.createClass({displayName:'StaticUFI',contextTypes:{dispatch:za.func},getInitialState:function(){return {repliesExpandedMap:this.props.initialRepliesExpandMap||{},loadingSpamIDs:{},isActiveLoading:{},commentIDToFocusOnMount:null,replyComposerIDToFocusOnMount:null,hasPagedToplevel:false,entry:null,repliesMap:{}};},getDefaultProps:function(){return {inlineShare:{}};},componentDidMount:function(){this.suppressScrolls=0;this.scrollSubscription=v.subscribe('scroll',(function(){if(this.suppressScrolls>0){this.suppressScrolls--;return false;}return true;}).bind(this));if(this.props.feedback.isqanda&&this.props.feedback.infinitescroll){var cb=wa(this.loadMoreComments,20);this._scrollEventListener=n.listen(window,'scroll',cb);this._resizeEventListener=n.listen(window,'resize',cb);}this._resolveFocus();if(this.props.isInitialRender){var db='replycomposer-'+this.props.feedback.permalinkcommentid;if(db in this.refs)this.refs[db].focus();}},componentWillUnmount:function(){if(this.scrollSubscription){v.unsubscribe(this.scrollSubscription);this.scrollSubscription=null;}if(this._scrollEventListener)this._scrollEventListener.remove();if(this._resizeEventListener)this._resizeEventListener.remove();},componentWillReceiveProps:function(cb){var db=ya({},this.state.isActiveLoading),eb;for(eb in this.state.isActiveLoading){var fb=this.props.ranges[this.props.id],gb=cb.ranges[this.props.id],hb=this.props.availableComments.length,ib=cb.availableComments.length;if(fb.getOffset()!=gb.getOffset()||hb!=ib){var jb=gb.getOffset()<fb.getOffset()?hb:0;if(jb<ib)this.setState({commentIDToFocusOnMount:cb.availableComments[jb].id});}delete db[eb];}this.setState({isActiveLoading:db});},componentDidUpdate:function(cb,db){this._resolveFocus(cb);if(this.state.replyComposerIDToFocusOnMount in this.refs){this.refs[this.state.replyComposerIDToFocusOnMount].focus();if(this.state.entry)this.refs[this.state.replyComposerIDToFocusOnMount].insertMention(this.state.entry);this.setState({replyComposerIDToFocusOnMount:null,entry:null});}},_resolveFocus:function(cb){if(this.props.inlineShare.toggling){var db=cb&&cb.inlineShare||{};k.expand(s.findDOMNode(this),false,'ufi.react');if(!db.active&&!this.props.inlineShare.active)this.onComment();var eb=this.props.inlineShare.active;if(eb){var fb=!db.loaded;setTimeout((function(){return this._focusInlineShare({shouldHighlight:fb});}).bind(this),10);}ga.updateStateField(this.props.instanceid,'inlineShare','toggling',false);}},componentWillUpdate:function(cb,db,eb){var fb,gb;for(fb in this.state.isActiveLoading){gb=this.state.isActiveLoading[fb];if(gb!==ab.TOP)this.suppressScrolls++;}},render:function(){var cb=this.props,db=cb.feedback,eb=cb.contextArgs,fb=cb.source!=da.UFIFeedbackSourceType.ADS,gb=null;if(cb.inlineShare.message)gb=s.createElement(fa,this.props.inlineShare);var hb=!eb.issnowbox&&!eb.hasReactionsTokens&&db.reactioncount,ib=null;if(hb)ib=s.createElement(ka,{authorProfiles:this.props.authorProfiles,feedback:db});var jb=!cb.hideOrderingModeSelector&&db.orderingmodes&&cb.commentCounts[cb.id]>=da.minCommentsForOrderingModeSelector,kb=!db.displayreactions||eb.issnowbox;if(kb)kb=(!ua(db.likesentences.current)||db.seencount>0&&!eb.entstream||jb)&&eb.search!==true&&fb;var lb=null;if(kb)lb=s.createElement(ha,{contextArgs:eb,feedback:db,showOrderingModeSelector:jb});var mb=null,nb=eb.showshares&&db.sharecount&&fb&&(!eb.hasReactions||!eb.hasReactionsTokens);if(nb&&!eb.entstream)mb=s.createElement(ma,{targetID:db.targetfbid,shareCount:db.sharecount,contextArgs:eb});if(cb.loadingComments){var ob=s.createElement('li',{className:"UFICommentsLoadingSpinnerContainer UFIFirstCommentComponent UFIRow"},s.createElement(ra,{size:"large"}));return (s.createElement(ea,{hasNub:eb.shownub&&wb},gb,ib,lb,mb,ob));}var pb=cb.availableComments&&cb.availableComments.length&&fb;eb.hasComments=pb;var qb=null;if(pb)qb=this.renderCommentMap(cb.availableComments,cb.ranges[cb.id].getOffset());var rb=null,sb=db.cancomment,tb=sb&&eb.showaddcomment&&db.actorforpost&&cb.canAddCommentMap[cb.id];if(tb){eb.orderingmodes=db.orderingmodes;var ub=new z(null,cb.id,null,eb),vb=cb.authorProfiles[db.actorforpost];rb=ub.renderAddComment(vb,db.ownerid,db.mentionsdatasource,db.showsendonentertip,'toplevelcomposer',null,db.subtitle,db.allowphotoattachments,db.allowstickerattachments,db.isqanda,null);}var wb=kb||nb||pb||sb,xb=cb.hideToplevelPager?{topPager:null,bottomPager:null}:this.renderPagers(cb.id,cb.ranges[cb.id].getOffset(),cb.ranges[cb.id].getLength()),yb,zb,ac=this.applyToUFIComponents([xb.topPager],qb,[xb.bottomPager],{isFirstCommentComponent:true},{isLastCommentComponent:true});yb=ac[0];qb=ac[1];zb=ac[2];var bc=yb,cc=bc[0],dc=zb,ec=dc[0];xb={topPager:cc,bottomPager:ec};var fc=this._hasCommentOrderInverted()?rb:null,gc=this._hasCommentOrderInverted()?null:rb,hc=null;if(tb&&this._hasCommentOrderInverted()&&this.state.hasPagedToplevel)hc=s.createElement(aa,{onClick:this.onComment,isQAndA:db.isqanda});var ic=this.applyToUFIComponents([gb,ib,lb,mb,fc,xb.topPager],qb,[xb.bottomPager,gc,hc],{isFirstComponent:true},{isLastComponent:true});yb=ic[0];qb=ic[1];zb=ic[2];var jc=yb;gb=jc[0];ib=jc[1];lb=jc[2];mb=jc[3];fc=jc[4];cc=jc[5];var kc=zb;ec=kc[0];gc=kc[1];hc=kc[2];xb={topPager:cc,bottomPager:ec};var lc=[xb.topPager,qb&&t.create(qb),xb.bottomPager];if(eb.scrollcomments&&eb.scrollwidth)lc=s.createElement('li',null,s.createElement(u,{width:eb.scrollwidth},s.createElement('ul',null,lc)));if(this.props.inlineShare.active){return (s.createElement(ea,{hasNub:false},s.createElement(i,ya({bootloadPlaceholder:s.createElement('span',null),bootloadLoader:o('ShareDialog.react')},this.props.inlineShare.props,{onCancel:(function(){return this._resetInlineShare();}).bind(this),onPost:(function(mc){j.loadModules(["ShareDialogOsricController"],(function(nc){nc.onPost(mc,this._beforePostInlineShare,this._onInlineShareSuccess,this._onInlineShareError);}).bind(this));}).bind(this),ref:"inlineShare",renderInline:true,status:this.props.inlineShare.status}))));}else return (s.createElement(ea,{hasNub:eb.shownub&&wb},gb,ib,lb,mb,fc,lc,gc,hc));},applyToUFIComponents:function(cb,db,eb,fb,gb){var hb=this._applyToFirstComponent(cb,db,eb,fb,false);cb=hb[0];db=hb[1];eb=hb[2];var ib=this._applyToFirstComponent(eb,db,cb,gb,true);eb=ib[0];db=ib[1];cb=ib[2];return [cb,db,eb];},_applyToFirstComponent:function(cb,db,eb,fb,gb){var hb,ib,jb;hb=gb?cb.length-1:0;ib=gb?-1:cb.length;for(jb=hb;jb!=ib;jb+=gb?-1:1)if(cb[jb]){cb[jb]=s.cloneElement(cb[jb],fb);return [cb,db,eb];}var kb=Object.keys(db||{});hb=gb?kb.length-1:0;ib=gb?-1:kb.length;for(jb=hb;jb!=ib;jb+=gb?-1:1){var lb=kb[jb];if(db[lb]&&db[lb].props.comment&&this._shouldRenderComment(db[lb].props.comment)){db[lb]=s.cloneElement(db[lb],fb);return [cb,db,eb];}}hb=gb?eb.length-1:0;ib=gb?-1:eb.length;for(jb=hb;jb!=ib;jb+=gb?-1:1)if(eb[jb]){eb[jb]=s.cloneElement(eb[jb],fb);return [cb,db,eb];}return [cb,db,eb];},_focusInlineShare:function(cb){cb=cb||{};var db=s.findDOMNode(this.refs.inlineShare);if(!this.props.inlineShare.messageOnly)va(db);if(!this.props.contextArgs.ufiexperiments.inlineShareHighlight)return;m.ensureVisible(db);if(cb.shouldHighlight)j.loadModules(["highlight","CSS","cx"],function(eb,fb,gb){fb.addClass(db,"_5p5");var hb=function(){fb.removeClass(db,"_5p5");};eb(db,hb,'#f6f7f8');});},_shouldRenderComment:function(cb){return cb.status!==da.UFIStatus.DELETED;},renderCommentMap:function(cb,db){var eb=this.props,fb={},gb=cb.length;if(!gb)return fb;var hb=cb[0].parentcommentid,ib=[],jb=(function(){if(ib.length>0){var vb=(function(wb,xb){var yb=this.state.loadingSpamIDs;yb[wb[0]]=true;this.setState({loadingSpamIDs:yb});this.context.dispatch(oa.spamFetched(wb,xb));}).bind(this,ib,hb);fb['spam'+ib[0]]=s.createElement(na,{onClick:vb,numHidden:ib.length,isLoading:!!this.state.loadingSpamIDs[ib[0]]});ib=[];}}).bind(this),kb=eb.instanceid,lb=ga.getKeyForInstance(kb,'editcommentid'),mb=!!cb[0].parentcommentid;for(var nb=0;nb<gb;nb++)if(cb[nb].status==da.UFIStatus.SPAM){ib.push(cb[nb].id);}else{jb();var ob=Math.max(eb.loggingOffset-nb-db,0),pb=cb[nb],qb;if(pb.id==lb){qb=this.renderEditCommentBox(pb);}else{var rb=nb===0,sb=nb===gb-1,tb=!mb,ub=mb&&!rb;qb=this.renderComment(pb,ob,rb,sb,tb,ub);}fb['comment'+pb.id]=qb;if(pb.status!==da.UFIStatus.DELETED)fb['replies'+pb.id]=this.renderReplyContainer(pb);}jb();return fb;},renderReplyContainer:function(cb){var db=this.props,eb=db.commentCounts[cb.id],fb=this.state.repliesExpandedMap[cb.id],gb=!fb&&cb.interestingReplyId,hb,ib;if(fb||cb.interestingReplyId){hb=db.repliesMap[cb.id];ib=db.ranges[cb.id].getOffset();if(gb){var jb=hb.filter(function(gc){return gc.id===cb.interestingReplyId;});if(jb.length!==1){p.getInstance('ufi').error('comment '+cb.id+' claims to have an interesting reply, '+'but there is not exactly 1 comment with that id in the reply '+'list.');hb=null;}else{hb=jb;ib=cb.interestingReplyOffset;}}}var kb,lb,mb;if(hb){var nb=db.ranges[cb.id].getOffset(),ob=db.ranges[cb.id].getLength();if(gb){nb=ib;ob=1;}var pb=this.renderPagers(cb.id,nb,ob);kb=pb.topPager;lb=pb.bottomPager;mb=this.renderCommentMap(hb,ib);}var qb=Math.max(eb-cb.spamreplycount,0),rb;if(qb&&(fb&&hb&&hb.length>this.props.replySocialSentenceMaxReplies||!fb&&!hb)){var sb=fb&&!kb&&(this.isLoadingPrev(cb.id)||this.isLoadingNext(cb.id)),tb=null;if(cb.replyauthors&&cb.replyauthors.length)tb=db.authorProfiles[cb.replyauthors[0]];rb=s.createElement(la,{contextArgs:db.contextArgs,author:tb,replies:fb?hb.length:qb,shortenTimestamp:db.shortenTimestamp,timestamp:cb.recentreplytimestamp,onClick:this.onToggleReplies.bind(this,cb.id),isLoading:sb,isExpanded:fb,showVerified:this.props.feedback.showfeaturedreplies,orderingMode:this.props.orderingMode});}var ub;if(fb)if(cb.cancomment&&db.canAddCommentMap[cb.id]){var vb=false,wb=Object.keys(mb);for(var xb=wb.length-1;xb>=0;xb--){var yb=wb[xb];if(yb&&mb[yb]){vb=mb[yb].props.isAuthorReply;break;}}ub=this.renderReplyComposer(cb,!vb);}var zb;if(rb||kb||mb||lb||ub){var ac,bc,cc=this.applyToUFIComponents([rb,kb],mb,[lb,ub],{isFirstComponent:true},{isLastComponent:true});ac=cc[0];mb=cc[1];bc=cc[2];var dc=ac;rb=dc[0];kb=dc[1];var ec=bc;lb=ec[0];ub=ec[1];var fc=cb.status===da.UFIStatus.LIVE_DELETED;zb=s.createElement(ea,{isParentLiveDeleted:fc,isReplyList:true},rb,kb,mb&&t.create(mb),lb,ub);}return zb;},renderReplyComposer:function(cb,db){var eb=this.props;return (new z(null,eb.id,cb.id,eb.contextArgs).renderAddComment(eb.authorProfiles[eb.feedback.actorforpost],eb.feedback.ownerid,eb.feedback.mentionsdatasource,false,'replycomposer-'+cb.id,db,eb.feedback.subtitle,eb.feedback.allowphotoattachments,eb.feedback.allowstickerattachments,eb.feedback.isqanda,this.state.repliesMap[cb.id]));},renderEditCommentBox:function(cb){var db=new z(null,this.props.id,null,{mentionsinput:this.props.contextArgs.mentionsinput}),eb=db.renderEditComment(this.props.authorProfiles[this.props.feedback.actorforpost],this.props.feedback.ownerid,cb,this.props.feedback.mentionsdatasource,this.props.feedback.allowphotoattachments,this.props.feedback.allowstickerattachments,this.props.feedback.isqanda);return eb;},renderComment:function(cb,db,eb,fb,gb,hb){var ib=this.props,jb=ib.feedback,kb=jb.actorforpost===cb.author,lb=ga.getKeyForInstance(this.props.instanceid,'locallycomposed'),mb=cb.islocal||lb&&lb[cb.id],nb=jb.showremovemenu||jb.viewerid===cb.author,ob=jb.canremoveall&&jb.isownerpage&&!kb,pb=ib.source!=da.UFIFeedbackSourceType.INTERN,qb=y.getTrackingInfo(y.types.COMMENT,db),rb=!!cb.parentcommentid,sb=!!cb.isfeatured;switch(this.props.source){case da.UFIFeedbackSourceType.TOPIC_CONVERSATION:return (s.createElement(i,{bootloadPlaceholder:s.createElement('span',null),bootloadLoader:o('UFITopicConversationComment.react'),isFirst:eb,isLast:fb,comment:cb,authorProfiles:this.props.authorProfiles,viewerIsAuthor:kb,feedback:jb,contextArgs:this.props.contextArgs,focusOnMount:cb.id===this.state.commentIDToFocusOnMount,isLocallyComposed:mb}));default:var tb=new pa(ib.commentPermalinks[cb.id]).addQueryData({comment_tracking:qb}).toString();return (s.createElement(ba,{isFirst:eb,isLast:fb,showReplyLink:gb,hasPartialBorder:hb,comment:cb,authorProfiles:this.props.authorProfiles,viewerIsAuthor:kb,feedback:jb,'data-ft':qb,contextArgs:this.props.contextArgs,hideAsSpamForPageAdmin:ob,isLocallyComposed:mb,isReply:rb,isFeatured:sb,permalink:tb,shortenTimestamp:ib.shortenTimestamp,showPermalink:pb,isStreaming:ib.isStreaming,showRemoveReportMenu:nb,focusOnMount:cb.id===this.state.commentIDToFocusOnMount,onCommentReply:this.onCommentReply.bind(this,cb)}));}},_toggleReplyExpandedState:function(cb){var db=this.state.repliesExpandedMap[cb],eb=this.state.repliesExpandedMap;eb[cb]=!db;this.setState({repliesExpandedMap:eb,replyComposerIDToFocusOnMount:!db?'replycomposer-'+cb:null});},onToggleReplies:function(cb){this._toggleReplyExpandedState(cb);var db=this.state.repliesExpandedMap[cb],eb=this.props.ranges[cb].getRequestedLength();eb-=this.props.deletedCounts[cb];if(db&&eb===0){var fb=this.props.commentCounts[cb],gb=Math.min(fb,this.props.pageSize),hb=fb-gb;this.onPage(cb,ab.BOTTOM,{offset:hb,length:gb});}},onPage:function(cb,db,eb){var fb=this.state.hasPagedToplevel||cb===this.props.id;if(cb!==this.props.id&&!this.state.repliesExpandedMap[cb]){var gb=this.state.repliesExpandedMap;gb[cb]=true;this.setState({repliesExpandedMap:gb});}var hb=ya({},this.state.isActiveLoading);hb[cb]=db;this.setState({isActiveLoading:hb,hasPagedToplevel:fb});this.props.onChangeRange(cb,eb);},isLoadingPrev:function(cb){var db=this.props;cb=cb||db.id;var eb=db.ranges[cb].getRequestedOffset(),fb=db.ranges[cb].getOffset();return eb<fb;},isLoadingNext:function(cb){var db=this.props;cb=cb||db.id;var eb=db.ranges[cb].getRequestedOffset(),fb=db.ranges[cb].getRequestedLength(),gb=db.ranges[cb].getOffset(),hb=db.ranges[cb].getLength();return eb+fb>gb+hb;},renderPagers:function(cb,db,eb){var fb=this.props,gb=fb.deletedCounts[cb],hb=fb.commentCounts[cb],ib=hb-gb,jb=eb-gb,kb=fb.contextArgs.numberdelimiter||',',lb=cb!==fb.id,mb,nb={topPager:null,bottomPager:null};if(fb.source==da.UFIFeedbackSourceType.ADS)return nb;var ob=this.isLoadingPrev(cb),pb=this.isLoadingNext(cb);if(eb==hb)return nb;var qb={delimiter:kb},rb=fb.feedback.commentsentenceinfo;if(rb){qb.commenters=rb.explicit_commenter_names;qb.othersCount=rb.other_commenter_count;}var sb=db+eb==hb;if(hb<fb.pageSize&&sb||jb===0){mb=Math.min(hb,fb.pageSize);var tb=this.onPage.bind(this,cb,this._hasCommentOrderInverted()&&!lb?ab.BOTTOM:ab.TOP,{offset:hb-mb,length:mb}),ub;if(jb===0){if(ib==1){ub=ja.VIEW_ONE;}else{qb.count=ib;ub=ja.VIEW_ALL;}}else if(ib-jb==1){ub=ja.VIEW_ONE_MORE;}else{ub=ja.VIEW_MORE_EXPLICIT;qb.count=ib-jb;}var vb=y.getTrackingInfo(y.types.VIEW_ALL_COMMENTS),wb=ja.getLabel(ub,lb,fb.feedback.isqanda,qb),xb=this._hasCommentOrderInverted()&&!lb,yb=s.createElement(ia,{key:"allPager"+cb,ref:xb?"topLevelBottomPager":null,contextArgs:fb.contextArgs,isUnseen:fb.feedback.hasunseencollapsed,isLoading:ob,isReply:lb,pagerLabel:wb,onPagerClick:tb,'data-ft':vb});if(xb){nb.bottomPager=yb;}else nb.topPager=yb;return nb;}var zb=ja.getLabel(ja.VIEW_MORE,lb,fb.feedback.isqanda,qb),ac=ja.getLabel(ja.VIEW_PREVIOUS,lb,fb.feedback.isqanda,qb);if(db>0){var bc=Math.max(db-fb.pageSize,0);mb=db+eb-bc;var cc;if(!lb||jb>1){var dc=q.formatIntegerWithDelimiter(jb,kb),ec=q.formatIntegerWithDelimiter(ib,kb);cc=xa._("{countshown} of {totalcount}",[xa.param('countshown',dc),xa.param('totalcount',ec)]);}var fc;if(this._hasCommentOrderInverted()&&!lb){fc=this.onPage.bind(this,cb,ab.BOTTOM,{offset:bc,length:mb});nb.bottomPager=s.createElement(ia,{key:"bottomPager"+cb,ref:!lb?"topLevelBottomPager":null,contextArgs:fb.contextArgs,isLoading:ob,isReply:lb,pagerLabel:zb,onPagerClick:fc,countSentence:cc});}else{fc=this.onPage.bind(this,cb,ab.TOP,{offset:bc,length:mb});nb.topPager=s.createElement(ia,{key:"topPager"+cb,contextArgs:fb.contextArgs,isLoading:ob,isReply:lb,pagerLabel:ac,onPagerClick:fc,countSentence:cc});}}if(db+eb<hb){mb=Math.min(eb+fb.pageSize,hb-db);var gc;if(this._hasCommentOrderInverted()&&!lb){gc=this.onPage.bind(this,cb,ab.TOP,{offset:db,length:mb});nb.topPager=s.createElement(ia,{key:"topPager"+cb,contextArgs:fb.contextArgs,isLoading:pb,isReply:lb,pagerLabel:ac,onPagerClick:gc});}else{gc=this.onPage.bind(this,cb,ab.BOTTOM,{offset:db,length:mb});nb.bottomPager=s.createElement(ia,{key:"bottomPager",ref:!lb?"topLevelBottomPager":null,contextArgs:fb.contextArgs,isLoading:pb,isReply:lb,pagerLabel:zb,onPagerClick:gc});}}return nb;},loadMoreComments:function(){if(this.scrollSubscription&&this.refs.topLevelBottomPager&&!(this.props.id in this.state.isActiveLoading)){var cb=s.findDOMNode(this.refs.topLevelBottomPager),db=ta(window).y,eb=db+document.documentElement.clientHeight+da.infiniteScrollRangeForQANDAPermalinks;if(cb.offsetHeight&&cb.offsetTop<eb)this.refs.topLevelBottomPager.props.onPagerClick();}},_scrollToAddComment:function(){if(this.refs.toplevelcomposer){var cb=s.findDOMNode(this.refs.toplevelcomposer),db=80,eb=cb.getBoundingClientRect().top;if(eb<db||eb>qa.getViewportDimensions().y-db)m.scrollTo(cb,true,false,db);}},onCommentReply:function(cb){var db=cb.parentcommentid||cb.id,eb=null,fb=null,gb=null;if(this.props.feedback.isthreaded&&cb.cancomment){if(!this.state.repliesExpandedMap[db]){this.onToggleReplies(cb.id);}else if(this.refs['replycomposer-'+db])this.refs['replycomposer-'+db].focus();fb=this.state.repliesMap;fb[db]=null;this.setState({repliesMap:fb});}else if(this.props.contextArgs.simplereply&&cb.author&&this.refs.toplevelcomposer&&this.refs.toplevelcomposer.insertMention){gb=this.props.authorProfiles[cb.author].type;eb=new w({uniqueID:cb.author,title:this.props.authorProfiles[cb.author].name,type:gb==='friend'?'user':gb});this.refs.toplevelcomposer.insertMention(eb);this._scrollToAddComment();}else if(cb.parentcommentid){if(!this.state.repliesExpandedMap[db]){this.onToggleReplies(db);}else if(this.refs['replycomposer-'+db])this.refs['replycomposer-'+db].focus();fb=this.state.repliesMap;fb[db]=cb.id;gb=this.props.authorProfiles[cb.author].type;eb=new w({uniqueID:cb.author,title:this.props.authorProfiles[cb.author].name,type:gb==='friend'?'user':gb});if(this.refs['replycomposer-'+db]){this.refs['replycomposer-'+db].insertMention(eb);this.setState({repliesMap:fb});}else this.setState({entry:eb,repliesMap:fb});}},onComment:function(){var cb=null;if(this.refs.toplevelcomposer){this.refs.toplevelcomposer.focus();cb=s.findDOMNode(this.refs.toplevelcomposer);}else{var db=r.byTag(s.findDOMNode(this),'form');cb=l.scry(db,'[name="add_comment_text_text"]').concat(l.scry(db,'[name="add_comment_text"]')).find(function(eb){return !r.byClass(eb,'UFIReplyList');});cb&&cb.focus();}cb&&h.inform('comment/focus',{element:cb});},_beforePostInlineShare:function(){ga.updateStateField(this.props.instanceid,'inlineShare','status',{type:'posting'});},_onInlineShareSuccess:function(cb){var db=cb.payload.message||x.success;this._resetInlineShare({message:db,isError:false});},_onInlineShareError:function(cb){var db=cb.errorDescription||x.error;this._resetInlineShare({message:db,isError:true});},_resetInlineShare:function(cb){ga.updateState(this.props.instanceid,'inlineShare',cb||{});},_hasCommentOrderInverted:function(){return ca.inverted(this.props.orderingMode);}});f.exports=bb;},null);
__d('UFICallbackStore',['FluxStore'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i,j;function k(m,n){var o={};for(var p in m){if(n.indexOf(p)>=0)continue;if(!Object.prototype.hasOwnProperty.call(m,p))continue;o[p]=m[p];}return o;}'use strict';i=h;j=i&&i.prototype;Object.assign(l,i);l.prototype=Object.create(i.prototype);l.prototype.constructor=l;l.__superConstructor__=i;l.prototype.__onDispatch=function(m){var n=m.type,o=k(m,['type']);this.__emitter.emit(n,o);};l.prototype.on=function(m,n){return this.__emitter.addListener(m,n);};l.prototype.remove=function(){this.__emitter.removeAllListeners();};function l(){i.apply(this,arguments);}f.exports=l;},null);
__d('UFIDispatcherContext.react',['React','UFIDispatcher'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();'use strict';var j=h.PropTypes,k=h.createClass({displayName:'UFIDispatcherContext',propTypes:{dispatcher:j.instanceOf(i).isRequired,stores:j.object.isRequired},childContextTypes:{dispatch:j.func,stores:j.object},getChildContext:function(){return {dispatch:this.props.dispatcher.dispatch.bind(this.props.dispatcher),stores:this.props.stores};},render:function(){return this.props.children;}});f.exports=k;},null);
__d('UFIFeaturedReplyCommentList',['UFIReplyCommentList'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i,j;'use strict';i=h;j=i&&i.prototype;Object.assign(k,i);k.prototype=Object.create(i.prototype);k.prototype.constructor=k;k.__superConstructor__=i;k.getCommentList=function(l,m){};function k(l,m,n,o){j.constructor.call(this,l,m);var p=0,q=n.length;this.updateCommentCount(q);this.addCommentIDs(p,q,n);var r={};o.forEach(function(s){r[s.id]=s;});n.forEach((function(s){this.addOrUpdateComment(r[s]);}).bind(this));}k.prototype.fetchComments=function(l,m,n){};f.exports=k;},null);
__d('UFIFeaturedToplevelCommentList',['UFIConstants','UFIToplevelCommentList'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;'use strict';j=i;k=j&&j.prototype;Object.assign(l,j);l.prototype=Object.create(j.prototype);l.prototype.constructor=l;l.__superConstructor__=j;l.getCommentList=function(m,n){};l.getCommentListsForFeedbackTargetID=function(m){};l.getCommentListForFeedbackTargetID_UNSAFE=function(m){};l.resetCommentListsForFeedbackTargetID=function(m){};function l(m,n,o){k.constructor.call(this,m,h.UFICommentOrderingMode.FEATURED);var p=0,q=n.length;this.updateCommentCount(q);this.addCommentIDs(p,q,n);var r={};o.forEach(function(s){r[s.id]=s;});n.forEach((function(s){this.addOrUpdateComment(r[s]);}).bind(this));}l.prototype.fetchComments=function(m,n,o){};f.exports=l;},null);
__d("XLiveStreamingCommentsAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/videos\/livecomments\/",{eft_id:{type:"String",required:true},comment_cursor:{type:"String"},comment_fbid:{type:"String"}});},null,{});
__d('UFILiveStreamingComments',['AsyncRequest','Map','Set','UFICentralUpdates','UFIConstants','XLiveStreamingCommentsAsyncController','clearInterval','setInterval'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();'use strict';var p=new i();function q(s,t){this.eftID=s;this.firstRequestCommentID=t;this.nextCursor=null;this.localCommentBodies=new j();this.errorCount=0;this.interval=o((function(){new h().setURI(this.getNextURI()).setHandler((function(u){switch(u.payload.status){case 'streaming':this.handleComments(u.payload);this.errorCount=0;return;case 'not-streaming':n(this.interval);return;case 'error':this.errorCount+=1;if(this.errorCount===5){n(this.interval);return;}break;}}).bind(this)).send();}).bind(this),2000);k.subscribe('update-comments',(function(u,v){if(v.comments&&v.comments.length)v.comments.forEach((function(w){if(w.parentcommentid)return;if(w.islocal)this.trackLocalComment(w);}).bind(this));}).bind(this));}q.prototype.handleComments=function(s){if(!s.cursors||!s.ufipayload)return;this.nextCursor=s.cursors[0];var t=s.ufipayload.comments[0];if(this.resemblesLocalComment(t))return;k.handleUpdate(l.UFIPayloadSourceType.LIVE_SEND,s.ufipayload);};q.prototype.getNextURI=function(){var s=m.getURIBuilder().setString('eft_id',this.eftID);if(this.nextCursor!==null){s.setString('comment_cursor',this.nextCursor);}else if(this.firstRequestCommentId!==null)s.setString('comment_fbid',this.firstRequestCommentID);return s.getURI();};q.prototype.trackLocalComment=function(s){var t=q.hashCommentData(s);this.localCommentBodies.add(t);};q.prototype.resemblesLocalComment=function(s){var t=q.hashCommentData(s);return this.localCommentBodies.has(t);};q.hashCommentData=function(s){var t=s.author+s.body.text;if(s.attachment)t+=':'+s.attachment.fbid;return t;};var r={start:function(s,t){if(p.get(s))return;p.set(s,new q(s,t));}};f.exports=r;},null);
__d('UFIRange',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();'use strict';function h(i,j){this.offset=i||0;this.length=j||0;this.requestedOffset=this.offset;this.requestedLength=this.length;}h.prototype.getOffset=function(){return this.offset;};h.prototype.getLength=function(){return this.length;};h.prototype.updateRange=function(i,j){this.offset=i;this.length=j;if(this.requestedLength>0){var k=Math.min(this.offset,this.requestedOffset),l=Math.max(this.offset+this.length,this.requestedOffset+this.requestedLength);this.requestedOffset=k;this.requestedLength=l-k;}else{this.requestedOffset=this.offset;this.requestedLength=this.length;}};h.prototype.getRequestedOffset=function(){return this.requestedOffset;};h.prototype.getRequestedLength=function(){return this.requestedLength;};h.prototype.updateRequestedRange=function(i,j){this.requestedOffset=i;this.requestedLength=j;};f.exports=h;},null);
__d('UFIRetryActions',['JSLogger','UFICentralUpdates','UFIConstants','UFIUserActions'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.create('UFIRetryActions');function m(p,q){var r={actiontype:j.UFIActionType.DELETE_COMMENT,commentid:p.id};i.handleUpdate(j.UFIPayloadSourceType.USER_ACTION,{actions:[r]});var s=p.body.text,t=p.body.mentionstext;q.replyid=p.parentcommentid;q.attachedphoto=p.body.mentionsphoto;k.addComment(p.ftentidentifier,s,t,q);}function n(p,q){var r=p.body.text,s=p.body.mentionstext;q.attachedPhoto=p.body.mentionsphoto;q.attachedSticker=p.attachment;k.editComment(p.id,r,s,q);}var o={retrySubmit:function(p,q){switch(p.status){case j.UFIStatus.FAILED_ADD:m(p,q);break;case j.UFIStatus.FAILED_EDIT:n(p,q);break;default:l.error('retrysubmitstatus',{status:p.status});break;}}};f.exports=o;},null);
__d('UFISubscriptionUpdates',['UFICentralUpdates','UFIConstants','fbt'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={handleLiveLike:function(l,m){var n=m.feedback_like_subscribe.feedback;h.handleUpdate(i.UFIPayloadSourceType.LIVE_SEND,{actions:[{actiontype:i.UFIActionType.LIKE_ACTION,actorid:m.feedback_like_subscribe.liker.id,entidentifier:l,likesentences:{current:n.does_viewer_like?n.viewer_likes_sentence:n.viewer_does_not_like_sentence,alternate:n.does_viewer_like?n.viewer_does_not_like_sentence:n.viewer_likes_sentence},hasviewerliked:n.does_viewer_like,likecount:n.likers.count}]});},handleLiveComment:function(l,m){var n=m.comment_create_subscribe.comment;h.handleUpdate(i.UFIPayloadSourceType.LIVE_SEND,{comments:[{author:n.author.id,body:n.body,cancomment:n.feedback.can_viewer_comment,canedit:n.can_viewer_edit,canremove:n.can_viewer_delete,clientid:m.comment_create_subscribe.client_mutation_id,ftentidentifier:l,id:n.legacy_token,fbid:n.legacy_fbid,legacyid:n.legacy_fbid,timestamp:{time:n.created_time,text:j._("a few seconds ago")},hasviewerliked:n.feedback.does_viewer_like,isfeatured:n.is_featured,istranslatable:n.translation_available_for_viewer,likecount:n.feedback.likers.count,viewercanlike:n.feedback.can_viewer_like}]});}};f.exports=k;},null);
__d('UFIController',['Arbiter','Bootloader','CommentPrelude','DOM','LayerRemoveOnHide','LiveTimer','PageAdminSignatureSettings','Parent','React','ReactMount','Run','ShortProfiles','SubscriptionsHandler','StaticUFI.react','UFIActionLinkController','UFIActionTypes','UFICallbackStore','UFICentralUpdates','UFICollapse','UFIDispatcher','UFIDispatcherContext.react','UFIFeaturedReplyCommentList','UFIFeaturedToplevelCommentList','UFICommentTemplates','UFIConfig','UFIConstants','UFIFeedbackTargets','UFIInstanceState','UFILiveStreamingComments','UFIRange','UFIReplyCommentList','UFIRetryActions','UFISubscriptionUpdates','UFIToplevelCommentList','UFIUserActions','URI','emptyFunction','forEachObject','isEmpty','onEnclosingPageletDestroy','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va){if(c.__markCompiled)c.__markCompiled();'use strict';var wa=ga.UFIPayloadSourceType,xa=function(bb,cb,db,eb,fb){var gb=bb+cb===db;return {offset:bb,length:gb&&ya(fb)?eb-bb:cb};},ya=function(bb){return bb==wa.USER_ACTION||bb==wa.LIVE_SEND;},za=function(bb,cb){for(var db=0;db<cb.length;db++){var eb=cb[db];if(eb.author)bb.push(eb.author);if(eb.socialcontext)bb.push(eb.socialcontext.topmutualid);if(eb.replyauthors&&eb.replyauthors.length)for(var fb=0;fb<eb.replyauthors.length;fb++)bb.push(eb.replyauthors[fb]);}};ab.preload=function(){};ab.prototype.$UFIController1=function(bb,cb){if(!this.$UFIController2||cb!==wa.INITIAL_SERVER)return;this.$UFIController2.startRecording(bb);};ab.prototype.$UFIController3=function(bb,cb){if(!this.$UFIController2||cb!==wa.INITIAL_SERVER)return;this.$UFIController2.log(bb,cb,{num_comments:this.comments&&this.comments.length||0,num_likes:this.feedback&&this.feedback.likecount||0,features:{is_featured:!!this.featuredToplevelCommentList,is_streaming:this.$UFIController4()&&this.$UFIController5.isstreaming,is_lazy_fetch:this.$UFIController5.lazyFetch,is_disable_css_hiding:this.$UFIController5.disableCSSHiding}});};function ab(bb,cb,db){this.id=cb.ftentidentifier;this.$UFIController2=cb.perfLogger?new cb.perfLogger(this.id):null;this.$UFIController1('construct',wa.INITIAL_SERVER);this.$UFIController6();this.root=bb;this.source=cb.source;this.$UFIController7=cb.instanceid;this.$UFIController8={showLoadingUFI:false};this.$UFIController9=false;this.featuredToplevelCommentList=null;this.featuredReplyCommentLists={};this.$UFIController5=cb;this.$UFIController5.rootid=this.root.id;this.$UFIController10=this.$UFIController5.feedbackMode!=='expanded';var eb=db.feedbacktargets[0];new v(bb,this.$UFIController5,eb,this.$UFIController7);if(eb.ll||eb.lc)i.loadModules(["UFILikeSubscription","UFICommentSubscription"],(function(lb,mb){if(eb.ll)this.liveLikeSubscription=lb.subscribe(this.id,(function(nb){na.handleLiveLike(this.id,nb);}).bind(this));if(eb.lc)this.liveCommentSubscription=mb.subscribe(this.id,(function(nb){na.handleLiveComment(this.id,nb);}).bind(this));}).bind(this));this.$UFIController5.pagesAdminSignatureSettings=new n(this.$UFIController5.initAdminSignatureContext,eb.actorforpost);this.orderingMode=eb.defaultcommentorderingmode;var fb=null;if(db.featuredcommentlists&&db.featuredcommentlists.comments&&db.featuredcommentlists.comments[this.id]){fb=db.featuredcommentlists.comments[this.id];this.featuredToplevelCommentList=new da(this.id,fb.values,db.comments);}else fb=db.commentlists.comments[this.id][this.orderingMode];this.ranges={};this.replyRanges={};this.repliesMap={};this.shortenTimestamp=cb.shortenTimestamp;this.commentcounts={};this.commentcounts[this.id]=this.getToplevelCommentList().getCommentCount();var gb=eb.orderingmodes||[{value:this.orderingMode}];gb.forEach((function(lb){this.ranges[lb.value]=new ka(fb.range.offset,fb.range.length);}).bind(this));var hb,ib,jb;if(db.commentlists.replies)for(hb=0;hb<fb.values.length;hb++){ib=fb.values[hb];jb=db.commentlists.replies[ib];if(jb){this.commentcounts[ib]=this.getReplyCommentList(ib).getCommentCount();this.getReplyRange(ib).updateRange(jb.range.offset,jb.range.length);}}if(db.featuredcommentlists)if(db.featuredcommentlists.replies)for(hb=0;hb<fb.values.length;hb++){ib=fb.values[hb];jb=db.featuredcommentlists.replies[ib];if(jb){this.featuredReplyCommentLists[ib]=new ca(this.id,ib,jb.values,db.comments);this.commentcounts[ib]=this.getReplyCommentList(ib).getCommentCount();this.getReplyRange(ib).updateRange(jb.range.offset,jb.range.length);}}this.$UFIController11=null;this.$UFIController12=null;this.ufiCentralUpdatesSubscriptions=[y.subscribe('feedback-updated',(function(lb,mb){var nb=mb.updates,ob=mb.payloadSource;if(ob!=wa.COLLAPSED_UFI&&this.id in nb)this.fetchAndUpdate(this.render.bind(this),ob);}).bind(this)),y.subscribe('feedback-id-changed',(function(lb,mb){var nb=mb.updates;if(this.id in nb)this.id=nb[this.id];}).bind(this)),y.subscribe('instance-updated',(function(lb,mb){var nb=mb.updates;if(this.$UFIController7 in nb){var ob=nb[this.$UFIController7];if(ob.editcommentid||ob.inlineShare)this.render(mb.payloadSource);}}).bind(this)),y.subscribe('actor-changed',(function(lb,mb){this.$UFIController13();}).bind(this))];this.clearPageletSubscription=ua(this.root,this.$UFIController14.bind(this));this.clearPageSubscription=h.subscribe('ufi/page_cleared',this.$UFIController15.bind(this));r.onUnload(this.$UFIController16.bind(this));y.handleUpdate(wa.INITIAL_SERVER,db);if(this.$UFIController5.viewas)this.viewasUFICleanSubscription=h.subscribe('pre_page_transition',(function(lb,mb){if(this.$UFIController5.viewas!==new qa(mb.to).getQueryData('viewas'))oa.resetCommentListsForFeedbackTargetID(this.id);}).bind(this));this.collapseSubscription=z.subscribe(this.$UFIController7,(function(lb){switch(lb.action){case 'show':this.$UFIController10=false;break;case 'hide':this.$UFIController10=true;break;case 'toggle':this.$UFIController10=!this.$UFIController10;break;default:throw new Error('Invalid collapse action');}this.render(wa.COLLAPSE_ACTION);}).bind(this));i.loadModules(["ScrollAwareDOM"],function(lb){q.scrollMonitor=lb.monitor;});if(this.$UFIController4()&&this.$UFIController5.isstreaming){var kb=null;if(this.comments&&this.comments.length>0)kb=this.comments[0].fbid;ja.start(this.id,kb);}this.$UFIController3('construct',wa.INITIAL_SERVER);}ab.prototype.$UFIController6=function(){if(!this.$UFIController17){this.$UFIController18=new aa();this.$UFIController19={UFICallbackStore:new x(this.$UFIController18)};this.$UFIController17=new t();this.$UFIController17.addSubscriptions(this.$UFIController19.UFICallbackStore.on(w.ADD_COMMENT.CANCEL,(function(){return this.$UFIController13();}).bind(this)),this.$UFIController19.UFICallbackStore.on(w.COMMENT.TOGGLE_LIKE,(function(bb){return pa.changeCommentLike(bb.comment.id,bb.like,{source:this.source,target:bb.target});}).bind(this)),this.$UFIController19.UFICallbackStore.on(w.COMMENT.REMOVE,(function(bb){return this.$UFIController20(bb.comment,bb.target,bb.onConfirm);}).bind(this)),this.$UFIController19.UFICallbackStore.on(w.COMMENT.EDIT,(function(bb){return this.$UFIController21(bb.comment);}).bind(this)),this.$UFIController19.UFICallbackStore.on(w.COMMENT.TRANSLATE,(function(bb){return pa.translateComment(bb.comment,{source:this.source,target:bb.target});}).bind(this)),this.$UFIController19.UFICallbackStore.on(w.COMMENT.TOGGLE_MARK_AS_SPAM,(function(bb){return pa.setHideAsSpam(bb.comment.id,bb.is_spam,{source:this.source,target:bb.target});}).bind(this)),this.$UFIController19.UFICallbackStore.on(w.COMMENT.TOGGLE_INLINE_BAN,(function(bb){return pa.banUser(bb.comment,bb.ownerid,bb.is_banned,{source:this.source,target:bb.target});}).bind(this)),this.$UFIController19.UFICallbackStore.on(w.STORY.TOGGLE_LIKE,(function(bb){return pa.changeLike(this.id,!this.feedback.hasviewerliked,{source:this.source,target:bb.target,rootid:this.$UFIController5.rootid});}).bind(this)),this.$UFIController19.UFICallbackStore.on(w.ADD_COMMENT.SUBMIT_EDIT,(function(bb){return this.$UFIController22(bb.comment,bb.commentData,bb.target);}).bind(this)),this.$UFIController19.UFICallbackStore.on(w.COMMENT.REMOVE_PREVIEW,(function(bb){return pa.removePreview(bb.comment,{source:this.source,target:bb.target});}).bind(this)),this.$UFIController19.UFICallbackStore.on(w.STORY.SPAM_FETCHED,(function(bb){return pa.fetchSpamComments(this.id,bb.commentIDs,bb.parentCommentID,this.$UFIController5.viewas);}).bind(this)),this.$UFIController19.UFICallbackStore.on(w.ADD_COMMENT.RETRY_SUBMIT,(function(bb){return ma.retrySubmit(bb.comment,{source:this.source});}).bind(this)),this.$UFIController19.UFICallbackStore.on(w.STORY.CHANGE_ORDER_MODE,(function(bb){this.orderingMode=bb.mode;this.$UFIController8.showLoadingUFI=true;this.render(wa.USER_ACTION);this.fetchAndUpdate(this.render.bind(this),wa.USER_ACTION);}).bind(this)));}};ab.prototype.getStores=function(){return this.$UFIController19;};ab.prototype.$UFIController4=function(){if(this.$UFIController5.feedcarded)return fa.enableStreamingCommentsInFeed;return true;};ab.prototype.$UFIController23=function(){if(!this.$UFIController24)this.$UFIController24=o.byTag(this.root,'form');return this.$UFIController24;};ab.prototype.$UFIController21=function(bb){ia.updateState(this.$UFIController7,'isediting',true);ia.updateState(this.$UFIController7,'editcommentid',bb.id);};ab.prototype.$UFIController22=function(bb,cb,db){if(!cb.visibleValue&&!cb.attachedPhoto&&!cb.attachedSticker){this.$UFIController20(bb,db,ra);}else pa.editComment(bb.id,cb.visibleValue,cb.encodedValue,{source:this.$UFIController5.source,target:db,attachedPhoto:cb.attachedPhoto,attachedSticker:cb.attachedSticker});ia.updateStateField(this.$UFIController7,'locallycomposed',bb.id,true);this.$UFIController13();};ab.prototype.$UFIController13=function(){ia.updateState(this.$UFIController7,'isediting',false);ia.updateState(this.$UFIController7,'editcommentid',null);};ab.prototype.$UFIController20=function(bb,cb,db){var eb=ea[':fb:ufi:hide-dialog-template'].build();k.setContent(eb.getNode('body'),va._("Are you sure you want to delete this comment?"));k.setContent(eb.getNode('title'),va._("Delete Comment"));i.loadModules(["DialogX"],(function(fb){var gb=new fb({modal:true,width:465,addedBehaviors:[l]},eb.getRoot());gb.subscribe('confirm',(function(){pa.removeComment(bb.id,{source:this.source,oneclick:false,target:cb});db();gb.hide();}).bind(this));gb.show();}).bind(this));};ab.prototype.$UFIController25=function(){this.$UFIController10=false;j.expand(this.root,false,'ufi_controller');};ab.prototype.$UFIController26=function(){var bb=this.getToplevelCommentList().count,cb=Math.min(bb,this.$UFIController5.numLazyComments);sa(this.ranges,function(db){return db.updateRequestedRange(bb-cb,cb);});this.$UFIController9=true;this.fetchAndUpdate(this.render.bind(this),wa.USER_ACTION);};ab.prototype.setRange=function(bb){this.getRange().updateRange(bb.offset,bb.length);};ab.prototype.setReplyRange=function(bb,cb){this.getReplyRange(bb).updateRange(cb.offset,cb.length);};ab.prototype.render=function(bb){this.$UFIController1('render',bb);if(this.$UFIController8.showLoadingUFI){p.render(this.$UFIController27(),this.root);this.$UFIController3('render',bb);return;}var cb=ia.getKeyForInstance(this.$UFIController7,'inlineShare')||{},db=this.comments.length||!ta(this.feedback.likesentences.current);if((db&&ya(bb)||cb.toggling)&&this.$UFIController5.feedbackMode!=='never')this.$UFIController25();if(this.$UFIController5.disableCSSHiding&&this.$UFIController10){this.$UFIController3('render',bb);return p.unmountComponentAtNode(this.root);}if(this.$UFIController5.lazyFetch&&!this.$UFIController9&&!cb.active){p.render(this.$UFIController27(),this.root);this.$UFIController3('render',bb);return this.$UFIController26();}var eb=this.getRange();if(this.$UFIController11===null)this.$UFIController11=eb.getOffset()+eb.getLength()-1;var fb=this.feedback.replysocialsentencemaxreplies||-1,gb={};gb[this.id]=this.getToplevelCommentList().getDeletedCount();var hb={},ib={},jb={};ib[this.id]=!this.featuredToplevelCommentList;this.comments.forEach((function(pb){var qb=pb.id;gb[qb]=this.getReplyCommentList(qb).getDeletedCount();hb[qb]=this.getToplevelCommentList().getPermalinkForComment(qb);ib[qb]=!this.featuredReplyCommentLists[qb];if(this.repliesMap[qb]){var rb=this.repliesMap[qb].length;jb[qb]=qb===this.feedback.permalinkcommentid||rb>1||rb>0&&pb.interestingReplyOffset===undefined||pb.author===this.feedback.viewerid&&this.getReplyCommentList(qb).getCommentCount()==1;this.repliesMap[qb].forEach((function(sb){var tb=sb.id;hb[tb]=la.getCommentList(this.id,qb).getPermalinkForComment(tb);}).bind(this));}}).bind(this));var kb={};kb[this.id]=new ka(eb.offset,eb.length);for(var lb in this.replyRanges)kb[lb]=new ka(this.replyRanges[lb].offset,this.replyRanges[lb].length);var mb=!!this.featuredToplevelCommentList,nb=this.getToplevelCommentList().getForceNotPageable(),ob=p.createElement(ba,{dispatcher:this.$UFIController18,stores:this.$UFIController19},p.createElement(u,{feedback:this.feedback,id:this.id,onChangeRange:this.$UFIController28.bind(this),contextArgs:this.$UFIController5,repliesMap:this.repliesMap,shortenTimestamp:this.shortenTimestamp,commentCounts:this.commentcounts,deletedCounts:gb,availableComments:this.comments,source:this.source,ranges:kb,pageSize:this.$UFIController5.pagesize,authorProfiles:this.authorProfiles,instanceid:this.$UFIController7,loggingOffset:this.$UFIController11,replySocialSentenceMaxReplies:fb,orderingMode:this.orderingMode,hideOrderingModeSelector:mb,commentPermalinks:hb,canAddCommentMap:ib,isInitialRender:bb===wa.INITIAL_SERVER,inlineShare:cb,initialRepliesExpandMap:jb,hideToplevelPager:nb,isStreaming:this.$UFIController5.isstreaming}));p.render(ob,this.root);m.updateTimeStamps();if(this.$UFIController23())h.inform('ufi/changed',{form:this.$UFIController23()});if(bb!=wa.INITIAL_SERVER&&bb!=wa.COLLAPSED_UFI)h.inform('reflow');this.$UFIController3('render',bb);};ab.prototype.deferredCallback=function(bb,cb,db,eb){bb.callbackCount++;if(bb.callbackCount<bb.expectedCallbackCount)return;s.getMulti(cb,(function(fb){this.authorProfiles=fb;eb(db);if(db==wa.ENDPOINT_COMMENT_FETCH)h.inform('CommentUFI.Pager');}).bind(this));};ab.prototype.fetchAndUpdate=function(bb,cb){ha.getFeedbackTarget(this.id,(function(db){this.feedback=db;var eb=this.getToplevelCommentList().getCommentCount(),fb=this.getRange(),gb=null;if(this.$UFIController5.isstreaming){var hb=this.$UFIController5.feedcarded?4:300;gb={offset:Math.max(0,eb-hb),length:Math.min(hb,eb)};}else gb=xa(fb.getRequestedOffset(),fb.getRequestedLength(),this.commentcounts[this.id],eb,cb);var ib=[];if(this.feedback.reactorids)ib=ib.concat(this.feedback.reactorids);if(this.feedback.actorforpost)ib.push(this.feedback.actorforpost);var jb={expectedCallbackCount:0,callbackCount:0},kb=gb.offset,lb=gb.length,mb={viewAs:this.$UFIController5.viewas,feedContext:this.$UFIController5.feedcontext};this.getToplevelCommentList().getComments(kb,lb,mb,(function(nb,ob,pb){this.commentcounts[this.id]=ob;this.setRange(nb);this.comments=[];for(var qb in pb)this.comments.push(pb[qb]);za(ib,this.comments);if(this.feedback.isthreaded&&this.comments.length){jb.expectedCallbackCount=this.comments.length;}else jb.expectedCallbackCount=1;for(var rb in pb){var sb=pb[rb],tb=sb.id;if(this.feedback.isthreaded){var ub=this.getReplyCommentList(tb).getCommentCount(),vb;if(this.replyRanges[tb]){var wb=this.getReplyRange(tb);vb=xa(wb.getRequestedOffset(),wb.getRequestedLength(),this.commentcounts[tb],ub,cb);}else if(sb.interestingReplyOffset!==undefined){vb={offset:sb.interestingReplyOffset,length:1};}else{var xb=this.feedback.isranked?0:Math.min(ub,2);vb={offset:0,length:xb};}var yb=vb.offset,zb=vb.length;this.getReplyCommentList(tb).getComments(yb,zb,mb,(function(ac,bc,cc,dc){this.commentcounts[ac]=cc;this.setReplyRange(ac,bc);this.repliesMap[ac]=[];for(var ec in dc)this.repliesMap[ac].push(dc[ec]);za(ib,this.repliesMap[ac]);this.$UFIController8.showLoadingUFI=false;this.deferredCallback(jb,ib,cb,bb);}).bind(this,tb,vb,ub));}}if(!this.feedback.isthreaded||!this.comments.length){this.$UFIController8.showLoadingUFI=false;this.deferredCallback(jb,ib,cb,bb);}}).bind(this,gb,eb));}).bind(this));};ab.prototype.getToplevelCommentList=function(){if(this.featuredToplevelCommentList)return this.featuredToplevelCommentList;return oa.getCommentList(this.id,this.orderingMode);};ab.prototype.getReplyCommentList=function(bb){if(bb in this.featuredReplyCommentLists)return this.featuredReplyCommentLists[bb];return la.getCommentList(this.id,bb);};ab.prototype.getRange=function(){if(!(this.orderingMode in this.ranges))this.ranges[this.orderingMode]=new ka();return this.ranges[this.orderingMode];};ab.prototype.getReplyRange=function(bb){if(!(bb in this.replyRanges))this.replyRanges[bb]=new ka();return this.replyRanges[bb];};ab.prototype.$UFIController28=function(bb,cb){if(bb==this.id){this.getRange().updateRequestedRange(cb.offset,cb.length);}else this.replyRanges[bb].updateRequestedRange(cb.offset,cb.length);this.fetchAndUpdate(this.render.bind(this),wa.USER_ACTION);};ab.prototype.$UFIController14=function(){p.unmountComponentAtNode(this.root);this.ufiCentralUpdatesSubscriptions.forEach(y.unsubscribe.bind(y));var bb=[this.viewasUFICleanSubscription,this.collapseSubscription,this.clearPageSubscription];bb.map(function(cb){return cb&&h.unsubscribe(cb);});this.$UFIController29();if(this.$UFIController17){this.$UFIController17.release();this.$UFIController17=null;}};ab.prototype.$UFIController15=function(){this.$UFIController14();h.unsubscribe(this.clearPageletSubscription);};ab.prototype.$UFIController16=function(){this.$UFIController29();};ab.prototype.$UFIController29=function(){var bb=[this.liveLikeSubscription,this.liveCommentSubscription];bb.map(function(cb){return cb&&cb.unsubscribe();});};ab.prototype.$UFIController27=function(){var bb=ia.getKeyForInstance(this.$UFIController7,'inlineShare');return (p.createElement(ba,{dispatcher:this.$UFIController18,stores:this.$UFIController19},p.createElement(u,{feedback:this.feedback,id:this.id,contextArgs:this.$UFIController5,commentCounts:this.commentcounts,inlineShare:bb,loadingComments:true,isStreaming:this.$UFIController5.isstreaming})));};f.exports=ab;},null);
__d("cssURL",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){return "url('"+i.replace(/(\\|\s|\(|\)|'|\")/g,'\\$1')+"')";}f.exports=h;},null);
__d('MentionsTypeaheadViewItem.react',['Badge.react','ImageBlock.react','React','TypeaheadViewItem','cssURL','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=Object.assign||function(q){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var t in s)if(Object.prototype.hasOwnProperty.call(s,t))q[t]=s[t];}return q;},o=j.PropTypes,p=j.createClass({displayName:'MentionsTypeaheadViewItem',mixins:[k.Mixin],propTypes:n({},k.propTypes,{ariaDescribedBy:o.string}),render:function(){var q=this.props.entry,r=q.getAuxiliaryData(),s=null;if(r)if(r.verified){s=j.createElement(h,{type:"verified",size:"xsmall"});}else if(r.workUser)s=j.createElement(h,{type:"work",size:"xsmall"});var t=q.getPhoto()?j.createElement('span',{className:"_5u93",style:{backgroundImage:l(q.getPhoto())}}):j.createElement('span',null),u=null;if(q.getSubtitle())u=j.createElement('div',{className:"_5u95"},q.getSubtitle());var v=' '+"_5u91"+(this.props.highlighted?' '+"_5u92":'');return (j.createElement('li',{role:"option",className:v,'aria-label':q.getTitle(),'aria-selected':this.props.highlighted,'aria-describedby':this.props.ariaDescribedBy,onMouseDown:this._onSelect,onMouseEnter:this._onHighlight},j.createElement(i,{spacing:"medium"},t,j.createElement('div',null,j.createElement('div',{className:"_5u94"},q.getTitle(),s),u))));}});f.exports=p;},null);
__d('GroupMentionsTypeaheadView.react',['Image.react','MentionsTypeaheadViewItem.react','React','cx','fbt','ix','uniqueID'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=j.PropTypes,p=l._("No Results"),q=j.createClass({displayName:'GroupMentionsTypeaheadView',propTypes:{id:o.string,viewProps:o.object,highlightedEntry:o.object,entries:o.array.isRequired,onSelect:o.func.isRequired,onHighlight:o.func,onRenderHighlight:o.func},getInitialState:function(){return {emptyMembersHeaderID:n(),membersHeaderID:n(),nonMembersHeaderID:n()};},_renderItem:function(r,s){var t=r===this.props.highlightedEntry;return (j.createElement(i,{key:r.getUniqueID(),ariaDescribedBy:s,entry:r,highlighted:t,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,onRenderHighlight:this._onRenderHighlight}));},_renderHashtagItem:function(r){var s=r===this.props.highlightedEntry;return (j.createElement(i,{key:r.getUniqueID(),entry:r,highlighted:s,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,onRenderHighlight:this.props.onRenderHighlight}));},_renderMembers:function(r){var s=null;if(r.length){s=r.map((function(v,w){var x=w===0?this.state.membersHeaderID:null;return this._renderItem(v,x);}).bind(this));}else s=[j.createElement('li',{className:"_2ph-",key:this.state.emptyMembersHeaderID,role:"option",'aria-describedby':this.state.membersHeaderID,'aria-label':p},p)];var t=null;if(this.props.viewProps.member.aux)t=j.createElement('span',{className:"_1knr"},' \u00b7 ',this.props.viewProps.member.aux);var u=[j.createElement('li',{key:this.state.membersHeaderID,className:"_1kns"},this.props.viewProps.member.title,t)];u.push.apply(u,s);return u;},_renderNonMembers:function(r){if(!r.length)return null;var s=null;if(this.props.viewProps.nonMember.aux)s=j.createElement('span',{className:"_1knr"},' \u00b7 ',this.props.viewProps.nonMember.aux);var t=[j.createElement('li',{key:this.state.nonMembersHeaderID,className:"_1kns"},j.createElement(h,{src:m('/images/groups/secret-tag.png'),className:"_1knt"}),this.props.viewProps.nonMember.title,s)];t.push.apply(t,r.map((function(u,v){var w=v===0?this.state.nonMembersHeaderID:null;return this._renderItem(u,w);}).bind(this)));return t;},render:function(){var r=[],s=[],t=[];this.props.entries.forEach(function(x){var y=x.getAuxiliaryData(),z=y.renderType;if(z==='member'){r.push(x);}else if(z==='hashtag'){t.push(x);}else s.push(x);});var u=' '+"_5u8_"+(!r.length&&!s.length&&!t.length?' '+"_5u90":''),v=r.length===0&&s.length===0&&t.length>0,w=v?this.props.entries.map(this._renderHashtagItem):this._renderMembers(r).concat(this._renderNonMembers(s));return (j.createElement('ul',{className:u,role:"listbox",id:this.props.id},w));}});f.exports=q;},null);
__d('UFIMentionsInputProxy.react',['Bootloader','React','cx','emptyFunction','setImmediate'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=Object.assign||function(o){for(var p=1;p<arguments.length;p++){var q=arguments[p];for(var r in q)if(Object.prototype.hasOwnProperty.call(q,r))o[r]=q[r];}return o;},n=i.createClass({displayName:'UFIMentionsInputProxy',getInitialState:function(){return {component:null};},componentDidMount:function(){this._cmdBuffer=this._cmdBuffer||[];if(this.props.initialData)this._bootload();},componentDidUpdate:function(){if(this.state.component)this._drainFnBuffer();},hasEnteredText:function(){return this._fillCmdBuffer({fn:'hasEnteredText',args:[]});},setSignature:function(o){this._fillCmdBuffer({fn:'setSignature',args:[o]});},focus:function(){this._bootload();this._fillCmdBuffer({fn:'focus',args:[]});},submitComment:function(event){this._fillCmdBuffer({fn:'submitComment',args:[event]});},insertMention:function(o){this._fillCmdBuffer({fn:'insertMention',args:[o]});},insertEmoticon:function(o){this._fillCmdBuffer({fn:'insertEmoticon',args:[o]});},_bootload:function(){h.loadModules(["UFIMentionsInput.react"],(function(o){return this.setState({component:o});}).bind(this));},_shouldDrainBuffer:function(){return this._cmdBuffer.length>0;},_fillCmdBuffer:function(o){if(this.refs.mentionsinputchild){return this._execCmd(o);}else this._cmdBuffer=this._cmdBuffer.concat([o]);},_drainFnBuffer:function(){if(this._shouldDrainBuffer()){var o=this._cmdBuffer[0];this._execCmd(o);this._cmdBuffer=this._cmdBuffer.slice(1);l(this._drainFnBuffer);}},_execCmd:function(o){var p=this.refs.mentionsinputchild;return p[o.fn].apply(p,o.args);},_renderProxyInput:function(){var o="_1osa mentionsHidden";return (i.createElement('input',{className:o,name:"add_comment_text",ref:"proxyInput",onFocus:this.focus,tabIndex:"-1"}));},_renderDummy:function(){var o="UFIAddCommentInput _1osb _1osc";return (i.createElement('div',{onFocus:this.focus,onClick:this.focus,onTouchStart:k,onMouseOver:this._bootload},i.createElement('div',{className:o},this._renderProxyInput(),this.props.placeholder)));},render:function(){var o=this.state.component;if(!o)return this._renderDummy();return (i.createElement(o,m({key:'mentionsinputchild',ref:'mentionsinputchild'},this.props),this.props.children));}});f.exports=n;},null);
__d('MentionsInputTypeaheadView.react',['MentionsTypeaheadViewItem.react','React','cx'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=i.PropTypes,l=i.createClass({displayName:'MentionsInputTypeaheadView',propTypes:{id:k.string,highlightedEntry:k.object,entries:k.array.isRequired,onSelect:k.func.isRequired,onHighlight:k.func,onRenderHighlight:k.func},_renderItem:function(m){var n=m===this.props.highlightedEntry;return (i.createElement(h,{key:m.getUniqueID(),entry:m,highlighted:n,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,onRenderHighlight:this.props.onRenderHighlight}));},render:function(){var m=' '+"_5u8_"+(!this.props.entries.length?' '+"_5u90":'');return (i.createElement('ul',{className:m,role:"listbox",id:this.props.id},this.props.entries.map(this._renderItem)));}});f.exports=l;},null);
__d('ReactComposerEvents',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={CHANGE:'change',SELECT_ATTACHMENT:'composer/selectAttachment',FOCUS:'composer/focus',MENTION_INPUT_FOCUS:'composer/mentionInputFocused',POST_STARTED:'composer/postStarted'};f.exports=h;},null);
__d('ReactComposerIDGenerator',['ReactComposerConstants','uniqueID'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();'use strict';var j={getID:function(){return h.ID_PREFIX+i();},isComposerID:function(k){return !!k&&k.startsWith(h.ID_PREFIX);}};f.exports=j;},null);
__d('FbFeedHighlight',['JSXDOM','CSS','DOM','DOMScroll','cx'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=1000,n=1000,o=null;function p(){return (h.div({className:"_1usz"},h.div({className:"_1us-"}),h.div({className:"_1us_"}),h.div({className:"_1ut0"}),h.div({className:"_1ut1"})));}var q={highlightAndScrollTo:function(r){q.highlight(r);q.scrollTo(r);},highlightSingle:function(r){var s=p();j.appendContent(r,s);setTimeout(function(){if(o)j.remove(o);o=s;i.addClass(r,"_1ut2");},0);setTimeout(function(){i.removeClass(r,"_1ut2");setTimeout(function(){j.remove(s);if(s==o)o=null;},m+n);},m+n);},highlight:function(r){var s=q.highlightPermanent(r);setTimeout(function(){i.removeClass(r,"_1ut2");setTimeout(j.remove.bind(null,s),m+m);},m+n);},highlightPermanent:function(r){var s=p();j.appendContent(r,s);setTimeout(i.addClass.bind(null,r,"_1ut2"),0);return s;},scrollTo:function(r){setTimeout(k.scrollTo.bind(null,r),0);}};f.exports=q;},null);
__d('VideoDisplayTimePlayButton',['CSS','Event'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={},k={getClicked:function(l){var m=l.id;if(j.hasOwnProperty(m))return j[m].clicked;return false;},register:function(l,m){var n=l.id;j[n]=i.listen(l,'click',function(){if(m){h.hide(l);h.show(m);}j[n].clicked=true;});},unregister:function(l){var m=l.id;if(j.hasOwnProperty(m))j[m].remove();}};f.exports=k;},null);
__d('VideosRenderingInstrumentation',['DataStore'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={storeRenderTime:function(j){var k=Date.now();h.set(j,'videos_rendering_instrumentation',k);return k;},retrieveRenderTime:function(j){var k=h.get(j,'videos_rendering_instrumentation',NaN);if(Number.isNaN(k))k=i.storeRenderTime(j);return k;}};f.exports=i;},null);